/*
**  ASTy-ASTq -- Abstract Syntax Tree With Integrated Query Engine
**  Copyright (c) 2014-2015 Ralf S. Engelschall <rse@engelschall.com>
**
**  Permission is hereby granted, free of charge, to any person obtaining
**  a copy of this software and associated documentation files (the
**  "Software"), to deal in the Software without restriction, including
**  without limitation the rights to use, copy, modify, merge, publish,
**  distribute, sublicense, and/or sell copies of the Software, and to
**  permit persons to whom the Software is furnished to do so, subject to
**  the following conditions:
**
**  The above copyright notice and this permission notice shall be included
**  in all copies or substantial portions of the Software.
**
**  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
**  EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
**  MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
**  IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY
**  CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,
**  TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE
**  SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
*/

(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.ASTYASTQ = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(_dereq_,module,exports){
(function (global){
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.ASTQ=e()}}(function(){return function e(t,r,n){function a(i,s){if(!r[i]){if(!t[i]){var o="function"==typeof _dereq_&&_dereq_;if(!s&&o)return o(i,!0);if(u)return u(i,!0);var c=new Error("Cannot find module '"+i+"'");throw c.code="MODULE_NOT_FOUND",c}var l=r[i]={exports:{}};t[i][0].call(l.exports,function(e){var r=t[i][1][e];return a(r?r:e)},l,l.exports,e,t,r,n)}return r[i].exports}for(var u="function"==typeof _dereq_&&_dereq_,i=0;i<n.length;i++)a(n[i]);return a}({1:[function(e,t,r){"use strict";var n=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();Object.defineProperty(r,"__esModule",{value:!0});var u=function(){function e(){n(this,e)}return a(e,null,[{key:"taste",value:function(e){return"object"==typeof e&&"boolean"==typeof e.ASTy}},{key:"getParentNode",value:function(e){return e.parent()}},{key:"getChildNodes",value:function(e){return e.childs()}},{key:"getNodeType",value:function(e){return e.type()}},{key:"getNodeAttrNames",value:function(e){return e.attrs()}},{key:"getNodeAttrValue",value:function(e,t){return e.get(t)}}]),e}();r["default"]=u,t.exports=r["default"]},{}],2:[function(e,t,r){"use strict";var n=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();Object.defineProperty(r,"__esModule",{value:!0});var u=function(){function e(){n(this,e)}return a(e,null,[{key:"taste",value:function(e){return"object"==typeof e&&null!==e&&"string"==typeof e.type&&""!==e.type}},{key:"getParentNode",value:function(){throw new Error("Mozilla SpiderMonkey AST does not support parent node traversal")}},{key:"getChildNodes",value:function(e){var t=this,r=[];for(var n in e)e.hasOwnProperty(n)&&this.taste(e[n])?r.push(e[n]):e.hasOwnProperty(n)&&"object"==typeof e[n]&&e[n]instanceof Array&&e[n].forEach(function(e){t.taste(e)&&r.push(e)});return r}},{key:"getNodeType",value:function(e){return e.type}},{key:"getNodeAttrNames",value:function(e){var t=[];for(var r in e)e.hasOwnProperty(r)&&"object"!=typeof e[r]&&"type"!==r&&"loc"!==r&&t.push(r);return t}},{key:"getNodeAttrValue",value:function(e,t){return e.hasOwnProperty(t)&&"object"!=typeof e[t]&&"type"!==t&&"loc"!==t?e[t]:void 0}}]),e}();r["default"]=u,t.exports=r["default"]},{}],3:[function(e,t,r){"use strict";var n=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();Object.defineProperty(r,"__esModule",{value:!0});var u=function(){function e(){n(this,e)}return a(e,null,[{key:"taste",value:function(e){return"object"==typeof Node&&e instanceof Node&&"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName}},{key:"getParentNode",value:function(e){return e.parentNode}},{key:"getChildNodes",value:function(e){return e.childNodes}},{key:"getNodeType",value:function(e){return e.nodeName}},{key:"getNodeAttrNames",value:function(e){return Array.prototype.slice.call(e.attributes,0).map(function(e){return e.nodeName})}},{key:"getNodeAttrValue",value:function(e,t){return e.getAttribute(t)}}]),e}();r["default"]=u,t.exports=r["default"]},{}],4:[function(e,t,r){"use strict";var n=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();Object.defineProperty(r,"__esModule",{value:!0});var u=function(){function e(){return n(this,e),this._adapters=[],this}return a(e,[{key:"register",value:function(e){return this._adapters.unshift(e),this}},{key:"unregister",value:function(e){if(void 0===e)this._adapters=[];else{for(var t=[],r=0;r<this._adapters.length;r++)this._adapters[r]!==e&&t.push(this._adapters[r]);this._adapters=t}return this}},{key:"select",value:function(e){for(var t=0;t<this._adapters.length;t++)if(this._adapters[t].taste(e))return this._adapters[t];return void 0}}]),e}();r["default"]=u,t.exports=r["default"]},{}],5:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={type:function(e,t){return e.getNodeType(t)},depth:function a(e,t){for(var a=1,r=t;null!==(r=e.getParentNode(r));)a++;return a},pos:function(e,t){var r=e.getParentNode(t);if(null===r)return 1;for(var n=e.getChildNodes(r),a=0;a<n.length;a++)if(n[a]===t)return a+1;throw new Error("cannot find myself")},nth:function(e,t,r){r=parseInt(r,10);var n=e.getParentNode(t);if(null!==n){var a=e.getChildNodes(n);0>r&&(r=a-(r+1));for(var u=0;u<a.length;u++)if(a[u]===t)return u+1===r;return!1}return 1===r?!0:!1},first:function(e,t){return n.nth(e,t,1)},last:function(e,t){return n.nth(e,t,-1)},count:function(e,t,r){return"object"==typeof r&&r instanceof Array?r.length:"object"==typeof r?Object.keys(r).length:"string"==typeof r?r.length:String(r).length},substr:function(e,t,r,n,a){return String(r).substr(n,a)},lc:function(e,t,r){return String(r).toLowerCase()},uc:function(e,t,r){return String(r).toUpperCase()}};r["default"]=n,t.exports=r["default"]},{}],6:[function(e,t,r){"use strict";var n=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();Object.defineProperty(r,"__esModule",{value:!0});var u=function(){function e(){return n(this,e),this._funcs={},this}return a(e,[{key:"register",value:function(e,t){this._funcs[e]=t}},{key:"run",value:function(e,t){var r=this._funcs[e];if("function"!=typeof r)throw new Error('invalid function "'+e+'"');return r.apply(null,t)}}]),e}();r["default"]=u,t.exports=r["default"]},{}],7:[function(e,t,r){"use strict";var n=function(e){return e&&e.__esModule?e:{"default":e}},a=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function d(e,t,r){var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var a=Object.getPrototypeOf(e);return null===a?void 0:d(a,t,r)}if("value"in n)return n.value;var u=n.get;return void 0===u?void 0:u.call(r)},s=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)};Object.defineProperty(r,"__esModule",{value:!0});var o=e("./astq-util.js"),c=n(o),l=e("./astq-query-trace.js"),f=n(l),p=function(e){function t(e,r,n,u){a(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.adapter=e,this.params=r,this.funcs=n,this.trace=u}return s(t,e),u(t,[{key:"execQuery",value:function(e,t){var r=this;this.traceBegin(e,t);var n=[];return e.childs().forEach(function(e){n=n.concat(r.execPath(e,t))}),this.traceEnd(e,t,n),n}},{key:"execPath",value:function(e,t){var r=this;this.traceBegin(e,t);var n=[t];return e.childs().forEach(function(e){var t=[];n.forEach(function(n){t=t.concat(r.execStep(e,n))}),n=t}),this.traceEnd(e,t,n),n}},{key:"execStep",value:function(e,t){var r=this;this.traceBegin(e,t);var n=e.childs(),a=null,u=null,i=null,s=0;if(s<n.length&&"Axis"===n[s].type()&&(a=n[s++]),s<n.length&&"Match"===n[s].type()&&(u=n[s++]),s<n.length&&"Filter"===n[s].type()&&(i=n[s++]),null===u)throw new Error("no matching part in query step");var o=[],c=u.get("id"),l=function(e){var t=r.adapter.getNodeType(e);if("*"===c||c===t){var n=!0;null!==i&&(r.execFilter(i,e)||(n=!1)),n&&o.push(e)}};if(null!==a){var f=a.get("op");if("/"===f)this.adapter.getChildNodes(t).forEach(function(e){return l(e)});else if("//"===f)!function(){var e=function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return t.toString()},t}(function(t){l(t),r.adapter.getChildNodes(t).forEach(function(t){return e(t)})});r.adapter.getChildNodes(t).forEach(function(t){return e(t)})}();else if("-/"===f){var p=this.adapter.getParentNode(t);if(null!==p){for(var d=this.adapter.getChildNodes(p),h=null,v=0;v<d.length&&d[v]!==t;v++)h=d[v];l(h)}}else if("-//"===f){var y=this.adapter.getParentNode(t);if(null!==y)for(var d=this.adapter.getChildNodes(y),g=0;g<d.length&&d[g]!==t;g++)l(d[g])}else if("+/"===f){var x=this.adapter.getParentNode(t);if(null!==x){var d=this.adapter.getChildNodes(x),b=void 0;for(b=0;b<d.length&&d[b]!==t;b++);b<d.length&&(b++,l(d[b]))}}else if("+//"===f){var A=this.adapter.getParentNode(t);if(null!==A){var d=this.adapter.getChildNodes(A),m=void 0;for(m=0;m<d.length&&d[m]!==t;m++);if(m<d.length)for(m++;m<d.length;)l(d[m++])}}else if("../"===f){var P=this.adapter.getParentNode(t);null!==P&&l(P)}else if("..//"===f)for(var E=t;;){var w=this.adapter.getParentNode(E);if(null===w)break;l(w),E=w}}else l(t);return this.traceEnd(e,t,o),o}},{key:"execFilter",value:function(e,t){this.traceBegin(e,t);var r=e.childs()[0],n=this.execExpr(r,t);return n=c["default"].truthy(n),this.traceEnd(e,t,n),n}},{key:"execExpr",value:function(e,t){switch(e.type()){case"ConditionalBinary":return this.execExprConditionalBinary(e,t);case"ConditionalTernary":return this.execExprConditionalTernary(e,t);case"Logical":return this.execExprLogical(e,t);case"Bitwise":return this.execExprBitwise(e,t);case"Relational":return this.execExprRelational(e,t);case"Arithmetical":return this.execExprArithmetical(e,t);case"Unary":return this.execExprUnary(e,t);case"FuncCall":return this.execExprFuncCall(e,t);case"Attribute":return this.execExprAttribute(e,t);case"Param":return this.execExprParam(e,t);case"LiteralString":return this.execExprLiteralString(e,t);case"LiteralRegExp":return this.execExprLiteralRegExp(e,t);case"LiteralNumber":return this.execExprLiteralNumber(e,t);case"LiteralValue":return this.execExprLiteralValue(e,t);case"Path":return this.execExprPath(e,t)}}},{key:"execExprConditionalBinary",value:function(e,t){this.traceBegin(e,t);var r=this.execExpr(e.childs()[0],t);return c["default"].truthy(r)||(r=this.execExpr(e.childs()[1],t)),this.traceEnd(e,t,r),r}},{key:"execExprConditionalTernary",value:function(e,t){this.traceBegin(e,t);var r=this.execExpr(e.childs()[0],t);return r=c["default"].truthy(r)?this.execExpr(e.childs()[1],t):this.execExpr(e.childs()[2],t),this.traceEnd(e,t,r),r}},{key:"execExprLogical",value:function(e,t){this.traceBegin(e,t);var r=!1;switch(e.get("op")){case"&&":r=c["default"].truthy(this.execExpr(e.childs()[0],t)),r&&(r=r&&c["default"].truthy(this.execExpr(e.childs()[1],t)));break;case"||":r=c["default"].truthy(this.execExpr(e.childs()[0],t)),r||(r=r||c["default"].truthy(this.execExpr(e.childs()[1],t)))}return this.traceEnd(e,t,r),r}},{key:"execExprBitwise",value:function(e,t){this.traceBegin(e,t);var r=c["default"].coerce(this.execExpr(e.childs()[0],t),"number"),n=c["default"].coerce(this.execExpr(e.childs()[1],t),"number"),a=void 0;switch(e.get("op")){case"&":a=r&n;break;case"|":a=r|n;break;case"<<":a=r<<n;break;case">>":a=r>>n}return this.traceEnd(e,t,a),a}},{key:"execExprRelational",value:function(e,t){this.traceBegin(e,t);var r=this.execExpr(e.childs()[0],t),n=this.execExpr(e.childs()[1],t),a=void 0;switch(e.get("op")){case"==":a=r===n;break;case"!=":a=r!==n;break;case"<=":a=c["default"].coerce(r,"number")<=c["default"].coerce(n,"number");break;case">=":a=c["default"].coerce(r,"number")>=c["default"].coerce(n,"number");break;case"<":a=c["default"].coerce(r,"number")<c["default"].coerce(n,"number");break;case">":a=c["default"].coerce(r,"number")>c["default"].coerce(n,"number");break;case"=~":a=null!==c["default"].coerce(r,"string").match(c["default"].coerce(n,"regexp"));break;case"!~":a=null===c["default"].coerce(r,"string").match(c["default"].coerce(n,"regexp"))}return this.traceEnd(e,t,a),a}},{key:"execExprArithmetical",value:function(e,t){this.traceBegin(e,t);var r=this.execExpr(e.childs()[0],t),n=this.execExpr(e.childs()[1],t),a=void 0;switch(e.get("op")){case"+":a="string"==typeof r?r+c["default"].coerce(n,"string"):c["default"].coerce(r,"number")+c["default"].coerce(n,"number");break;case"-":a=c["default"].coerce(r,"number")+c["default"].coerce(n,"number");break;case"*":a=c["default"].coerce(r,"number")*c["default"].coerce(n,"number");break;case"/":a=c["default"].coerce(r,"number")/c["default"].coerce(n,"number");break;case"%":a=c["default"].coerce(r,"number")%c["default"].coerce(n,"number");break;case"**":a=Math.pow(c["default"].coerce(r,"number"),c["default"].coerce(n,"number"))}return this.traceEnd(e,t,a),a}},{key:"execExprUnary",value:function(e,t){this.traceBegin(e,t);var r=this.execExpr(e.childs()[0],t),n=void 0;switch(e.get("op")){case"!":n=!c["default"].coerce(r,"boolean");break;case"~":n=~c["default"].coerce(r,"number")}return this.traceEnd(e,t,n),n}},{key:"execExprFuncCall",value:function(e,t){var r=this;this.traceBegin(e,t);var n=e.get("id"),a=[this.adapter,t];e.childs().forEach(function(e){a.push(r.execExpr(e,t))});var u=this.funcs.run(n,a);return this.traceEnd(e,t,u),u}},{key:"execExprAttribute",value:function(e,t){this.traceBegin(e,t);var r=e.get("id"),n=this.adapter.getNodeAttrValue(t,r);return this.traceEnd(e,t,n),n}},{key:"execExprParam",value:function(e,t){this.traceBegin(e,t);var r=e.get("id");if("undefined"==typeof this.params[r])throw new Error('invalid parameter "'+r+'"');var n=this.params[r];return this.traceEnd(e,t,n),n}},{key:"execExprLiteralString",value:function(e,t){this.traceBegin(e,t);var r=e.get("value");return this.traceEnd(e,t,r),r}},{key:"execExprLiteralRegExp",value:function(e,t){this.traceBegin(e,t);var r=e.get("value");return this.traceEnd(e,t,r),r}},{key:"execExprLiteralNumber",value:function(e,t){this.traceBegin(e,t);var r=e.get("value");return this.traceEnd(e,t,r),r}},{key:"execExprLiteralValue",value:function(e,t){this.traceBegin(e,t);var r=e.get("value");return this.traceEnd(e,t,r),r}},{key:"execExprPath",value:function(e,t){this.traceBegin(e,t);var r=this.execPath(e,t);return this.traceEnd(e,t,r),r}}]),t}(f["default"]);r["default"]=p,t.exports=r["default"]},{"./astq-query-trace.js":8,"./astq-util.js":10}],8:[function(e,t,r){"use strict";var n=function(e){return e&&e.__esModule?e:{"default":e}},a=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();Object.defineProperty(r,"__esModule",{value:!0});var i=e("./astq-util.js"),s=n(i),o=function(){function e(){a(this,e)}return u(e,[{key:"prefixOf",value:function(e,t){for(var r=0,n=e;null!==(n=n.parent());)r++;var a=s["default"].pad("",4*r);for(r=0,n=t;null!==(n=this.adapter.getParentNode(n));)r++;var u=s["default"].pad("",4*r);return{prefix1:a,prefix2:u}}},{key:"traceBegin",value:function(e,t){if(this.trace){var r=this.prefixOf(e,t),n=r.prefix1,a=r.prefix2;console.log("ASTQ: execute: | "+s["default"].pad(n+e.type()+" (",-60)+" | "+a+this.adapter.getNodeType(t))}}},{key:"traceEnd",value:function(e,t,r){var n=this;if(this.trace){var a=this.prefixOf(e,t),u=a.prefix1,i=a.prefix2,o=void 0;void 0===r?o="undefined":"object"==typeof r&&r instanceof Array?(o="[",r.forEach(function(e){o+="node("+n.adapter.getNodeType(e)+"),"}),o=o.replace(/,$/,"")+"]"):o=typeof r+"("+r+")",o.length>60&&(o=o.substr(0,60)+"..."),console.log("ASTQ: execute: | "+s["default"].pad(u+"): "+o,-60)+" | "+i+this.adapter.getNodeType(t))}}}]),e}();r["default"]=o,t.exports=r["default"]},{"./astq-util.js":10}],9:[function(e,t,r){"use strict";var n=function(e){return e&&e.__esModule?e:{"default":e}},a=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();Object.defineProperty(r,"__esModule",{value:!0});var i=e("./astq-query-exec.js"),s=n(i),o=e("asty"),c=e("pegjs-util"),l=function(){function e(e,t){function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r}function t(e,t,r,n,a,u){this.message=e,this.expected=t,this.found=r,this.offset=n,this.line=a,this.column=u,this.name="SyntaxError"}function r(e){function r(){return ra}function n(){return i(ra).line}function a(){return i(ra).column}function u(e){throw o(e,null,ra)}function i(t){function r(t,r,n){var a,u;for(a=r;n>a;a++)u=e.charAt(a),"\n"===u?(t.seenCR||t.line++,t.column=1,t.seenCR=!1):"\r"===u||"\u2028"===u||"\u2029"===u?(t.line++,t.column=1,t.seenCR=!0):(t.column++,t.seenCR=!1)}return na!==t&&(na>t&&(na=0,aa={line:1,column:1,seenCR:!1}),r(aa,na,t),na=t),aa}function s(e){ua>ta||(ta>ua&&(ua=ta,ia=[]),ia.push(e))}function o(r,n,a){function u(e){var t=1;for(e.sort(function(e,t){return e.description<t.description?-1:e.description>t.description?1:0});t<e.length;)e[t-1]===e[t]?e.splice(t,1):t++}function s(e,t){function r(e){function t(e){return e.charCodeAt(0).toString(16).toUpperCase()}return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(e){return"\\x0"+t(e)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(e){return"\\x"+t(e)}).replace(/[\u0180-\u0FFF]/g,function(e){return"\\u0"+t(e)}).replace(/[\u1080-\uFFFF]/g,function(e){return"\\u"+t(e)})}var n,a,u,i=new Array(e.length);for(u=0;u<e.length;u++)i[u]=e[u].description;return n=e.length>1?i.slice(0,-1).join(", ")+" or "+i[e.length-1]:i[0],a=t?'"'+r(t)+'"':"end of input","Expected "+n+" but "+a+" found."}var o=i(a),c=a<e.length?e.charAt(a):null;return null!==n&&u(n),new t(null!==r?r:s(n,c),n,c,a,o.line,o.column)}function c(){var e,t,r,n,a,u=36*ta+0,i=oa[u];return i?(ta=i.nextPos,i.result):(e=ta,t=z(),t!==G?(r=l(),r!==G?(n=z(),n!==G?(a=Z(),a!==G?(ra=e,t=W(r),e=t):(ta=e,e=K)):(ta=e,e=K)):(ta=e,e=K)):(ta=e,e=K),oa[u]={nextPos:ta,result:e},e)}function l(){var t,r,n,a,u,i,o,c,l=36*ta+1,p=oa[l];if(p)return ta=p.nextPos,p.result;if(t=ta,r=f(),r!==G){for(n=[],a=ta,u=z(),u!==G?(44===e.charCodeAt(ta)?(i=X,ta++):(i=G,0===sa&&s(Y)),i!==G?(o=z(),o!==G?(c=f(),c!==G?(u=[u,i,o,c],a=u):(ta=a,a=K)):(ta=a,a=K)):(ta=a,a=K)):(ta=a,a=K);a!==G;)n.push(a),a=ta,u=z(),u!==G?(44===e.charCodeAt(ta)?(i=X,ta++):(i=G,0===sa&&s(Y)),i!==G?(o=z(),o!==G?(c=f(),c!==G?(u=[u,i,o,c],a=u):(ta=a,a=K)):(ta=a,a=K)):(ta=a,a=K)):(ta=a,a=K);n!==G?(ra=t,r=ee(r,n),t=r):(ta=t,t=K)}else ta=t,t=K;return oa[l]={nextPos:ta,result:t},t}function f(){var e,t,r,n,a,u,i=36*ta+2,s=oa[i];if(s)return ta=s.nextPos,s.result;if(e=ta,t=p(),t!==G){for(r=[],n=ta,a=z(),a!==G?(u=d(),u!==G?(a=[a,u],n=a):(ta=n,n=K)):(ta=n,n=K);n!==G;)r.push(n),n=ta,a=z(),a!==G?(u=d(),u!==G?(a=[a,u],n=a):(ta=n,n=K)):(ta=n,n=K);r!==G?(ra=e,t=te(t,r),e=t):(ta=e,e=K)}else ta=e,e=K;return oa[i]={nextPos:ta,result:e},e}function p(){var e,t,r,n,a,u,i=36*ta+3,s=oa[i];return s?(ta=s.nextPos,s.result):(e=ta,t=h(),t===G&&(t=re),t!==G?(r=z(),r!==G?(n=v(),n!==G?(a=z(),a!==G?(u=y(),u===G&&(u=re),u!==G?(ra=e,t=ne(t,n,u),e=t):(ta=e,e=K)):(ta=e,e=K)):(ta=e,e=K)):(ta=e,e=K)):(ta=e,e=K),oa[i]={nextPos:ta,result:e},e)}function d(){var e,t,r,n,a,u,i=36*ta+4,s=oa[i];return s?(ta=s.nextPos,s.result):(e=ta,t=h(),t!==G?(r=z(),r!==G?(n=v(),n!==G?(a=z(),a!==G?(u=y(),u===G&&(u=re),u!==G?(ra=e,t=ne(t,n,u),e=t):(ta=e,e=K)):(ta=e,e=K)):(ta=e,e=K)):(ta=e,e=K)):(ta=e,e=K),oa[i]={nextPos:ta,result:e},e)}function h(){var t,r,n,a=36*ta+5,u=oa[a];return u?(ta=u.nextPos,u.result):(sa++,t=ta,r=ta,e.substr(ta,2)===ue?(n=ue,ta+=2):(n=G,0===sa&&s(ie)),n===G&&(47===e.charCodeAt(ta)?(n=se,ta++):(n=G,0===sa&&s(oe)),n===G&&(e.substr(ta,3)===ce?(n=ce,ta+=3):(n=G,0===sa&&s(le)),n===G&&(e.substr(ta,2)===fe?(n=fe,ta+=2):(n=G,0===sa&&s(pe)),n===G&&(e.substr(ta,3)===de?(n=de,ta+=3):(n=G,0===sa&&s(he)),n===G&&(e.substr(ta,2)===ve?(n=ve,ta+=2):(n=G,0===sa&&s(ye)),n===G&&(e.substr(ta,4)===ge?(n=ge,ta+=4):(n=G,0===sa&&s(xe)),n===G&&(e.substr(ta,3)===be?(n=be,ta+=3):(n=G,0===sa&&s(Ae))))))))),n!==G&&(n=e.substring(r,ta)),r=n,r!==G&&(ra=t,r=me(r)),t=r,sa--,t===G&&(r=G,0===sa&&s(ae)),oa[a]={nextPos:ta,result:t},t)}function v(){var t,r,n=36*ta+6,a=oa[n];return a?(ta=a.nextPos,a.result):(t=ta,r=B(),r!==G&&(ra=t,r=Pe(r)),t=r,t===G&&(t=ta,42===e.charCodeAt(ta)?(r=Ee,ta++):(r=G,0===sa&&s(we)),r!==G&&(ra=t,r=ke()),t=r),oa[n]={nextPos:ta,result:t},t)}function y(){var t,r,n,a,u,i,o=36*ta+7,c=oa[o];return c?(ta=c.nextPos,c.result):(t=ta,91===e.charCodeAt(ta)?(r=Ce,ta++):(r=G,0===sa&&s(_e)),r!==G?(n=z(),n!==G?(a=g(),a!==G?(u=z(),u!==G?(93===e.charCodeAt(ta)?(i=je,ta++):(i=G,0===sa&&s(Ne)),i!==G?(ra=t,r=Se(a),t=r):(ta=t,t=K)):(ta=t,t=K)):(ta=t,t=K)):(ta=t,t=K)):(ta=t,t=K),oa[o]={nextPos:ta,result:t},t)}function g(){var t,r,n,a,u,i,o,c,l,f,p=36*ta+8,d=oa[p];return d?(ta=d.nextPos,d.result):(t=ta,r=x(),r!==G?(n=z(),n!==G?(e.substr(ta,2)===Te?(a=Te,ta+=2):(a=G,0===sa&&s(qe)),a!==G?(u=z(),u!==G?(i=x(),i!==G?(ra=t,r=Oe(r,i),t=r):(ta=t,t=K)):(ta=t,t=K)):(ta=t,t=K)):(ta=t,t=K)):(ta=t,t=K),t===G&&(t=ta,r=x(),r!==G?(n=z(),n!==G?(63===e.charCodeAt(ta)?(a=Le,ta++):(a=G,0===sa&&s(Be)),a!==G?(u=z(),u!==G?(i=x(),i!==G?(o=z(),o!==G?(58===e.charCodeAt(ta)?(c=Fe,ta++):(c=G,0===sa&&s(Me)),c!==G?(l=z(),l!==G?(f=x(),f!==G?(ra=t,r=Re(r,i,f),t=r):(ta=t,t=K)):(ta=t,t=K)):(ta=t,t=K)):(ta=t,t=K)):(ta=t,t=K)):(ta=t,t=K)):(ta=t,t=K)):(ta=t,t=K)):(ta=t,t=K),t===G&&(t=x())),oa[p]={nextPos:ta,result:t},t)}function x(){var t,r,n,a,u,i,o=36*ta+9,c=oa[o];return c?(ta=c.nextPos,c.result):(t=ta,r=b(),r!==G?(n=z(),n!==G?(a=ta,e.substr(ta,2)===Qe?(u=Qe,ta+=2):(u=G,0===sa&&s(Ve)),u!==G&&(u=e.substring(a,ta)),a=u,a!==G?(u=z(),u!==G?(i=x(),i!==G?(ra=t,r=ze(r,a,i),t=r):(ta=t,t=K)):(ta=t,t=K)):(ta=t,t=K)):(ta=t,t=K)):(ta=t,t=K),t===G&&(t=b()),oa[o]={nextPos:ta,result:t},t)}function b(){var t,r,n,a,u,i,o=36*ta+10,c=oa[o];return c?(ta=c.nextPos,c.result):(t=ta,r=A(),r!==G?(n=z(),n!==G?(a=ta,e.substr(ta,2)===Ue?(u=Ue,ta+=2):(u=G,0===sa&&s(Ie)),u!==G&&(u=e.substring(a,ta)),a=u,a!==G?(u=z(),u!==G?(i=b(),i!==G?(ra=t,r=ze(r,a,i),t=r):(ta=t,t=K)):(ta=t,t=K)):(ta=t,t=K)):(ta=t,t=K)):(ta=t,t=K),t===G&&(t=A()),oa[o]={nextPos:ta,result:t},t)}function A(){var t,r,n,a,u,i,o=36*ta+11,c=oa[o];return c?(ta=c.nextPos,c.result):(t=ta,r=m(),r!==G?(n=z(),n!==G?(a=ta,124===e.charCodeAt(ta)?(u=Ze,ta++):(u=G,0===sa&&s(De)),u!==G&&(u=e.substring(a,ta)),a=u,a!==G?(u=z(),u!==G?(i=A(),i!==G?(ra=t,r=$e(r,a,i),t=r):(ta=t,t=K)):(ta=t,t=K)):(ta=t,t=K)):(ta=t,t=K)):(ta=t,t=K),t===G&&(t=m()),oa[o]={nextPos:ta,result:t},t)}function m(){var t,r,n,a,u,i,o=36*ta+12,c=oa[o];return c?(ta=c.nextPos,c.result):(t=ta,r=P(),r!==G?(n=z(),n!==G?(a=ta,94===e.charCodeAt(ta)?(u=Ge,ta++):(u=G,0===sa&&s(He)),u!==G&&(u=e.substring(a,ta)),a=u,a!==G?(u=z(),u!==G?(i=m(),i!==G?(ra=t,r=$e(r,a,i),t=r):(ta=t,t=K)):(ta=t,t=K)):(ta=t,t=K)):(ta=t,t=K)):(ta=t,t=K),t===G&&(t=P()),oa[o]={nextPos:ta,result:t},t)}function P(){var t,r,n,a,u,i,o=36*ta+13,c=oa[o];return c?(ta=c.nextPos,c.result):(t=ta,r=E(),r!==G?(n=z(),n!==G?(a=ta,38===e.charCodeAt(ta)?(u=Je,ta++):(u=G,0===sa&&s(Ke)),u!==G&&(u=e.substring(a,ta)),a=u,a!==G?(u=z(),u!==G?(i=P(),i!==G?(ra=t,r=$e(r,a,i),t=r):(ta=t,t=K)):(ta=t,t=K)):(ta=t,t=K)):(ta=t,t=K)):(ta=t,t=K),t===G&&(t=E()),oa[o]={nextPos:ta,result:t},t)}function E(){var t,r,n,a,u,i,o=36*ta+14,c=oa[o];return c?(ta=c.nextPos,c.result):(t=ta,r=w(),r!==G?(n=z(),n!==G?(a=ta,e.substr(ta,2)===We?(u=We,ta+=2):(u=G,0===sa&&s(Xe)),u===G&&(e.substr(ta,2)===Ye?(u=Ye,ta+=2):(u=G,0===sa&&s(et)),u===G&&(e.substr(ta,2)===tt?(u=tt,ta+=2):(u=G,0===sa&&s(rt)),u===G&&(e.substr(ta,2)===nt?(u=nt,ta+=2):(u=G,0===sa&&s(at)),u===G&&(60===e.charCodeAt(ta)?(u=ut,ta++):(u=G,0===sa&&s(it)),u===G&&(62===e.charCodeAt(ta)?(u=st,ta++):(u=G,0===sa&&s(ot)),u===G&&(e.substr(ta,2)===ct?(u=ct,ta+=2):(u=G,0===sa&&s(lt)),u===G&&(e.substr(ta,2)===ft?(u=ft,ta+=2):(u=G,0===sa&&s(pt))))))))),u!==G&&(u=e.substring(a,ta)),a=u,a!==G?(u=z(),u!==G?(i=E(),i!==G?(ra=t,r=dt(r,a,i),t=r):(ta=t,t=K)):(ta=t,t=K)):(ta=t,t=K)):(ta=t,t=K)):(ta=t,t=K),t===G&&(t=w()),oa[o]={nextPos:ta,result:t},t)}function w(){var t,r,n,a,u,i,o=36*ta+15,c=oa[o];return c?(ta=c.nextPos,c.result):(t=ta,r=k(),r!==G?(n=z(),n!==G?(a=ta,e.substr(ta,2)===ht?(u=ht,ta+=2):(u=G,0===sa&&s(vt)),u===G&&(e.substr(ta,2)===yt?(u=yt,ta+=2):(u=G,0===sa&&s(gt))),u!==G&&(u=e.substring(a,ta)),a=u,a!==G?(u=z(),u!==G?(i=w(),i!==G?(ra=t,r=$e(r,a,i),t=r):(ta=t,t=K)):(ta=t,t=K)):(ta=t,t=K)):(ta=t,t=K)):(ta=t,t=K),t===G&&(t=k()),oa[o]={nextPos:ta,result:t},t)}function k(){var t,r,n,a,u,i,o=36*ta+16,c=oa[o];return c?(ta=c.nextPos,c.result):(t=ta,r=C(),r!==G?(n=z(),n!==G?(a=ta,43===e.charCodeAt(ta)?(u=xt,ta++):(u=G,0===sa&&s(bt)),u===G&&(45===e.charCodeAt(ta)?(u=At,ta++):(u=G,0===sa&&s(mt))),u!==G&&(u=e.substring(a,ta)),a=u,a!==G?(u=z(),u!==G?(i=k(),i!==G?(ra=t,r=Pt(r,a,i),t=r):(ta=t,t=K)):(ta=t,t=K)):(ta=t,t=K)):(ta=t,t=K)):(ta=t,t=K),t===G&&(t=C()),oa[o]={nextPos:ta,result:t},t)}function C(){var t,r,n,a,u,i,o=36*ta+17,c=oa[o];return c?(ta=c.nextPos,c.result):(t=ta,r=_(),r!==G?(n=z(),n!==G?(a=ta,e.substr(ta,2)===Et?(u=Et,ta+=2):(u=G,0===sa&&s(wt)),u===G&&(42===e.charCodeAt(ta)?(u=Ee,ta++):(u=G,0===sa&&s(we)),u===G&&(47===e.charCodeAt(ta)?(u=se,ta++):(u=G,0===sa&&s(oe)),u===G&&(37===e.charCodeAt(ta)?(u=kt,ta++):(u=G,0===sa&&s(Ct))))),u!==G&&(u=e.substring(a,ta)),a=u,a!==G?(u=z(),u!==G?(i=C(),i!==G?(ra=t,r=Pt(r,a,i),t=r):(ta=t,t=K)):(ta=t,t=K)):(ta=t,t=K)):(ta=t,t=K)):(ta=t,t=K),t===G&&(t=_()),oa[o]={nextPos:ta,result:t},t)}function _(){var t,r,n,a=36*ta+18,u=oa[a];return u?(ta=u.nextPos,u.result):(t=ta,r=ta,33===e.charCodeAt(ta)?(n=_t,ta++):(n=G,0===sa&&s(jt)),n===G&&(126===e.charCodeAt(ta)?(n=Nt,ta++):(n=G,0===sa&&s(St))),n!==G&&(n=e.substring(r,ta)),r=n,r!==G?(n=j(),n!==G?(ra=t,r=Tt(r,n),t=r):(ta=t,t=K)):(ta=t,t=K),t===G&&(t=j()),oa[a]={nextPos:ta,result:t},t)}function j(){var e,t=36*ta+19,r=oa[t];return r?(ta=r.nextPos,r.result):(e=N(),e===G&&(e=T(),e===G&&(e=q(),e===G&&(e=O(),e===G&&(e=L(),e===G&&(e=f()))))),oa[t]={nextPos:ta,result:e},e)}function N(){var t,r,n,a,u,i,o,c,l=36*ta+20,f=oa[l];return f?(ta=f.nextPos,f.result):(t=ta,r=B(),r!==G?(n=z(),n!==G?(40===e.charCodeAt(ta)?(a=qt,ta++):(a=G,0===sa&&s(Ot)),a!==G?(u=z(),u!==G?(i=S(),i===G&&(i=re),i!==G?(o=z(),o!==G?(41===e.charCodeAt(ta)?(c=Lt,ta++):(c=G,0===sa&&s(Bt)),c!==G?(ra=t,r=Ft(r,i),t=r):(ta=t,t=K)):(ta=t,t=K)):(ta=t,t=K)):(ta=t,t=K)):(ta=t,t=K)):(ta=t,t=K)):(ta=t,t=K),oa[l]={nextPos:ta,result:t},t)}function S(){var t,r,n,a,u,i,o,c,l=36*ta+21,f=oa[l];if(f)return ta=f.nextPos,f.result;if(t=ta,r=g(),r!==G){for(n=[],a=ta,u=z(),u!==G?(44===e.charCodeAt(ta)?(i=X,ta++):(i=G,0===sa&&s(Y)),i!==G?(o=z(),o!==G?(c=g(),c!==G?(u=[u,i,o,c],a=u):(ta=a,a=K)):(ta=a,a=K)):(ta=a,a=K)):(ta=a,a=K);a!==G;)n.push(a),a=ta,u=z(),u!==G?(44===e.charCodeAt(ta)?(i=X,ta++):(i=G,0===sa&&s(Y)),i!==G?(o=z(),o!==G?(c=g(),c!==G?(u=[u,i,o,c],a=u):(ta=a,a=K)):(ta=a,a=K)):(ta=a,a=K)):(ta=a,a=K);n!==G?(ra=t,r=Mt(r,n),t=r):(ta=t,t=K)}else ta=t,t=K;return oa[l]={nextPos:ta,result:t},t}function T(){var t,r,n,a=36*ta+22,u=oa[a];return u?(ta=u.nextPos,u.result):(sa++,t=ta,64===e.charCodeAt(ta)?(r=Qt,ta++):(r=G,0===sa&&s(Vt)),r!==G?(n=B(),n!==G?(ra=t,r=zt(n),t=r):(ta=t,t=K)):(ta=t,t=K),sa--,t===G&&(r=G,0===sa&&s(Rt)),oa[a]={nextPos:ta,result:t},t)}function q(){var t,r,n,a,u,i,o=36*ta+23,c=oa[o];return c?(ta=c.nextPos,c.result):(sa++,t=ta,123===e.charCodeAt(ta)?(r=It,ta++):(r=G,0===sa&&s(Zt)),r!==G?(n=z(),n!==G?(a=B(),a!==G?(u=z(),u!==G?(125===e.charCodeAt(ta)?(i=Dt,ta++):(i=G,0===sa&&s($t)),i!==G?(ra=t,r=Gt(a),t=r):(ta=t,t=K)):(ta=t,t=K)):(ta=t,t=K)):(ta=t,t=K)):(ta=t,t=K),sa--,t===G&&(r=G,0===sa&&s(Ut)),oa[o]={nextPos:ta,result:t},t)}function O(){var e,t=36*ta+24,r=oa[t];return r?(ta=r.nextPos,r.result):(e=F(),e===G&&(e=R(),e===G&&(e=Q(),e===G&&(e=V()))),oa[t]={nextPos:ta,result:e},e)}function L(){var t,r,n,a,u,i,o=36*ta+25,c=oa[o];return c?(ta=c.nextPos,c.result):(t=ta,40===e.charCodeAt(ta)?(r=qt,ta++):(r=G,0===sa&&s(Ot)),r!==G?(n=z(),n!==G?(a=g(),a!==G?(u=z(),u!==G?(41===e.charCodeAt(ta)?(i=Lt,ta++):(i=G,0===sa&&s(Bt)),i!==G?(ra=t,r=Ht(a),t=r):(ta=t,t=K)):(ta=t,t=K)):(ta=t,t=K)):(ta=t,t=K)):(ta=t,t=K),oa[o]={nextPos:ta,result:t},t)}function B(){var t,r,n,a,u,i,o,c=36*ta+26,l=oa[c];if(l)return ta=l.nextPos,l.result;if(sa++,t=ta,r=ta,n=ta,a=ta,sa++,u=V(),sa--,u===G?a=Kt:(ta=a,a=K),a!==G)if(Wt.test(e.charAt(ta))?(u=e.charAt(ta),ta++):(u=G,0===sa&&s(Xt)),u!==G){for(i=[],Yt.test(e.charAt(ta))?(o=e.charAt(ta),ta++):(o=G,0===sa&&s(er));o!==G;)i.push(o),Yt.test(e.charAt(ta))?(o=e.charAt(ta),ta++):(o=G,0===sa&&s(er));i!==G?(a=[a,u,i],n=a):(ta=n,n=K)}else ta=n,n=K;else ta=n,n=K;return n!==G&&(n=e.substring(r,ta)),r=n,r!==G&&(ra=t,r=tr(r)),t=r,sa--,t===G&&(r=G,0===sa&&s(Jt)),oa[c]={nextPos:ta,result:t},t}function F(){var t,r,n,a,u,i=36*ta+27,o=oa[i];if(o)return ta=o.nextPos,o.result;if(sa++,t=ta,34===e.charCodeAt(ta)?(r=nr,ta++):(r=G,0===sa&&s(ar)),r!==G){for(n=[],a=M(),a===G&&(ur.test(e.charAt(ta))?(a=e.charAt(ta),ta++):(a=G,0===sa&&s(ir)));a!==G;)n.push(a),a=M(),a===G&&(ur.test(e.charAt(ta))?(a=e.charAt(ta),ta++):(a=G,0===sa&&s(ir)));n!==G?(34===e.charCodeAt(ta)?(a=nr,ta++):(a=G,0===sa&&s(ar)),a!==G?(ra=t,r=sr(n),t=r):(ta=t,t=K)):(ta=t,t=K)}else ta=t,t=K;if(t===G)if(t=ta,39===e.charCodeAt(ta)?(r=or,ta++):(r=G,0===sa&&s(cr)),r!==G){for(n=ta,a=[],e.substr(ta,2)===lr?(u=lr,ta+=2):(u=G,0===sa&&s(fr)),u===G&&(pr.test(e.charAt(ta))?(u=e.charAt(ta),ta++):(u=G,0===sa&&s(dr)));u!==G;)a.push(u),e.substr(ta,2)===lr?(u=lr,ta+=2):(u=G,0===sa&&s(fr)),u===G&&(pr.test(e.charAt(ta))?(u=e.charAt(ta),ta++):(u=G,0===sa&&s(dr)));a!==G&&(a=e.substring(n,ta)),n=a,n!==G?(39===e.charCodeAt(ta)?(a=or,ta++):(a=G,0===sa&&s(cr)),a!==G?(ra=t,r=hr(n),t=r):(ta=t,t=K)):(ta=t,t=K)}else ta=t,t=K;return sa--,t===G&&(r=G,0===sa&&s(rr)),oa[i]={nextPos:ta,result:t},t}function M(){var t,r,n,a,u,i,o,c,l=36*ta+28,f=oa[l];return f?(ta=f.nextPos,f.result):(sa++,t=ta,e.substr(ta,2)===yr?(r=yr,ta+=2):(r=G,0===sa&&s(gr)),r!==G&&(ra=t,r=xr()),t=r,t===G&&(t=ta,e.substr(ta,2)===br?(r=br,ta+=2):(r=G,0===sa&&s(Ar)),r!==G&&(ra=t,r=mr()),t=r,t===G&&(t=ta,39===e.charCodeAt(ta)?(r=or,ta++):(r=G,0===sa&&s(cr)),r!==G&&(ra=t,r=Pr()),t=r,t===G&&(t=ta,e.substr(ta,2)===Er?(r=Er,ta+=2):(r=G,0===sa&&s(wr)),r!==G&&(ra=t,r=kr()),t=r,t===G&&(t=ta,e.substr(ta,2)===Cr?(r=Cr,ta+=2):(r=G,0===sa&&s(_r)),r!==G&&(ra=t,r=jr()),t=r,t===G&&(t=ta,e.substr(ta,2)===Nr?(r=Nr,ta+=2):(r=G,0===sa&&s(Sr)),r!==G&&(ra=t,r=Tr()),t=r,t===G&&(t=ta,e.substr(ta,2)===qr?(r=qr,ta+=2):(r=G,0===sa&&s(Or)),r!==G&&(ra=t,r=Lr()),t=r,t===G&&(t=ta,e.substr(ta,2)===Br?(r=Br,ta+=2):(r=G,0===sa&&s(Fr)),r!==G&&(ra=t,r=Mr()),t=r,t===G&&(t=ta,e.substr(ta,2)===Rr?(r=Rr,
ta+=2):(r=G,0===sa&&s(Qr)),r!==G&&(ra=t,r=Vr()),t=r,t===G&&(t=ta,e.substr(ta,2)===zr?(r=zr,ta+=2):(r=G,0===sa&&s(Ur)),r!==G&&(ra=t,r=Ir()),t=r,t===G&&(t=ta,e.substr(ta,2)===Zr?(r=Zr,ta+=2):(r=G,0===sa&&s(Dr)),r!==G?(n=ta,a=ta,$r.test(e.charAt(ta))?(u=e.charAt(ta),ta++):(u=G,0===sa&&s(Gr)),u!==G?($r.test(e.charAt(ta))?(i=e.charAt(ta),ta++):(i=G,0===sa&&s(Gr)),i!==G?(u=[u,i],a=u):(ta=a,a=K)):(ta=a,a=K),a!==G&&(a=e.substring(n,ta)),n=a,n!==G?(ra=t,r=Hr(n),t=r):(ta=t,t=K)):(ta=t,t=K),t===G&&(t=ta,e.substr(ta,2)===Jr?(r=Jr,ta+=2):(r=G,0===sa&&s(Kr)),r!==G?(n=ta,a=ta,$r.test(e.charAt(ta))?(u=e.charAt(ta),ta++):(u=G,0===sa&&s(Gr)),u!==G?($r.test(e.charAt(ta))?(i=e.charAt(ta),ta++):(i=G,0===sa&&s(Gr)),i!==G?($r.test(e.charAt(ta))?(o=e.charAt(ta),ta++):(o=G,0===sa&&s(Gr)),o!==G?($r.test(e.charAt(ta))?(c=e.charAt(ta),ta++):(c=G,0===sa&&s(Gr)),c!==G?(u=[u,i,o,c],a=u):(ta=a,a=K)):(ta=a,a=K)):(ta=a,a=K)):(ta=a,a=K),a!==G&&(a=e.substring(n,ta)),n=a,n!==G?(ra=t,r=Hr(n),t=r):(ta=t,t=K)):(ta=t,t=K)))))))))))),sa--,t===G&&(r=G,0===sa&&s(vr)),oa[l]={nextPos:ta,result:t},t)}function R(){var t,r,n,a,u,i=36*ta+29,o=oa[i];if(o)return ta=o.nextPos,o.result;if(sa++,t=ta,47===e.charCodeAt(ta)?(r=se,ta++):(r=G,0===sa&&s(oe)),r!==G){for(n=ta,a=[],e.substr(ta,2)===Xr?(u=Xr,ta+=2):(u=G,0===sa&&s(Yr)),u===G&&(en.test(e.charAt(ta))?(u=e.charAt(ta),ta++):(u=G,0===sa&&s(tn)));u!==G;)a.push(u),e.substr(ta,2)===Xr?(u=Xr,ta+=2):(u=G,0===sa&&s(Yr)),u===G&&(en.test(e.charAt(ta))?(u=e.charAt(ta),ta++):(u=G,0===sa&&s(tn)));a!==G&&(a=e.substring(n,ta)),n=a,n!==G?(47===e.charCodeAt(ta)?(a=se,ta++):(a=G,0===sa&&s(oe)),a!==G?(ra=t,r=rn(n),t=r):(ta=t,t=K)):(ta=t,t=K)}else ta=t,t=K;return sa--,t===G&&(r=G,0===sa&&s(Wr)),oa[i]={nextPos:ta,result:t},t}function Q(){var t,r,n,a,u,i,o,c,l,f,p,d,h=36*ta+30,v=oa[h];if(v)return ta=v.nextPos,v.result;if(sa++,t=ta,r=ta,an.test(e.charAt(ta))?(n=e.charAt(ta),ta++):(n=G,0===sa&&s(un)),n===G&&(n=re),n!==G&&(n=e.substring(r,ta)),r=n,r!==G)if(e.substr(ta,2)===sn?(n=sn,ta+=2):(n=G,0===sa&&s(on)),n!==G){if(a=ta,u=[],cn.test(e.charAt(ta))?(i=e.charAt(ta),ta++):(i=G,0===sa&&s(ln)),i!==G)for(;i!==G;)u.push(i),cn.test(e.charAt(ta))?(i=e.charAt(ta),ta++):(i=G,0===sa&&s(ln));else u=K;u!==G&&(u=e.substring(a,ta)),a=u,a!==G?(ra=t,r=fn(r,a),t=r):(ta=t,t=K)}else ta=t,t=K;else ta=t,t=K;if(t===G){if(t=ta,r=ta,an.test(e.charAt(ta))?(n=e.charAt(ta),ta++):(n=G,0===sa&&s(un)),n===G&&(n=re),n!==G&&(n=e.substring(r,ta)),r=n,r!==G)if(e.substr(ta,2)===pn?(n=pn,ta+=2):(n=G,0===sa&&s(dn)),n!==G){if(a=ta,u=[],hn.test(e.charAt(ta))?(i=e.charAt(ta),ta++):(i=G,0===sa&&s(vn)),i!==G)for(;i!==G;)u.push(i),hn.test(e.charAt(ta))?(i=e.charAt(ta),ta++):(i=G,0===sa&&s(vn));else u=K;u!==G&&(u=e.substring(a,ta)),a=u,a!==G?(ra=t,r=yn(r,a),t=r):(ta=t,t=K)}else ta=t,t=K;else ta=t,t=K;if(t===G){if(t=ta,r=ta,an.test(e.charAt(ta))?(n=e.charAt(ta),ta++):(n=G,0===sa&&s(un)),n===G&&(n=re),n!==G&&(n=e.substring(r,ta)),r=n,r!==G)if(e.substr(ta,2)===gn?(n=gn,ta+=2):(n=G,0===sa&&s(xn)),n!==G){if(a=ta,u=[],$r.test(e.charAt(ta))?(i=e.charAt(ta),ta++):(i=G,0===sa&&s(Gr)),i!==G)for(;i!==G;)u.push(i),$r.test(e.charAt(ta))?(i=e.charAt(ta),ta++):(i=G,0===sa&&s(Gr));else u=K;u!==G&&(u=e.substring(a,ta)),a=u,a!==G?(ra=t,r=bn(r,a),t=r):(ta=t,t=K)}else ta=t,t=K;else ta=t,t=K;if(t===G){if(t=ta,r=ta,n=ta,an.test(e.charAt(ta))?(a=e.charAt(ta),ta++):(a=G,0===sa&&s(un)),a===G&&(a=re),a!==G){for(u=[],An.test(e.charAt(ta))?(i=e.charAt(ta),ta++):(i=G,0===sa&&s(mn));i!==G;)u.push(i),An.test(e.charAt(ta))?(i=e.charAt(ta),ta++):(i=G,0===sa&&s(mn));if(u!==G)if(46===e.charCodeAt(ta)?(i=Pn,ta++):(i=G,0===sa&&s(En)),i!==G){if(o=[],An.test(e.charAt(ta))?(c=e.charAt(ta),ta++):(c=G,0===sa&&s(mn)),c!==G)for(;c!==G;)o.push(c),An.test(e.charAt(ta))?(c=e.charAt(ta),ta++):(c=G,0===sa&&s(mn));else o=K;if(o!==G){if(c=ta,wn.test(e.charAt(ta))?(l=e.charAt(ta),ta++):(l=G,0===sa&&s(kn)),l!==G)if(an.test(e.charAt(ta))?(f=e.charAt(ta),ta++):(f=G,0===sa&&s(un)),f===G&&(f=re),f!==G){if(p=[],An.test(e.charAt(ta))?(d=e.charAt(ta),ta++):(d=G,0===sa&&s(mn)),d!==G)for(;d!==G;)p.push(d),An.test(e.charAt(ta))?(d=e.charAt(ta),ta++):(d=G,0===sa&&s(mn));else p=K;p!==G?(l=[l,f,p],c=l):(ta=c,c=K)}else ta=c,c=K;else ta=c,c=K;c===G&&(c=re),c!==G?(a=[a,u,i,o,c],n=a):(ta=n,n=K)}else ta=n,n=K}else ta=n,n=K;else ta=n,n=K}else ta=n,n=K;if(n!==G&&(n=e.substring(r,ta)),r=n,r!==G&&(ra=t,r=Cn(r)),t=r,t===G){if(t=ta,r=ta,n=ta,an.test(e.charAt(ta))?(a=e.charAt(ta),ta++):(a=G,0===sa&&s(un)),a===G&&(a=re),a!==G){if(u=[],An.test(e.charAt(ta))?(i=e.charAt(ta),ta++):(i=G,0===sa&&s(mn)),i!==G)for(;i!==G;)u.push(i),An.test(e.charAt(ta))?(i=e.charAt(ta),ta++):(i=G,0===sa&&s(mn));else u=K;u!==G?(a=[a,u],n=a):(ta=n,n=K)}else ta=n,n=K;n!==G&&(n=e.substring(r,ta)),r=n,r!==G&&(ra=t,r=_n(r)),t=r}}}}return sa--,t===G&&(r=G,0===sa&&s(nn)),oa[h]={nextPos:ta,result:t},t}function V(){var t,r,n=36*ta+31,a=oa[n];return a?(ta=a.nextPos,a.result):(sa++,t=ta,e.substr(ta,4)===Nn?(r=Nn,ta+=4):(r=G,0===sa&&s(Sn)),r!==G&&(ra=t,r=Tn()),t=r,t===G&&(t=ta,e.substr(ta,5)===qn?(r=qn,ta+=5):(r=G,0===sa&&s(On)),r!==G&&(ra=t,r=Ln()),t=r,t===G&&(t=ta,e.substr(ta,4)===Bn?(r=Bn,ta+=4):(r=G,0===sa&&s(Fn)),r!==G&&(ra=t,r=Mn()),t=r,t===G&&(t=ta,e.substr(ta,3)===Rn?(r=Rn,ta+=3):(r=G,0===sa&&s(Qn)),r!==G&&(ra=t,r=Vn()),t=r,t===G&&(t=ta,e.substr(ta,9)===zn?(r=zn,ta+=9):(r=G,0===sa&&s(Un)),r!==G&&(ra=t,r=In()),t=r)))),sa--,t===G&&(r=G,0===sa&&s(jn)),oa[n]={nextPos:ta,result:t},t)}function z(){var e,t,r=36*ta+32,n=oa[r];if(n)return ta=n.nextPos,n.result;for(sa++,e=[],t=U(),t===G&&(t=I());t!==G;)e.push(t),t=U(),t===G&&(t=I());return sa--,e===G&&(t=G,0===sa&&s(Zn)),oa[r]={nextPos:ta,result:e},e}function U(){var t,r,n,a,u,i,o=36*ta+33,c=oa[o];if(c)return ta=c.nextPos,c.result;if(sa++,t=ta,e.substr(ta,2)===$n?(r=$n,ta+=2):(r=G,0===sa&&s(Gn)),r!==G){for(n=[],a=ta,u=ta,sa++,e.substr(ta,2)===Hn?(i=Hn,ta+=2):(i=G,0===sa&&s(Jn)),sa--,i===G?u=Kt:(ta=u,u=K),u!==G?(e.length>ta?(i=e.charAt(ta),ta++):(i=G,0===sa&&s(Kn)),i!==G?(u=[u,i],a=u):(ta=a,a=K)):(ta=a,a=K);a!==G;)n.push(a),a=ta,u=ta,sa++,e.substr(ta,2)===Hn?(i=Hn,ta+=2):(i=G,0===sa&&s(Jn)),sa--,i===G?u=Kt:(ta=u,u=K),u!==G?(e.length>ta?(i=e.charAt(ta),ta++):(i=G,0===sa&&s(Kn)),i!==G?(u=[u,i],a=u):(ta=a,a=K)):(ta=a,a=K);n!==G?(e.substr(ta,2)===Hn?(a=Hn,ta+=2):(a=G,0===sa&&s(Jn)),a!==G?(r=[r,n,a],t=r):(ta=t,t=K)):(ta=t,t=K)}else ta=t,t=K;return sa--,t===G&&(r=G,0===sa&&s(Dn)),oa[o]={nextPos:ta,result:t},t}function I(){var t,r,n=36*ta+34,a=oa[n];if(a)return ta=a.nextPos,a.result;if(sa++,t=[],Xn.test(e.charAt(ta))?(r=e.charAt(ta),ta++):(r=G,0===sa&&s(Yn)),r!==G)for(;r!==G;)t.push(r),Xn.test(e.charAt(ta))?(r=e.charAt(ta),ta++):(r=G,0===sa&&s(Yn));else t=K;return sa--,t===G&&(r=G,0===sa&&s(Wn)),oa[n]={nextPos:ta,result:t},t}function Z(){var t,r,n=36*ta+35,a=oa[n];return a?(ta=a.nextPos,a.result):(sa++,t=ta,sa++,e.length>ta?(r=e.charAt(ta),ta++):(r=G,0===sa&&s(Kn)),sa--,r===G?t=Kt:(ta=t,t=K),sa--,t===G&&(r=G,0===sa&&s(ea)),oa[n]={nextPos:ta,result:t},t)}var D,$=arguments.length>1?arguments[1]:{},G={},H={query:c},J=c,K=G,W=function(e){return e},X=",",Y={type:"literal",value:",",description:'","'},ee=function(e,t){return la("Query").add(ca(e,t,3))},te=function(e,t){return la("Path").add(ca(e,t,1))},re=null,ne=function(e,t,r){return la("Step").add(e,t,r)},ae={type:"other",description:"axis"},ue="//",ie={type:"literal",value:"//",description:'"//"'},se="/",oe={type:"literal",value:"/",description:'"/"'},ce="+//",le={type:"literal",value:"+//",description:'"+//"'},fe="+/",pe={type:"literal",value:"+/",description:'"+/"'},de="-//",he={type:"literal",value:"-//",description:'"-//"'},ve="-/",ye={type:"literal",value:"-/",description:'"-/"'},ge="..//",xe={type:"literal",value:"..//",description:'"..//"'},be="../",Ae={type:"literal",value:"../",description:'"../"'},me=function(e){return la("Axis").set({op:e})},Pe=function(e){return la("Match").merge(e)},Ee="*",we={type:"literal",value:"*",description:'"*"'},ke=function(){return la("Match").set({id:"*"})},Ce="[",_e={type:"literal",value:"[",description:'"["'},je="]",Ne={type:"literal",value:"]",description:'"]"'},Se=function(e){return la("Filter").add(e)},Te="?:",qe={type:"literal",value:"?:",description:'"?:"'},Oe=function(e,t){return la("ConditionalBinary").add(e,t)},Le="?",Be={type:"literal",value:"?",description:'"?"'},Fe=":",Me={type:"literal",value:":",description:'":"'},Re=function(e,t,r){return la("ConditionalTernary").add(e,t,r)},Qe="||",Ve={type:"literal",value:"||",description:'"||"'},ze=function(e,t,r){return la("Logical").set({op:t}).add(e,r)},Ue="&&",Ie={type:"literal",value:"&&",description:'"&&"'},Ze="|",De={type:"literal",value:"|",description:'"|"'},$e=function(e,t,r){return la("Bitwise").set({op:t}).add(e,r)},Ge="^",He={type:"literal",value:"^",description:'"^"'},Je="&",Ke={type:"literal",value:"&",description:'"&"'},We="==",Xe={type:"literal",value:"==",description:'"=="'},Ye="!=",et={type:"literal",value:"!=",description:'"!="'},tt="<=",rt={type:"literal",value:"<=",description:'"<="'},nt=">=",at={type:"literal",value:">=",description:'">="'},ut="<",it={type:"literal",value:"<",description:'"<"'},st=">",ot={type:"literal",value:">",description:'">"'},ct="=~",lt={type:"literal",value:"=~",description:'"=~"'},ft="!~",pt={type:"literal",value:"!~",description:'"!~"'},dt=function(e,t,r){return la("Relational").set({op:t}).add(e,r)},ht="<<",vt={type:"literal",value:"<<",description:'"<<"'},yt=">>",gt={type:"literal",value:">>",description:'">>"'},xt="+",bt={type:"literal",value:"+",description:'"+"'},At="-",mt={type:"literal",value:"-",description:'"-"'},Pt=function(e,t,r){return la("Arithmetical").set({op:t}).add(e,r)},Et="**",wt={type:"literal",value:"**",description:'"**"'},kt="%",Ct={type:"literal",value:"%",description:'"%"'},_t="!",jt={type:"literal",value:"!",description:'"!"'},Nt="~",St={type:"literal",value:"~",description:'"~"'},Tt=function(e,t){return la("Unary").set({op:e}).add(t)},qt="(",Ot={type:"literal",value:"(",description:'"("'},Lt=")",Bt={type:"literal",value:")",description:'")"'},Ft=function(e,t){return la("FuncCall").merge(e).add(t)},Mt=function(e,t){return ca(e,t,3)},Rt={type:"other",description:"node attribute"},Qt="@",Vt={type:"literal",value:"@",description:'"@"'},zt=function(e){return la("Attribute").merge(e)},Ut={type:"other",description:"query parameter reference"},It="{",Zt={type:"literal",value:"{",description:'"{"'},Dt="}",$t={type:"literal",value:"}",description:'"}"'},Gt=function(e){return la("Param").merge(e)},Ht=function(e){return e},Jt={type:"other",description:"identifier"},Kt=void 0,Wt=/^[a-zA-Z_]/,Xt={type:"class",value:"[a-zA-Z_]",description:"[a-zA-Z_]"},Yt=/^[a-zA-Z0-9_\-]/,er={type:"class",value:"[a-zA-Z0-9_\\-]",description:"[a-zA-Z0-9_\\-]"},tr=function(e){return la("Identifier").set({id:e})},rr={type:"other",description:"quoted string literal"},nr='"',ar={type:"literal",value:'"',description:'"\\""'},ur=/^[^"]/,ir={type:"class",value:'[^"]',description:'[^"]'},sr=function(e){return la("LiteralString").set({value:e.join("")})},or="'",cr={type:"literal",value:"'",description:'"\'"'},lr="\\'",fr={type:"literal",value:"\\'",description:'"\\\\\'"'},pr=/^[^']/,dr={type:"class",value:"[^']",description:"[^']"},hr=function(e){return la("LiteralString").set({value:e.replace(/\\'/g,"'")})},vr={type:"other",description:"escaped string character"},yr="\\\\",gr={type:"literal",value:"\\\\",description:'"\\\\\\\\"'},xr=function(){return"\\"},br='\\"',Ar={type:"literal",value:'\\"',description:'"\\\\\\""'},mr=function(){return'"'},Pr=function(){return"'"},Er="\\b",wr={type:"literal",value:"\\b",description:'"\\\\b"'},kr=function(){return"\b"},Cr="\\v",_r={type:"literal",value:"\\v",description:'"\\\\v"'},jr=function(){return""},Nr="\\f",Sr={type:"literal",value:"\\f",description:'"\\\\f"'},Tr=function(){return"\f"},qr="\\t",Or={type:"literal",value:"\\t",description:'"\\\\t"'},Lr=function(){return"	"},Br="\\r",Fr={type:"literal",value:"\\r",description:'"\\\\r"'},Mr=function(){return"\r"},Rr="\\n",Qr={type:"literal",value:"\\n",description:'"\\\\n"'},Vr=function(){return"\n"},zr="\\e",Ur={type:"literal",value:"\\e",description:'"\\\\e"'},Ir=function(){return""},Zr="\\x",Dr={type:"literal",value:"\\x",description:'"\\\\x"'},$r=/^[0-9a-fA-F]/,Gr={type:"class",value:"[0-9a-fA-F]",description:"[0-9a-fA-F]"},Hr=function(e){return String.fromCharCode(parseInt(e,16))},Jr="\\u",Kr={type:"literal",value:"\\u",description:'"\\\\u"'},Wr={type:"other",description:"regular expression literal"},Xr="\\/",Yr={type:"literal",value:"\\/",description:'"\\\\/"'},en=/^[^\/]/,tn={type:"class",value:"[^\\/]",description:"[^\\/]"},rn=function(e){var t;try{t=new RegExp(e.replace(/\\\//g,"/"))}catch(r){u(r.message)}return la("LiteralRegExp").set({value:t})},nn={type:"other",description:"numeric literal"},an=/^[+\-]/,un={type:"class",value:"[+\\-]",description:"[+\\-]"},sn="0b",on={type:"literal",value:"0b",description:'"0b"'},cn=/^[01]/,ln={type:"class",value:"[01]",description:"[01]"},fn=function(e,t){return la("LiteralNumber").set({value:parseInt(e+t,2)})},pn="0o",dn={type:"literal",value:"0o",description:'"0o"'},hn=/^[0-7]/,vn={type:"class",value:"[0-7]",description:"[0-7]"},yn=function(e,t){return la("LiteralNumber").set({value:parseInt(e+t,8)})},gn="0x",xn={type:"literal",value:"0x",description:'"0x"'},bn=function(e,t){return la("LiteralNumber").set({value:parseInt(e+t,16)})},An=/^[0-9]/,mn={type:"class",value:"[0-9]",description:"[0-9]"},Pn=".",En={type:"literal",value:".",description:'"."'},wn=/^[eE]/,kn={type:"class",value:"[eE]",description:"[eE]"},Cn=function(e){return la("LiteralNumber").set({value:parseFloat(e)})},_n=function(e){return la("LiteralNumber").set({value:parseInt(e,10)})},jn={type:"other",description:"global value"},Nn="true",Sn={type:"literal",value:"true",description:'"true"'},Tn=function(){return la("LiteralValue").set({value:!0})},qn="false",On={type:"literal",value:"false",description:'"false"'},Ln=function(){return la("LiteralValue").set({value:!1})},Bn="null",Fn={type:"literal",value:"null",description:'"null"'},Mn=function(){return la("LiteralValue").set({value:null})},Rn="NaN",Qn={type:"literal",value:"NaN",description:'"NaN"'},Vn=function(){return la("LiteralValue").set({value:0/0})},zn="undefined",Un={type:"literal",value:"undefined",description:'"undefined"'},In=function(){return la("LiteralValue").set({value:void 0})},Zn={type:"other",description:"optional blank"},Dn={type:"other",description:"multi-line comment"},$n="/*",Gn={type:"literal",value:"/*",description:'"/*"'},Hn="*/",Jn={type:"literal",value:"*/",description:'"*/"'},Kn={type:"any",description:"any character"},Wn={type:"other",description:"any whitespaces"},Xn=/^[ \t\r\n]/,Yn={type:"class",value:"[ \\t\\r\\n]",description:"[ \\t\\r\\n]"},ea={type:"other",description:"end of file"},ta=0,ra=0,na=0,aa={line:1,column:1,seenCR:!1},ua=0,ia=[],sa=0,oa={};if("startRule"in $){if(!($.startRule in H))throw new Error("Can't start parsing from rule \""+$.startRule+'".');J=H[$.startRule]}var ca=$.util.makeUnroll(n,a,r,t),la=$.util.makeAST(n,a,r,$);if(D=J(),D!==G&&ta===e.length)return D;throw D!==G&&ta<e.length&&s({type:"end",description:"end of input"}),o(null,ia,ua)}return e(t,Error),{SyntaxError:t,parse:r}}(),f=function(){function e(t){a(this,e),this.asty=new o,this.ast=null,t&&this.compile(t)}return u(e,[{key:"compile",value:function(e,t){var r=this;t&&console.log("ASTQ: compile: +-------------------------------------------------------------------------------------------------------\nASTQ: compile: | "+e);var n=c.parse(l,e,{startRule:"query",makeAST:function(e,t,n,a){return r.asty.create.apply(r.asty,a).pos(e,t,n)}});if(null!==n.error)throw new Error("ASTQ: compile: query parsing failed:\n"+c.errorMessage(n.error,!0).replace(/^/gm,"ERROR: "));return this.ast=n.ast,t&&console.log("ASTQ: compile: +-------------------------------------------------------------------------------------------------------\n"+this.dump().replace(/\n$/,"").replace(/^/gm,"ASTQ: compile: | ")),this}},{key:"dump",value:function(){return this.ast.dump()}},{key:"execute",value:function(e,t,r,n,a){a&&console.log("ASTQ: execute: +--------------------------------------------------------------+----------------------------------------");var u=new s["default"](t,r,n,a);return u.execQuery(this.ast,e)}}]),e}();r["default"]=f,t.exports=r["default"]},{"./astq-query-exec.js":7,asty:"asty","pegjs-util":"pegjs-util"}],10:[function(e,t,r){"use strict";var n=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();Object.defineProperty(r,"__esModule",{value:!0});var u=function(){function e(){n(this,e)}return a(e,null,[{key:"pad",value:function t(e,r){var n=0>r?-r:r;if(e.length>n)e=e.substr(0,n);else{var t=Array(n+1-e.length).join(" ");e=0>r?e+t:t+e}return e}},{key:"truthy",value:function(e){var t=void 0;switch(typeof e){case"boolean":t=e;break;case"number":t=0!==e&&!isNaN(e);break;case"string":t=""!==e;break;case"object":t=!1,null!==e&&(t=!0,e instanceof Array&&(t=e.length>0));break;default:t=!1}return t}},{key:"coerce",value:function(e,t){if(typeof e!==t)try{switch(t){case"boolean":e=Boolean(e);break;case"number":e=Number(e);break;case"string":e=String(e);break;case"regexp":e=new RegExp(e)}}catch(r){throw new Error("cannot coerce value into type "+t)}return e}}]),e}();r["default"]=u,t.exports=r["default"]},{}],11:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={major:1,minor:3,micro:0,date:20150405};r["default"]=n,t.exports=r["default"]},{}],12:[function(e,t,r){"use strict";var n=function(e){return e&&e.__esModule?e:{"default":e}},a=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();Object.defineProperty(r,"__esModule",{value:!0});var i=e("./astq-adapter.js"),s=n(i),o=e("./astq-adapter-asty.js"),c=n(o),l=e("./astq-adapter-mozast.js"),f=n(l),p=e("./astq-adapter-xmldom.js"),d=n(p),h=e("./astq-funcs.js"),v=n(h),y=e("./astq-funcs-std.js"),g=n(y),x=e("./astq-query.js"),b=n(x),A=e("./astq-version.js"),m=n(A),P=e("cache-lru"),E=function(){function e(){a(this,e),this._adapter=new s["default"],this._adapter.register(f["default"]),this._adapter.register(d["default"]),this._adapter.register(c["default"]),this._funcs=new v["default"];for(var t in g["default"])this.func(t,g["default"][t]);this._cache=new P}return u(e,[{key:"version",value:function(){return m["default"]}},{key:"adapter",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return t.toString()},t}(function(e){if(1!==arguments.length)throw new Error("ASTQ#adapter: invalid number of arguments");return this._adapter.unregister(),this._adapter.register(e),this})},{key:"func",value:function(e){function t(t,r){return e.apply(this,arguments)}return t.toString=function(){return t.toString()},t}(function(e,t){if(2!==arguments.length)throw new Error("ASTQ#func: invalid number of arguments");return this._funcs.register(e,t),this})},{key:"cache",value:function(e){if(1!==arguments.length)throw new Error("ASTQ#cache: invalid number of arguments");return this._cache.limit(e),this}},{key:"compile",value:function(e,t){if(arguments.length<1)throw new Error("ASTQ#compile: too less arguments");if(arguments.length>2)throw new Error("ASTQ#compile: too many arguments");void 0===t&&(t=!1);var r=this._cache.get(e);return void 0===r&&(r=new b["default"],r.compile(e,t),this._cache.set(e,r)),r}},{key:"execute",value:function(e,t,r,n){if(arguments.length<2)throw new Error("ASTQ#execute: too less arguments");if(arguments.length>4)throw new Error("ASTQ#execute: too many arguments");void 0===r&&(r={}),void 0===n&&(n=!1);var a=this._adapter.select(e);if(void 0===a)throw new Error("ASTQ#execute: no suitable adapter found for node");return t.execute(e,a,r,this._funcs,n)}},{key:"query",value:function(e,t,r,n){if(arguments.length<2)throw new Error("ASTQ#query: too less arguments");if(arguments.length>4)throw new Error("ASTQ#query: too many arguments");return void 0===r&&(r={}),void 0===n&&(n=!1),this.execute(e,this.compile(t,n),r,n)}}]),e}();r["default"]=E,t.exports=r["default"]},{"./astq-adapter-asty.js":1,"./astq-adapter-mozast.js":2,"./astq-adapter-xmldom.js":3,"./astq-adapter.js":4,"./astq-funcs-std.js":5,"./astq-funcs.js":6,"./astq-query.js":9,"./astq-version.js":11,"cache-lru":"cache-lru"}]},{},[1,2,3,4,5,6,7,8,9,10,11,12])(12)});
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],2:[function(_dereq_,module,exports){
(function (global){
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.ASTY=e()}}(function(){return function e(t,n,r){function o(u,a){if(!n[u]){if(!t[u]){var f="function"==typeof _dereq_&&_dereq_;if(!a&&f)return f(u,!0);if(i)return i(u,!0);var s=new Error("Cannot find module '"+u+"'");throw s.code="MODULE_NOT_FOUND",s}var c=n[u]={exports:{}};t[u][0].call(c.exports,function(e){var n=t[u][1][e];return o(n?n:e)},c,c.exports,e,t,n,r)}return n[u].exports}for(var i="function"==typeof _dereq_&&_dereq_,u=0;u<r.length;u++)o(r[u]);return o}({1:[function(e,t,n){"use strict";var r=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){r(this,e)}return o(e,[{key:"init",value:function(e,t,n){if("undefined"==typeof e)throw new Error("init: invalid argument");if(this.ASTy=!0,this.T=e,this.L={L:0,C:0,O:0},this.A={},this.C=[],this.P=null,"object"==typeof t)for(var r in t)t.hasOwnProperty(r)&&this.set(r,t[r]);return"object"==typeof n&&n instanceof Array&&this.add(n),this}},{key:"type",value:function(e){if(0===arguments.length)return this.T;if(1===arguments.length)return this.T=e,this;throw new Error("type: invalid number of arguments")}},{key:"pos",value:function(e,t,n){if(0===arguments.length)return this.L;if(arguments.length<=3)return this.L.L=e||0,this.L.C=t||0,this.L.O=n||0,this;throw new Error("pos: invalid number of arguments")}},{key:"set",value:function(){var e=this,t=arguments;if(1===arguments.length&&"object"==typeof arguments[0])!function(){var n=t;Object.keys(n[0]).forEach(function(t){e.A[t]=n[0][t]})}();else{if(2!==arguments.length)throw new Error("set: invalid arguments");this.A[arguments[0]]=arguments[1]}return this}},{key:"get",value:function(e){if(1!==arguments.length)throw new Error("get: invalid number of arguments");if("string"!=typeof e)throw new Error("get: invalid argument");return this.A[e]}},{key:"attrs",value:function(){return Object.keys(this.A)}},{key:"add",value:function(){var e=this;if(0===arguments.length)throw new Error("add: missing argument(s)");var t=function(e,t){if(!("object"==typeof t&&"string"==typeof t.T&&"object"==typeof t.L&&"object"==typeof t.A&&"object"==typeof t.P&&"object"==typeof t.C&&t.C instanceof Array))throw new Error("add: invalid AST node: "+JSON.stringify(t));e.C.push(t),t.P=e};return null!==arguments&&Array.prototype.slice.call(arguments,0).forEach(function(n){"object"==typeof n&&n instanceof Array?n.forEach(function(n){t(e,n)}):null!==n&&t(e,n)}),this}},{key:"del",value:function(){var e=this;if(0===arguments.length)throw new Error("del: invalid argument");return Array.prototype.slice.call(arguments,0).forEach(function(t){for(var n=!1,r=0;r<e.C.length;r++)if(e.C[r]===t){e.C.splice(r,1),t.P=null,n=!0;break}if(!n)throw new Error("del: child not found")}),this}},{key:"childs",value:function(){return this.C}},{key:"parent",value:function(){return this.P}}]),e}();n["default"]=i,t.exports=n["default"]},{}],2:[function(e,t,n){"use strict";var r=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){r(this,e)}return o(e,[{key:"dump",value:function(e){void 0===e&&(e=1/0);var t="";return this.walk(function(n,r){if(!(r>e)){for(var o=0;r>o;o++)t+="    ";t+=n.T+" ";var i=Object.keys(n.A);i.length>0&&!function(){t+="(";var e=!0;i.forEach(function(r){e?e=!1:t+=", ",t+=r+": ";var o=n.A[r];switch(typeof o){case"string":t+='"'+o.replace(/\n/,"\\n").replace(/"/,'\\"')+'"';break;case"object":t+=o instanceof RegExp?"/"+o.toString().replace(/^\//,"").replace(/\/$/,"").replace(/\//g,"\\/")+"/":JSON.stringify(o);break;default:t+=JSON.stringify(o)}}),t+=") "}(),t+="["+n.L.L+"/"+n.L.C+"]\n"}},"downward"),t}}]),e}();n["default"]=i,t.exports=n["default"]},{}],3:[function(e,t,n){"use strict";var r=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){r(this,e)}return o(e,[{key:"merge",value:function(e,t,n){var r=this;if("object"!=typeof e)throw new Error("merge: invalid AST node argument");if("undefined"==typeof t&&(t=!1),"undefined"==typeof n&&(n={}),t){var o=e.pos();this.pos(o.L,o.C,o.O)}return e.attrs().forEach(function(t){var o="undefined"!=typeof n[t]?n[t]:t;null!==o&&r.set(o,e.get(t))}),e.childs().forEach(function(e){r.add(e)}),this}}]),e}();n["default"]=i,t.exports=n["default"]},{}],4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r={major:1,minor:0,micro:9,date:20150308};n["default"]=r,t.exports=n["default"]},{}],5:[function(e,t,n){"use strict";var r=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){r(this,e)}return o(e,[{key:"walk",value:function(e,t){"undefined"==typeof t&&(t="downward");var n=function(e){function t(t,n,r){return e.apply(this,arguments)}return t.toString=function(){return t.toString()},t}(function(r,o,i){("downward"===t||"both"===t)&&e.call(null,r,o,i,"downward"),r.C.forEach(function(e){n(e,o+1,r)}),("upward"===t||"both"===t)&&e.call(null,r,o,i,"upward")});return n(this,0,null),this}}]),e}();n["default"]=i,t.exports=n["default"]},{}],6:[function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e:{"default":e}},o=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(n,"__esModule",{value:!0});var u=e("./asty-base.js"),a=r(u),f=e("./asty-merge.js"),s=r(f),c=e("./asty-walk.js"),l=r(c),d=e("./asty-dump.js"),y=r(d),p=e("./asty-version.js"),h=r(p),v=function(){function e(){var t=this;o(this,e),this.ASTYNode=function(){};var n=[[a["default"],"init","type","pos","set","get","attrs","add","del","childs","parent"],[s["default"],"merge"],[l["default"],"walk"],[y["default"],"dump"]];return n.forEach(function(e){var n=e[0].prototype;e.slice(1).forEach(function(e){t.ASTYNode.prototype[e]=n[e]})}),this}return i(e,[{key:"version",value:function(){return h["default"]}},{key:"extend",value:function(e){for(var t in e)e.hasOwnProperty(t)&&(this.ASTYNode.prototype[t]=e[t]);return this}},{key:"create",value:function(e){return(new this.ASTYNode).init(e)}},{key:"isA",value:function(e){return"object"==typeof e&&e instanceof this.ASTYNode&&"boolean"==typeof e.ASTy&&e.ASTy===!0}}]),e}();n["default"]=v,t.exports=n["default"]},{"./asty-base.js":1,"./asty-dump.js":2,"./asty-merge.js":3,"./asty-version.js":4,"./asty-walk.js":5}]},{},[1,2,3,4,5,6])(6)});
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],3:[function(_dereq_,module,exports){
"use strict";var _get=function e(t,r,n){var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var u=Object.getPrototypeOf(t);return null===u?void 0:e(u,r,n)}if("value"in o)return o.value;var i=o.get;return void 0===i?void 0:i.call(n)},_inherits=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)},_classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},_createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),ASTY=_dereq_("asty"),ASTQ=_dereq_("astq"),ASTQAdapter=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"taste",value:function(){return!0}},{key:"getParentNode",value:function(e){return e.parent()}},{key:"getChildNodes",value:function(e){return e.childs()}},{key:"getNodeType",value:function(e){return e.type()}},{key:"getNodeAttrNames",value:function(e){return e.attrs()}},{key:"getNodeAttrValue",value:function(e,t){return e.get(t)}}]),e}(),ASTYASTQ=function(e){function t(){if(_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),!(this instanceof t))return new t;_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this);var e=new ASTQ;return e.adapter(new ASTQAdapter),this.extend({query:function(t,r,n){return e.query(this,t,r,n)}}),this}return _inherits(t,e),t}(ASTY);module.exports=ASTYASTQ;
},{"astq":1,"asty":2}]},{},[3])(3)
});


//# sourceMappingURL=asty-astq.browser.map