/*
**  ASTy-ASTq -- Abstract Syntax Tree With Integrated Query Engine
**  Copyright (c) 2014-2016 Ralf S. Engelschall <rse@engelschall.com>
**
**  Permission is hereby granted, free of charge, to any person obtaining
**  a copy of this software and associated documentation files (the
**  "Software"), to deal in the Software without restriction, including
**  without limitation the rights to use, copy, modify, merge, publish,
**  distribute, sublicense, and/or sell copies of the Software, and to
**  permit persons to whom the Software is furnished to do so, subject to
**  the following conditions:
**
**  The above copyright notice and this permission notice shall be included
**  in all copies or substantial portions of the Software.
**
**  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
**  EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
**  MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
**  IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY
**  CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,
**  TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE
**  SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
*/

(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.ASTYASTQ = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(_dereq_,module,exports){
(function (global){
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.ASTQ=e()}}(function(){return function e(t,r,n){function u(a,i){if(!r[a]){if(!t[a]){var s="function"==typeof _dereq_&&_dereq_;if(!i&&s)return s(a,!0);if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=r[a]={exports:{}};t[a][0].call(l.exports,function(e){var r=t[a][1][e];return u(r?r:e)},l,l.exports,e,t,r,n)}return r[a].exports}for(var o="function"==typeof _dereq_&&_dereq_,a=0;a<n.length;a++)u(n[a]);return u}({1:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(){function e(){n(this,e)}return o(e,null,[{key:"taste",value:function(e){return"object"===("undefined"==typeof e?"undefined":u(e))&&null!==e&&"boolean"==typeof e.ASTy}},{key:"getParentNode",value:function(e){return e.parent()}},{key:"getChildNodes",value:function(e){return e.childs()}},{key:"getNodeType",value:function(e){return e.type()}},{key:"getNodeAttrNames",value:function(e){return e.attrs()}},{key:"getNodeAttrValue",value:function(e,t){return e.get(t)}}]),e}();r.default=a},{}],2:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(){function e(){n(this,e)}return o(e,null,[{key:"taste",value:function(e){return"object"===("undefined"==typeof e?"undefined":u(e))&&null!==e&&"string"==typeof e.type&&""!==e.type}},{key:"getParentNode",value:function(e,t){if("*"!==t&&"parent"!==t)throw new Error('no such axis named "'+t+'" for walking to parent nodes');if("undefined"!=typeof e.parent)return e.parent;throw new Error("Your Mozilla SpiderMonkey AST does not support parent node traversal")}},{key:"getChildNodes",value:function(e,t){var r=this,n=[],o=function(e,t){e.hasOwnProperty(t)&&r.taste(e[t])?n.push(e[t]):e.hasOwnProperty(t)&&"object"===u(e[t])&&e[t]instanceof Array&&e[t].forEach(function(e){r.taste(e)&&n.push(e)})};if("*"===t)for(var a in e)o(e,a);else{if("undefined"==typeof e[t])throw new Error('no such axis named "'+t+'" for walking to child nodes');o(e,t)}return n}},{key:"getNodeType",value:function(e){return e.type}},{key:"getNodeAttrNames",value:function(e){var t=[];for(var r in e)e.hasOwnProperty(r)&&"object"!==u(e[r])&&"type"!==r&&"loc"!==r&&t.push(r);return t}},{key:"getNodeAttrValue",value:function(e,t){return e.hasOwnProperty(t)&&"object"!==u(e[t])&&"type"!==t&&"loc"!==t?e[t]:void 0}}]),e}();r.default=a},{}],3:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(){function e(){n(this,e)}return o(e,null,[{key:"taste",value:function(e){return"object"===("undefined"==typeof e?"undefined":u(e))&&null!==e&&!("object"===("undefined"==typeof Node?"undefined":u(Node))&&e instanceof Node)&&"string"==typeof e.nodeName&&""!==e.nodeName}},{key:"getParentNode",value:function(e){return e.parentNode}},{key:"getChildNodes",value:function(e){return"object"===u(e.childNodes)&&e.childNodes instanceof Array?e.childNodes:[]}},{key:"getNodeType",value:function(e){return e.nodeName}},{key:"getNodeAttrNames",value:function(e){var t=["value"];return"object"===u(e.attrs)&&e.attrs instanceof Array&&(t=t.concat(e.attrs.map(function(e){return e.name}))),t}},{key:"getNodeAttrValue",value:function(e,t){var r=void 0;if("value"===t)r=e.value;else if("object"===u(e.attrs)&&e.attrs instanceof Array){var n=e.attrs.filter(function(e){return e.name===t}).map(function(e){return e.value});1===n.length&&(r=n[0])}return r}}]),e}();r.default=a},{}],4:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(){function e(){n(this,e)}return o(e,null,[{key:"taste",value:function(e){return"object"===("undefined"==typeof Node?"undefined":u(Node))&&null!==e&&e instanceof Node&&"object"===("undefined"==typeof e?"undefined":u(e))&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName}},{key:"getParentNode",value:function(e){return e.parentNode}},{key:"getChildNodes",value:function(e){return"object"===u(e.childNodes)&&null!==e.childNodes&&e.hasChildNodes()?Array.prototype.slice.call(e.childNodes,0):[]}},{key:"getNodeType",value:function(e){return"string"==typeof e.nodeName?e.nodeName:"unknown"}},{key:"getNodeAttrNames",value:function(e){return"object"===u(e.attributes)&&null!==e.attributes&&e.hasAttributes()?Array.prototype.slice.call(e.attributes,0).map(function(e){return e.nodeName}):[]}},{key:"getNodeAttrValue",value:function(e,t){return"object"===u(e.attributes)&&null!==e.attributes&&e.hasAttributes()?e.getAttribute(t):void 0}}]),e}();r.default=a},{}],5:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(){function e(){return n(this,e),this._adapters=[],this}return u(e,[{key:"register",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._adapters.unshift({adapter:e,force:t}),this}},{key:"unregister",value:function(e){if(void 0===e)this._adapters=[];else{for(var t=[],r=0;r<this._adapters.length;r++)this._adapters[r].adapter!==e&&t.push(this._adapters[r]);this._adapters=t}return this}},{key:"select",value:function(e){for(var t=0;t<this._adapters.length;t++)if(this._adapters[t].force||this._adapters[t].adapter.taste(e))return this._adapters[t].adapter}}]),e}();r.default=o},{}],6:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=function(e,t){var r=e.getParentNode(t,"*");if(null===r)return 1;for(var n=e.getChildNodes(r,"*"),u=0;u<n.length;u++)if(n[u]===t)return u+1;throw new Error("cannot find myself")},o=function e(t,r){for(var e=[];null!==(r=t.getParentNode(r,"*"));)e.push(r);return e},a={type:function(e,t){return e.getNodeType(t)},attrs:function(e,t,r){return void 0===r&&(r=" "),r+e.getNodeAttrNames(t).join(r)+r},depth:function e(t,r){for(var e=1,n=r;null!==(n=t.getParentNode(n,"*"));)e++;return e},pos:function(e,t){return u(e,t)},nth:function(e,t,r){r=parseInt(r,10);var n=e.getParentNode(t,"*");if(null!==n){var u=e.getChildNodes(n,"*");r<0&&(r=u.length-(r+1));for(var o=0;o<u.length;o++)if(u[o]===t)return o+1===r;return!1}return 1===r},first:function(e,t){return a.nth(e,t,1)},last:function(e,t){return a.nth(e,t,-1)},count:function(e,t,r){return"object"===("undefined"==typeof r?"undefined":n(r))&&r instanceof Array?r.length:"object"===("undefined"==typeof r?"undefined":n(r))?Object.keys(r).length:"string"==typeof r?r.length:String(r).length},below:function(e,t,r){if(!e.taste(r))throw new Error('invalid argument to function "below" (node expected)');for(var n=t;null!==(n=e.getParentNode(n,"*"));)if(n===r)return!0;return!1},follows:function(e,t,r){if(!e.taste(r))throw new Error('invalid argument to function "follows" (node expected)');if(t===r)return!1;var n=[t].concat(o(e,t)).reverse(),a=[r].concat(o(e,r)).reverse(),i=Math.min(n.length,a.length),s=void 0;for(s=0;s<i&&n[s]===a[s];s++);if(0===s)throw new Error("internal error: root nodes have to be same same");return s===i?a.length<n.length:u(e,n[s])>u(e,a[s])},in:function(e,t,r){if(!("object"===("undefined"==typeof r?"undefined":n(r))&&r instanceof Array))throw new Error('invalid argument to function "in" (array expected)');for(var u=0;u<r.length;u++)if(r[u]===t)return!0;return!1},substr:function(e,t,r,n,u){return String(r).substr(n,u)},index:function(e,t,r,n,u){return String(r).indexOf(n,u)},trim:function(e,t,r){return String(r).trim()},lc:function(e,t,r){return String(r).toLowerCase()},uc:function(e,t,r){return String(r).toUpperCase()}};r.default=a},{}],7:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(){function e(){return n(this,e),this._funcs={},this}return u(e,[{key:"register",value:function(e,t){this._funcs[e]=t}},{key:"run",value:function(e,t){var r=this._funcs[e];if("function"!=typeof r)throw new Error('invalid function "'+e+'"');return r.apply(null,t)}}]),e}();r.default=o},{}],8:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=e("./astq-util.js"),c=n(s),l=e("./astq-query-trace.js"),f=n(l),d=function(e){function t(e,r,n,a){u(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.adapter=e,i.params=r,i.funcs=n,i.trace=a,i}return a(t,e),i(t,[{key:"execQuery",value:function(e,t){var r=this;this.traceBegin(e,t);var n=[];return e.childs().forEach(function(e){n=n.concat(r.execPath(e,t))}),this.traceEnd(e,t,n),n}},{key:"execPath",value:function(e,t){var r=this;this.traceBegin(e,t);var n=[t],u=[],o=!1;return e.childs().forEach(function(e){var t=[];n.forEach(function(n){t=t.concat(r.execStep(e,n))}),n=t,e.get("isResult")&&(o=!0,u=u.concat(n))}),this.traceEnd(e,t,n),o?u:n}},{key:"execStep",value:function(e,t){var r=this;this.traceBegin(e,t);var n=e.childs(),u=null,o=null,a=null,i=0;if(i<n.length&&"Axis"===n[i].type()&&(u=n[i++]),i<n.length&&"Match"===n[i].type()&&(o=n[i++]),i<n.length&&"Filter"===n[i].type()&&(a=n[i++]),null===o)throw new Error("no matching part in query step");var s=[],c=o.get("id"),l=function(e){var t=r.adapter.getNodeType(e);if("*"===c||c===t){var n=!0;null!==a&&(r.execFilter(a,e)||(n=!1)),n&&s.push(e)}};return null!==u?!function(){var e=u.get("op"),n=u.get("type");if("/"===e)r.adapter.getChildNodes(t,n).forEach(function(e){return l(e)});else if("//"===e)!function(){var e=function e(t){l(t),r.adapter.getChildNodes(t,n).forEach(function(t){return e(t)})};r.adapter.getChildNodes(t,n).forEach(function(t){return e(t)})}();else if("-/"===e){var o=r.adapter.getParentNode(t,"*");if(null!==o){for(var a=r.adapter.getChildNodes(o,n),i=null,c=0;c<a.length&&a[c]!==t;c++)i=a[c];null!==i&&l(i)}}else if("-//"===e){var f=r.adapter.getParentNode(t,"*");if(null!==f){for(var d=r.adapter.getChildNodes(f,n),h=0;h<d.length&&d[h]!==t;h++);for(h--;h>=0;h--)l(d[h])}}else if("+/"===e){var p=r.adapter.getParentNode(t,"*");if(null!==p){var y=r.adapter.getChildNodes(p,n),v=void 0;for(v=0;v<y.length&&y[v]!==t;v++);v<y.length&&l(y[++v])}}else if("+//"===e){var b=r.adapter.getParentNode(t,"*");if(null!==b){var g=r.adapter.getChildNodes(b,n),x=void 0;for(x=0;x<g.length&&g[x]!==t;x++);if(x<g.length)for(x++;x<g.length;x++)l(g[x])}}else if("../"===e){var m=r.adapter.getParentNode(t,n);null!==m&&l(m)}else if("..//"===e)for(var A=t;;){var E=r.adapter.getParentNode(A,n);if(null===E)break;l(E),A=E}else"<//"===e?!function(){for(var e={sentinel:t,take:!0};;){var u=r.adapter.getParentNode(t,"*");if(null===u)break;t=u}var o=function t(u){u===e.sentinel&&(e.take=!1),e.take&&l(u),e.take&&r.adapter.getChildNodes(u,n).forEach(function(e){return t(e)})};t!==e.sentinel&&(l(t),r.adapter.getChildNodes(t,n).forEach(function(e){return o(e)})),s=s.reverse()}():">//"===e&&!function(){for(var e={sentinel:t,take:!1};;){var u=r.adapter.getParentNode(t,"*");if(null===u)break;t=u}var o=function t(u){e.take&&l(u),u===e.sentinel&&(e.take=!0),r.adapter.getChildNodes(u,n).forEach(function(e){return t(e)})};r.adapter.getChildNodes(t,n).forEach(function(e){return o(e)})}()}():l(t),this.traceEnd(e,t,s),s}},{key:"execFilter",value:function(e,t){this.traceBegin(e,t);var r=e.childs()[0],n=this.execExpr(r,t);return n=c.default.truthy(n),this.traceEnd(e,t,n),n}},{key:"execExpr",value:function(e,t){switch(e.type()){case"ConditionalBinary":return this.execExprConditionalBinary(e,t);case"ConditionalTernary":return this.execExprConditionalTernary(e,t);case"Logical":return this.execExprLogical(e,t);case"Bitwise":return this.execExprBitwise(e,t);case"Relational":return this.execExprRelational(e,t);case"Arithmetical":return this.execExprArithmetical(e,t);case"Unary":return this.execExprUnary(e,t);case"FuncCall":return this.execExprFuncCall(e,t);case"Attribute":return this.execExprAttribute(e,t);case"Param":return this.execExprParam(e,t);case"LiteralString":return this.execExprLiteralString(e,t);case"LiteralRegExp":return this.execExprLiteralRegExp(e,t);case"LiteralNumber":return this.execExprLiteralNumber(e,t);case"LiteralValue":return this.execExprLiteralValue(e,t);case"Path":return this.execExprPath(e,t)}}},{key:"execExprConditionalBinary",value:function(e,t){this.traceBegin(e,t);var r=this.execExpr(e.childs()[0],t);return c.default.truthy(r)||(r=this.execExpr(e.childs()[1],t)),this.traceEnd(e,t,r),r}},{key:"execExprConditionalTernary",value:function(e,t){this.traceBegin(e,t);var r=this.execExpr(e.childs()[0],t);return r=c.default.truthy(r)?this.execExpr(e.childs()[1],t):this.execExpr(e.childs()[2],t),this.traceEnd(e,t,r),r}},{key:"execExprLogical",value:function(e,t){this.traceBegin(e,t);var r=!1;switch(e.get("op")){case"&&":r=c.default.truthy(this.execExpr(e.childs()[0],t)),r&&(r=r&&c.default.truthy(this.execExpr(e.childs()[1],t)));break;case"||":r=c.default.truthy(this.execExpr(e.childs()[0],t)),r||(r=r||c.default.truthy(this.execExpr(e.childs()[1],t)))}return this.traceEnd(e,t,r),r}},{key:"execExprBitwise",value:function(e,t){this.traceBegin(e,t);var r=c.default.coerce(this.execExpr(e.childs()[0],t),"number"),n=c.default.coerce(this.execExpr(e.childs()[1],t),"number"),u=void 0;switch(e.get("op")){case"&":u=r&n;break;case"|":u=r|n;break;case"<<":u=r<<n;break;case">>":u=r>>n}return this.traceEnd(e,t,u),u}},{key:"execExprRelational",value:function(e,t){this.traceBegin(e,t);var r=this.execExpr(e.childs()[0],t),n=this.execExpr(e.childs()[1],t),u=void 0;switch(e.get("op")){case"==":u=r===n;break;case"!=":u=r!==n;break;case"<=":u=c.default.coerce(r,"number")<=c.default.coerce(n,"number");break;case">=":u=c.default.coerce(r,"number")>=c.default.coerce(n,"number");break;case"<":u=c.default.coerce(r,"number")<c.default.coerce(n,"number");break;case">":u=c.default.coerce(r,"number")>c.default.coerce(n,"number");break;case"=~":u=null!==c.default.coerce(r,"string").match(c.default.coerce(n,"regexp"));break;case"!~":u=null===c.default.coerce(r,"string").match(c.default.coerce(n,"regexp"))}return this.traceEnd(e,t,u),u}},{key:"execExprArithmetical",value:function(e,t){this.traceBegin(e,t);var r=this.execExpr(e.childs()[0],t),n=this.execExpr(e.childs()[1],t),u=void 0;switch(e.get("op")){case"+":u="string"==typeof r?r+c.default.coerce(n,"string"):c.default.coerce(r,"number")+c.default.coerce(n,"number");break;case"-":u=c.default.coerce(r,"number")+c.default.coerce(n,"number");break;case"*":u=c.default.coerce(r,"number")*c.default.coerce(n,"number");break;case"/":u=c.default.coerce(r,"number")/c.default.coerce(n,"number");break;case"%":u=c.default.coerce(r,"number")%c.default.coerce(n,"number");break;case"**":u=Math.pow(c.default.coerce(r,"number"),c.default.coerce(n,"number"))}return this.traceEnd(e,t,u),u}},{key:"execExprUnary",value:function(e,t){this.traceBegin(e,t);var r=this.execExpr(e.childs()[0],t),n=void 0;switch(e.get("op")){case"!":n=!c.default.coerce(r,"boolean");break;case"~":n=~c.default.coerce(r,"number")}return this.traceEnd(e,t,n),n}},{key:"execExprFuncCall",value:function(e,t){var r=this;this.traceBegin(e,t);var n=e.get("id"),u=[this.adapter,t];e.childs().forEach(function(e){u.push(r.execExpr(e,t))});var o=this.funcs.run(n,u);return this.traceEnd(e,t,o),o}},{key:"execExprAttribute",value:function(e,t){this.traceBegin(e,t);var r=e.get("id"),n=this.adapter.getNodeAttrValue(t,r);return this.traceEnd(e,t,n),n}},{key:"execExprParam",value:function(e,t){this.traceBegin(e,t);var r=e.get("id");if("undefined"==typeof this.params[r])throw new Error('invalid parameter "'+r+'"');var n=this.params[r];return this.traceEnd(e,t,n),n}},{key:"execExprLiteralString",value:function(e,t){this.traceBegin(e,t);var r=e.get("value");return this.traceEnd(e,t,r),r}},{key:"execExprLiteralRegExp",value:function(e,t){this.traceBegin(e,t);var r=e.get("value");return this.traceEnd(e,t,r),r}},{key:"execExprLiteralNumber",value:function(e,t){this.traceBegin(e,t);var r=e.get("value");return this.traceEnd(e,t,r),r}},{key:"execExprLiteralValue",value:function(e,t){this.traceBegin(e,t);var r=e.get("value");return this.traceEnd(e,t,r),r}},{key:"execExprPath",value:function(e,t){this.traceBegin(e,t);var r=this.execPath(e,t);return this.traceEnd(e,t,r),r}}]),t}(f.default);r.default=d},{"./astq-query-trace.js":9,"./astq-util.js":11}],9:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=e("./astq-util.js"),s=n(i),c=function(){function e(){u(this,e)}return a(e,[{key:"prefixOf",value:function(e,t){for(var r=0,n=e;null!==(n=n.parent());)r++;var u=s.default.pad("",4*r);for(r=0,n=t;null!==(n=this.adapter.getParentNode(n,"*"));)r++;var o=s.default.pad("",4*r);return{prefix1:u,prefix2:o}}},{key:"traceBegin",value:function(e,t){if(this.trace){var r=this.prefixOf(e,t),n=r.prefix1,u=r.prefix2;console.log("ASTQ: execute: | "+s.default.pad(n+e.type()+" (",-60)+" | "+u+this.adapter.getNodeType(t))}}},{key:"traceEnd",value:function(e,t,r){var n=this;if(this.trace){var u=this.prefixOf(e,t),a=u.prefix1,i=u.prefix2,c=void 0;void 0===r?c="undefined":"object"===("undefined"==typeof r?"undefined":o(r))&&r instanceof Array?(c="[",r.forEach(function(e){c+="node("+n.adapter.getNodeType(e)+"),"}),c=c.replace(/,$/,"")+"]"):c=("undefined"==typeof r?"undefined":o(r))+"("+r+")",c.length>60&&(c=c.substr(0,60)+"..."),console.log("ASTQ: execute: | "+s.default.pad(a+"): "+c,-60)+" | "+i+this.adapter.getNodeType(t))}}}]),e}();r.default=c},{"./astq-util.js":11}],10:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=e("./astq-query-exec.js"),i=n(a),s=e("asty"),c=e("pegjs-util"),l=function(){function e(e,t){function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r}function t(e,r,n,u){this.message=e,this.expected=r,this.found=n,this.location=u,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,t)}function r(e,r){function n(){return f(vu,yu)}function u(e,t){throw t=void 0!==t?t:f(vu,yu),h(e,t)}function o(e,t){return{type:"literal",text:e,ignoreCase:t}}function a(e,t,r){return{type:"class",parts:e,inverted:t,ignoreCase:r}}function i(){return{type:"any"}}function s(){return{type:"end"}}function c(e){return{type:"other",description:e}}function l(t){var r,n=bu[t];if(n)return n;for(r=t-1;!bu[r];)r--;for(n=bu[r],n={line:n.line,column:n.column};r<t;)10===e.charCodeAt(r)?(n.line++,n.column=1):n.column++,r++;return bu[t]=n,n}function f(e,t){var r=l(e),n=l(t);return{start:{offset:e,line:r.line,column:r.column},end:{offset:t,line:n.line,column:n.column}}}function d(e){yu<gu||(yu>gu&&(gu=yu,xu=[]),xu.push(e))}function h(e,r){return new t(e,null,null,r)}function p(e,r,n){return new t(t.buildMessage(e,r),e,r,n)}function y(){var e,t,r,n,u,o=38*yu+0,a=Au[o];return a?(yu=a.nextPos,a.result):(e=yu,t=H(),t!==ee?(r=v(),r!==ee?(n=H(),n!==ee?(u=W(),u!==ee?(vu=e,t=ne(r),e=t):(yu=e,e=ee)):(yu=e,e=ee)):(yu=e,e=ee)):(yu=e,e=ee),Au[o]={nextPos:yu,result:e},e)}function v(){var t,r,n,u,o,a,i,s,c=38*yu+1,l=Au[c];if(l)return yu=l.nextPos,l.result;if(t=yu,r=b(),r!==ee){for(n=[],u=yu,o=H(),o!==ee?(44===e.charCodeAt(yu)?(a=ue,yu++):(a=ee,0===mu&&d(oe)),a!==ee?(i=H(),i!==ee?(s=b(),s!==ee?(o=[o,a,i,s],u=o):(yu=u,u=ee)):(yu=u,u=ee)):(yu=u,u=ee)):(yu=u,u=ee);u!==ee;)n.push(u),u=yu,o=H(),o!==ee?(44===e.charCodeAt(yu)?(a=ue,yu++):(a=ee,0===mu&&d(oe)),a!==ee?(i=H(),i!==ee?(s=b(),s!==ee?(o=[o,a,i,s],u=o):(yu=u,u=ee)):(yu=u,u=ee)):(yu=u,u=ee)):(yu=u,u=ee);n!==ee?(vu=t,r=ae(r,n),t=r):(yu=t,t=ee)}else yu=t,t=ee;return Au[c]={nextPos:yu,result:t},t}function b(){var e,t,r,n,u,o,a=38*yu+2,i=Au[a];if(i)return yu=i.nextPos,i.result;if(e=yu,t=g(),t!==ee){for(r=[],n=yu,u=H(),u!==ee?(o=x(),o!==ee?(u=[u,o],n=u):(yu=n,n=ee)):(yu=n,n=ee);n!==ee;)r.push(n),n=yu,u=H(),u!==ee?(o=x(),o!==ee?(u=[u,o],n=u):(yu=n,n=ee)):(yu=n,n=ee);r!==ee?(vu=e,t=ie(t,r),e=t):(yu=e,e=ee)}else yu=e,e=ee;return Au[a]={nextPos:yu,result:e},e}function g(){var t,r,n,u,o,a,i,s,c=38*yu+3,l=Au[c];return l?(yu=l.nextPos,l.result):(t=yu,r=m(),r===ee&&(r=null),r!==ee?(n=H(),n!==ee?(u=E(),u!==ee?(o=H(),o!==ee?(33===e.charCodeAt(yu)?(a=se,yu++):(a=ee,0===mu&&d(ce)),a===ee&&(a=null),a!==ee?(i=H(),i!==ee?(s=w(),s===ee&&(s=null),s!==ee?(vu=t,r=le(r,u,a,s),t=r):(yu=t,t=ee)):(yu=t,t=ee)):(yu=t,t=ee)):(yu=t,t=ee)):(yu=t,t=ee)):(yu=t,t=ee)):(yu=t,t=ee),Au[c]={nextPos:yu,result:t},t)}function x(){var t,r,n,u,o,a,i,s,c=38*yu+4,l=Au[c];return l?(yu=l.nextPos,l.result):(t=yu,r=m(),r!==ee?(n=H(),n!==ee?(u=E(),u!==ee?(o=H(),o!==ee?(33===e.charCodeAt(yu)?(a=se,yu++):(a=ee,0===mu&&d(ce)),a===ee&&(a=null),a!==ee?(i=H(),i!==ee?(s=w(),s===ee&&(s=null),s!==ee?(vu=t,r=le(r,u,a,s),t=r):(yu=t,t=ee)):(yu=t,t=ee)):(yu=t,t=ee)):(yu=t,t=ee)):(yu=t,t=ee)):(yu=t,t=ee)):(yu=t,t=ee),Au[c]={nextPos:yu,result:t},t)}function m(){var t,r,n,u=38*yu+5,o=Au[u];return o?(yu=o.nextPos,o.result):(mu++,t=yu,r=yu,e.substr(yu,2)===de?(n=de,yu+=2):(n=ee,0===mu&&d(he)),n===ee&&(47===e.charCodeAt(yu)?(n=pe,yu++):(n=ee,0===mu&&d(ye)),n===ee&&(e.substr(yu,3)===ve?(n=ve,yu+=3):(n=ee,0===mu&&d(be)),n===ee&&(e.substr(yu,2)===ge?(n=ge,yu+=2):(n=ee,0===mu&&d(xe)),n===ee&&(e.substr(yu,3)===me?(n=me,yu+=3):(n=ee,0===mu&&d(Ae)),n===ee&&(e.substr(yu,2)===Ee?(n=Ee,yu+=2):(n=ee,0===mu&&d(we)),n===ee&&(e.substr(yu,4)===Pe?(n=Pe,yu+=4):(n=ee,0===mu&&d(ke)),n===ee&&(e.substr(yu,3)===Ne?(n=Ne,yu+=3):(n=ee,0===mu&&d(Ce)),n===ee&&(e.substr(yu,3)===Se?(n=Se,yu+=3):(n=ee,0===mu&&d(je)),n===ee&&(e.substr(yu,3)===_e?(n=_e,yu+=3):(n=ee,0===mu&&d(Te))))))))))),r=n!==ee?e.substring(r,yu):n,r!==ee?(n=A(),n===ee&&(n=null),n!==ee?(vu=t,r=qe(r,n),t=r):(yu=t,t=ee)):(yu=t,t=ee),mu--,t===ee&&(r=ee,0===mu&&d(fe)),Au[u]={nextPos:yu,result:t},t)}function A(){var t,r,n,u=38*yu+6,o=Au[u];return o?(yu=o.nextPos,o.result):(t=yu,58===e.charCodeAt(yu)?(r=Oe,yu++):(r=ee,0===mu&&d(Le)),r!==ee?(n=z(),n!==ee?(vu=t,r=Be(n),t=r):(yu=t,t=ee)):(yu=t,t=ee),t===ee&&(t=yu,58===e.charCodeAt(yu)?(r=Oe,yu++):(r=ee,0===mu&&d(Le)),r!==ee?(n=I(),n!==ee?(vu=t,r=Me(n),t=r):(yu=t,t=ee)):(yu=t,t=ee)),Au[u]={nextPos:yu,result:t},t)}function E(){var t,r,n=38*yu+7,u=Au[n];return u?(yu=u.nextPos,u.result):(t=yu,r=z(),r!==ee&&(vu=t,r=Qe(r)),t=r,t===ee&&(t=yu,r=I(),r!==ee&&(vu=t,r=Re(r)),t=r,t===ee&&(t=yu,42===e.charCodeAt(yu)?(r=Fe,yu++):(r=ee,0===mu&&d(Ve)),r!==ee&&(vu=t,r=Ue()),t=r)),Au[n]={nextPos:yu,result:t},t)}function w(){var t,r,n,u,o,a,i=38*yu+8,s=Au[i];return s?(yu=s.nextPos,s.result):(t=yu,91===e.charCodeAt(yu)?(r=ze,yu++):(r=ee,0===mu&&d(Ie)),r!==ee?(n=H(),n!==ee?(u=P(),u!==ee?(o=H(),o!==ee?(93===e.charCodeAt(yu)?(a=Ze,yu++):(a=ee,0===mu&&d(De)),a!==ee?(vu=t,r=$e(u),t=r):(yu=t,t=ee)):(yu=t,t=ee)):(yu=t,t=ee)):(yu=t,t=ee)):(yu=t,t=ee),Au[i]={nextPos:yu,result:t},t)}function P(){var t,r,n,u,o,a,i,s,c,l,f=38*yu+9,h=Au[f];return h?(yu=h.nextPos,h.result):(t=yu,r=k(),r!==ee?(n=H(),n!==ee?(e.substr(yu,2)===Ye?(u=Ye,yu+=2):(u=ee,0===mu&&d(Ge)),u!==ee?(o=H(),o!==ee?(a=k(),a!==ee?(vu=t,r=He(r,a),t=r):(yu=t,t=ee)):(yu=t,t=ee)):(yu=t,t=ee)):(yu=t,t=ee)):(yu=t,t=ee),t===ee&&(t=yu,r=k(),r!==ee?(n=H(),n!==ee?(63===e.charCodeAt(yu)?(u=Je,yu++):(u=ee,0===mu&&d(Ke)),u!==ee?(o=H(),o!==ee?(a=k(),a!==ee?(i=H(),i!==ee?(58===e.charCodeAt(yu)?(s=Oe,yu++):(s=ee,0===mu&&d(Le)),s!==ee?(c=H(),c!==ee?(l=k(),l!==ee?(vu=t,r=We(r,a,l),t=r):(yu=t,t=ee)):(yu=t,t=ee)):(yu=t,t=ee)):(yu=t,t=ee)):(yu=t,t=ee)):(yu=t,t=ee)):(yu=t,t=ee)):(yu=t,t=ee)):(yu=t,t=ee),t===ee&&(t=k())),Au[f]={nextPos:yu,result:t},t)}function k(){var t,r,n,u,o,a,i=38*yu+10,s=Au[i];return s?(yu=s.nextPos,s.result):(t=yu,r=N(),r!==ee?(n=H(),n!==ee?(u=yu,e.substr(yu,2)===Xe?(o=Xe,yu+=2):(o=ee,0===mu&&d(et)),u=o!==ee?e.substring(u,yu):o,u!==ee?(o=H(),o!==ee?(a=k(),a!==ee?(vu=t,r=tt(r,u,a),t=r):(yu=t,t=ee)):(yu=t,t=ee)):(yu=t,t=ee)):(yu=t,t=ee)):(yu=t,t=ee),t===ee&&(t=N()),Au[i]={nextPos:yu,result:t},t)}function N(){var t,r,n,u,o,a,i=38*yu+11,s=Au[i];return s?(yu=s.nextPos,s.result):(t=yu,r=C(),r!==ee?(n=H(),n!==ee?(u=yu,e.substr(yu,2)===rt?(o=rt,yu+=2):(o=ee,0===mu&&d(nt)),u=o!==ee?e.substring(u,yu):o,u!==ee?(o=H(),o!==ee?(a=N(),a!==ee?(vu=t,r=tt(r,u,a),t=r):(yu=t,t=ee)):(yu=t,t=ee)):(yu=t,t=ee)):(yu=t,t=ee)):(yu=t,t=ee),t===ee&&(t=C()),Au[i]={nextPos:yu,result:t},t)}function C(){var t,r,n,u,o,a,i=38*yu+12,s=Au[i];return s?(yu=s.nextPos,s.result):(t=yu,r=S(),r!==ee?(n=H(),n!==ee?(u=yu,124===e.charCodeAt(yu)?(o=ut,yu++):(o=ee,0===mu&&d(ot)),u=o!==ee?e.substring(u,yu):o,u!==ee?(o=H(),o!==ee?(a=C(),a!==ee?(vu=t,r=at(r,u,a),t=r):(yu=t,t=ee)):(yu=t,t=ee)):(yu=t,t=ee)):(yu=t,t=ee)):(yu=t,t=ee),t===ee&&(t=S()),Au[i]={nextPos:yu,result:t},t)}function S(){var t,r,n,u,o,a,i=38*yu+13,s=Au[i];return s?(yu=s.nextPos,s.result):(t=yu,r=j(),r!==ee?(n=H(),n!==ee?(u=yu,94===e.charCodeAt(yu)?(o=it,yu++):(o=ee,0===mu&&d(st)),u=o!==ee?e.substring(u,yu):o,u!==ee?(o=H(),o!==ee?(a=S(),a!==ee?(vu=t,r=at(r,u,a),t=r):(yu=t,t=ee)):(yu=t,t=ee)):(yu=t,t=ee)):(yu=t,t=ee)):(yu=t,t=ee),t===ee&&(t=j()),Au[i]={nextPos:yu,result:t},t)}function j(){var t,r,n,u,o,a,i=38*yu+14,s=Au[i];return s?(yu=s.nextPos,s.result):(t=yu,r=_(),r!==ee?(n=H(),n!==ee?(u=yu,38===e.charCodeAt(yu)?(o=ct,yu++):(o=ee,0===mu&&d(lt)),u=o!==ee?e.substring(u,yu):o,u!==ee?(o=H(),o!==ee?(a=j(),a!==ee?(vu=t,r=at(r,u,a),t=r):(yu=t,t=ee)):(yu=t,t=ee)):(yu=t,t=ee)):(yu=t,t=ee)):(yu=t,t=ee),t===ee&&(t=_()),Au[i]={nextPos:yu,result:t},t)}function _(){var t,r,n,u,o,a,i=38*yu+15,s=Au[i];return s?(yu=s.nextPos,s.result):(t=yu,r=T(),r!==ee?(n=H(),n!==ee?(u=yu,e.substr(yu,2)===ft?(o=ft,yu+=2):(o=ee,0===mu&&d(dt)),o===ee&&(e.substr(yu,2)===ht?(o=ht,yu+=2):(o=ee,0===mu&&d(pt)),o===ee&&(e.substr(yu,2)===yt?(o=yt,yu+=2):(o=ee,0===mu&&d(vt)),o===ee&&(e.substr(yu,2)===bt?(o=bt,yu+=2):(o=ee,0===mu&&d(gt)),o===ee&&(60===e.charCodeAt(yu)?(o=xt,yu++):(o=ee,0===mu&&d(mt)),o===ee&&(62===e.charCodeAt(yu)?(o=At,yu++):(o=ee,0===mu&&d(Et)),o===ee&&(e.substr(yu,2)===wt?(o=wt,yu+=2):(o=ee,0===mu&&d(Pt)),o===ee&&(e.substr(yu,2)===kt?(o=kt,yu+=2):(o=ee,0===mu&&d(Nt))))))))),u=o!==ee?e.substring(u,yu):o,u!==ee?(o=H(),o!==ee?(a=_(),a!==ee?(vu=t,r=Ct(r,u,a),t=r):(yu=t,t=ee)):(yu=t,t=ee)):(yu=t,t=ee)):(yu=t,t=ee)):(yu=t,t=ee),t===ee&&(t=T()),Au[i]={nextPos:yu,result:t},t)}function T(){var t,r,n,u,o,a,i=38*yu+16,s=Au[i];return s?(yu=s.nextPos,s.result):(t=yu,r=q(),r!==ee?(n=H(),n!==ee?(u=yu,e.substr(yu,2)===St?(o=St,yu+=2):(o=ee,0===mu&&d(jt)),o===ee&&(e.substr(yu,2)===_t?(o=_t,yu+=2):(o=ee,0===mu&&d(Tt))),u=o!==ee?e.substring(u,yu):o,u!==ee?(o=H(),o!==ee?(a=T(),a!==ee?(vu=t,r=at(r,u,a),t=r):(yu=t,t=ee)):(yu=t,t=ee)):(yu=t,t=ee)):(yu=t,t=ee)):(yu=t,t=ee),t===ee&&(t=q()),Au[i]={nextPos:yu,result:t},t)}function q(){var t,r,n,u,o,a,i=38*yu+17,s=Au[i];return s?(yu=s.nextPos,s.result):(t=yu,r=O(),r!==ee?(n=H(),n!==ee?(u=yu,43===e.charCodeAt(yu)?(o=qt,yu++):(o=ee,0===mu&&d(Ot)),o===ee&&(45===e.charCodeAt(yu)?(o=Lt,yu++):(o=ee,0===mu&&d(Bt))),u=o!==ee?e.substring(u,yu):o,u!==ee?(o=H(),o!==ee?(a=q(),a!==ee?(vu=t,r=Mt(r,u,a),t=r):(yu=t,t=ee)):(yu=t,t=ee)):(yu=t,t=ee)):(yu=t,t=ee)):(yu=t,t=ee),t===ee&&(t=O()),Au[i]={nextPos:yu,result:t},t)}function O(){var t,r,n,u,o,a,i=38*yu+18,s=Au[i];return s?(yu=s.nextPos,s.result):(t=yu,r=L(),r!==ee?(n=H(),n!==ee?(u=yu,e.substr(yu,2)===Qt?(o=Qt,yu+=2):(o=ee,0===mu&&d(Rt)),o===ee&&(42===e.charCodeAt(yu)?(o=Fe,yu++):(o=ee,0===mu&&d(Ve)),o===ee&&(47===e.charCodeAt(yu)?(o=pe,
yu++):(o=ee,0===mu&&d(ye)),o===ee&&(37===e.charCodeAt(yu)?(o=Ft,yu++):(o=ee,0===mu&&d(Vt))))),u=o!==ee?e.substring(u,yu):o,u!==ee?(o=H(),o!==ee?(a=O(),a!==ee?(vu=t,r=Mt(r,u,a),t=r):(yu=t,t=ee)):(yu=t,t=ee)):(yu=t,t=ee)):(yu=t,t=ee)):(yu=t,t=ee),t===ee&&(t=L()),Au[i]={nextPos:yu,result:t},t)}function L(){var t,r,n,u=38*yu+19,o=Au[u];return o?(yu=o.nextPos,o.result):(t=yu,r=yu,33===e.charCodeAt(yu)?(n=se,yu++):(n=ee,0===mu&&d(ce)),n===ee&&(126===e.charCodeAt(yu)?(n=Ut,yu++):(n=ee,0===mu&&d(zt))),r=n!==ee?e.substring(r,yu):n,r!==ee?(n=B(),n!==ee?(vu=t,r=It(r,n),t=r):(yu=t,t=ee)):(yu=t,t=ee),t===ee&&(t=B()),Au[u]={nextPos:yu,result:t},t)}function B(){var e,t=38*yu+20,r=Au[t];return r?(yu=r.nextPos,r.result):(e=M(),e===ee&&(e=R(),e===ee&&(e=F(),e===ee&&(e=V(),e===ee&&(e=U(),e===ee&&(e=b()))))),Au[t]={nextPos:yu,result:e},e)}function M(){var t,r,n,u,o,a,i,s,c=38*yu+21,l=Au[c];return l?(yu=l.nextPos,l.result):(t=yu,r=z(),r!==ee?(n=H(),n!==ee?(40===e.charCodeAt(yu)?(u=Zt,yu++):(u=ee,0===mu&&d(Dt)),u!==ee?(o=H(),o!==ee?(a=Q(),a===ee&&(a=null),a!==ee?(i=H(),i!==ee?(41===e.charCodeAt(yu)?(s=$t,yu++):(s=ee,0===mu&&d(Yt)),s!==ee?(vu=t,r=Gt(r,a),t=r):(yu=t,t=ee)):(yu=t,t=ee)):(yu=t,t=ee)):(yu=t,t=ee)):(yu=t,t=ee)):(yu=t,t=ee)):(yu=t,t=ee),Au[c]={nextPos:yu,result:t},t)}function Q(){var t,r,n,u,o,a,i,s,c=38*yu+22,l=Au[c];if(l)return yu=l.nextPos,l.result;if(t=yu,r=P(),r!==ee){for(n=[],u=yu,o=H(),o!==ee?(44===e.charCodeAt(yu)?(a=ue,yu++):(a=ee,0===mu&&d(oe)),a!==ee?(i=H(),i!==ee?(s=P(),s!==ee?(o=[o,a,i,s],u=o):(yu=u,u=ee)):(yu=u,u=ee)):(yu=u,u=ee)):(yu=u,u=ee);u!==ee;)n.push(u),u=yu,o=H(),o!==ee?(44===e.charCodeAt(yu)?(a=ue,yu++):(a=ee,0===mu&&d(oe)),a!==ee?(i=H(),i!==ee?(s=P(),s!==ee?(o=[o,a,i,s],u=o):(yu=u,u=ee)):(yu=u,u=ee)):(yu=u,u=ee)):(yu=u,u=ee);n!==ee?(vu=t,r=Ht(r,n),t=r):(yu=t,t=ee)}else yu=t,t=ee;return Au[c]={nextPos:yu,result:t},t}function R(){var t,r,n,u=38*yu+23,o=Au[u];return o?(yu=o.nextPos,o.result):(mu++,t=yu,64===e.charCodeAt(yu)?(r=Kt,yu++):(r=ee,0===mu&&d(Wt)),r!==ee?(n=z(),n!==ee?(vu=t,r=Xt(n),t=r):(yu=t,t=ee)):(yu=t,t=ee),t===ee&&(t=yu,64===e.charCodeAt(yu)?(r=Kt,yu++):(r=ee,0===mu&&d(Wt)),r!==ee?(n=I(),n!==ee?(vu=t,r=er(n),t=r):(yu=t,t=ee)):(yu=t,t=ee)),mu--,t===ee&&(r=ee,0===mu&&d(Jt)),Au[u]={nextPos:yu,result:t},t)}function F(){var t,r,n,u,o,a,i=38*yu+24,s=Au[i];return s?(yu=s.nextPos,s.result):(mu++,t=yu,123===e.charCodeAt(yu)?(r=rr,yu++):(r=ee,0===mu&&d(nr)),r!==ee?(n=H(),n!==ee?(u=z(),u!==ee?(o=H(),o!==ee?(125===e.charCodeAt(yu)?(a=ur,yu++):(a=ee,0===mu&&d(or)),a!==ee?(vu=t,r=ar(u),t=r):(yu=t,t=ee)):(yu=t,t=ee)):(yu=t,t=ee)):(yu=t,t=ee)):(yu=t,t=ee),mu--,t===ee&&(r=ee,0===mu&&d(tr)),Au[i]={nextPos:yu,result:t},t)}function V(){var e,t=38*yu+25,r=Au[t];return r?(yu=r.nextPos,r.result):(e=I(),e===ee&&(e=$(),e===ee&&(e=Y(),e===ee&&(e=G()))),Au[t]={nextPos:yu,result:e},e)}function U(){var t,r,n,u,o,a,i=38*yu+26,s=Au[i];return s?(yu=s.nextPos,s.result):(t=yu,40===e.charCodeAt(yu)?(r=Zt,yu++):(r=ee,0===mu&&d(Dt)),r!==ee?(n=H(),n!==ee?(u=P(),u!==ee?(o=H(),o!==ee?(41===e.charCodeAt(yu)?(a=$t,yu++):(a=ee,0===mu&&d(Yt)),a!==ee?(vu=t,r=ir(u),t=r):(yu=t,t=ee)):(yu=t,t=ee)):(yu=t,t=ee)):(yu=t,t=ee)):(yu=t,t=ee),Au[i]={nextPos:yu,result:t},t)}function z(){var t,r,n,u,o,a,i,s=38*yu+27,c=Au[s];if(c)return yu=c.nextPos,c.result;if(mu++,t=yu,r=yu,n=yu,u=yu,mu++,o=G(),mu--,o===ee?u=void 0:(yu=u,u=ee),u!==ee)if(cr.test(e.charAt(yu))?(o=e.charAt(yu),yu++):(o=ee,0===mu&&d(lr)),o!==ee){for(a=[],fr.test(e.charAt(yu))?(i=e.charAt(yu),yu++):(i=ee,0===mu&&d(dr));i!==ee;)a.push(i),fr.test(e.charAt(yu))?(i=e.charAt(yu),yu++):(i=ee,0===mu&&d(dr));a!==ee?(u=[u,o,a],n=u):(yu=n,n=ee)}else yu=n,n=ee;else yu=n,n=ee;return r=n!==ee?e.substring(r,yu):n,r!==ee&&(vu=t,r=hr(r)),t=r,mu--,t===ee&&(r=ee,0===mu&&d(sr)),Au[s]={nextPos:yu,result:t},t}function I(){var t,r,n,u,o=38*yu+28,a=Au[o];if(a)return yu=a.nextPos,a.result;if(mu++,t=yu,34===e.charCodeAt(yu)?(r=yr,yu++):(r=ee,0===mu&&d(vr)),r!==ee){for(n=[],u=Z(),u===ee&&(br.test(e.charAt(yu))?(u=e.charAt(yu),yu++):(u=ee,0===mu&&d(gr)));u!==ee;)n.push(u),u=Z(),u===ee&&(br.test(e.charAt(yu))?(u=e.charAt(yu),yu++):(u=ee,0===mu&&d(gr)));n!==ee?(34===e.charCodeAt(yu)?(u=yr,yu++):(u=ee,0===mu&&d(vr)),u!==ee?(vu=t,r=xr(n),t=r):(yu=t,t=ee)):(yu=t,t=ee)}else yu=t,t=ee;if(t===ee)if(t=yu,39===e.charCodeAt(yu)?(r=mr,yu++):(r=ee,0===mu&&d(Ar)),r!==ee){for(n=[],u=D(),u===ee&&(Er.test(e.charAt(yu))?(u=e.charAt(yu),yu++):(u=ee,0===mu&&d(wr)));u!==ee;)n.push(u),u=D(),u===ee&&(Er.test(e.charAt(yu))?(u=e.charAt(yu),yu++):(u=ee,0===mu&&d(wr)));n!==ee?(39===e.charCodeAt(yu)?(u=mr,yu++):(u=ee,0===mu&&d(Ar)),u!==ee?(vu=t,r=xr(n),t=r):(yu=t,t=ee)):(yu=t,t=ee)}else yu=t,t=ee;return mu--,t===ee&&(r=ee,0===mu&&d(pr)),Au[o]={nextPos:yu,result:t},t}function Z(){var t,r,n,u,o,a,i,s,c=38*yu+29,l=Au[c];return l?(yu=l.nextPos,l.result):(mu++,t=yu,e.substr(yu,2)===kr?(r=kr,yu+=2):(r=ee,0===mu&&d(Nr)),r!==ee&&(vu=t,r=Cr()),t=r,t===ee&&(t=yu,e.substr(yu,2)===Sr?(r=Sr,yu+=2):(r=ee,0===mu&&d(jr)),r!==ee&&(vu=t,r=_r()),t=r,t===ee&&(t=yu,e.substr(yu,2)===Tr?(r=Tr,yu+=2):(r=ee,0===mu&&d(qr)),r!==ee&&(vu=t,r=Or()),t=r,t===ee&&(t=yu,e.substr(yu,2)===Lr?(r=Lr,yu+=2):(r=ee,0===mu&&d(Br)),r!==ee&&(vu=t,r=Mr()),t=r,t===ee&&(t=yu,e.substr(yu,2)===Qr?(r=Qr,yu+=2):(r=ee,0===mu&&d(Rr)),r!==ee&&(vu=t,r=Fr()),t=r,t===ee&&(t=yu,e.substr(yu,2)===Vr?(r=Vr,yu+=2):(r=ee,0===mu&&d(Ur)),r!==ee&&(vu=t,r=zr()),t=r,t===ee&&(t=yu,e.substr(yu,2)===Ir?(r=Ir,yu+=2):(r=ee,0===mu&&d(Zr)),r!==ee&&(vu=t,r=Dr()),t=r,t===ee&&(t=yu,e.substr(yu,2)===$r?(r=$r,yu+=2):(r=ee,0===mu&&d(Yr)),r!==ee&&(vu=t,r=Gr()),t=r,t===ee&&(t=yu,e.substr(yu,2)===Hr?(r=Hr,yu+=2):(r=ee,0===mu&&d(Jr)),r!==ee&&(vu=t,r=Kr()),t=r,t===ee&&(t=yu,e.substr(yu,2)===Wr?(r=Wr,yu+=2):(r=ee,0===mu&&d(Xr)),r!==ee?(n=yu,u=yu,en.test(e.charAt(yu))?(o=e.charAt(yu),yu++):(o=ee,0===mu&&d(tn)),o!==ee?(en.test(e.charAt(yu))?(a=e.charAt(yu),yu++):(a=ee,0===mu&&d(tn)),a!==ee?(o=[o,a],u=o):(yu=u,u=ee)):(yu=u,u=ee),n=u!==ee?e.substring(n,yu):u,n!==ee?(vu=t,r=rn(n),t=r):(yu=t,t=ee)):(yu=t,t=ee),t===ee&&(t=yu,e.substr(yu,2)===nn?(r=nn,yu+=2):(r=ee,0===mu&&d(un)),r!==ee?(n=yu,u=yu,en.test(e.charAt(yu))?(o=e.charAt(yu),yu++):(o=ee,0===mu&&d(tn)),o!==ee?(en.test(e.charAt(yu))?(a=e.charAt(yu),yu++):(a=ee,0===mu&&d(tn)),a!==ee?(en.test(e.charAt(yu))?(i=e.charAt(yu),yu++):(i=ee,0===mu&&d(tn)),i!==ee?(en.test(e.charAt(yu))?(s=e.charAt(yu),yu++):(s=ee,0===mu&&d(tn)),s!==ee?(o=[o,a,i,s],u=o):(yu=u,u=ee)):(yu=u,u=ee)):(yu=u,u=ee)):(yu=u,u=ee),n=u!==ee?e.substring(n,yu):u,n!==ee?(vu=t,r=rn(n),t=r):(yu=t,t=ee)):(yu=t,t=ee))))))))))),mu--,t===ee&&(r=ee,0===mu&&d(Pr)),Au[c]={nextPos:yu,result:t},t)}function D(){var t,r,n=38*yu+30,u=Au[n];return u?(yu=u.nextPos,u.result):(mu++,t=yu,e.substr(yu,2)===an?(r=an,yu+=2):(r=ee,0===mu&&d(sn)),r!==ee&&(vu=t,r=cn()),t=r,mu--,t===ee&&(r=ee,0===mu&&d(on)),Au[n]={nextPos:yu,result:t},t)}function $(){var t,r,n,u,o,a=38*yu+31,i=Au[a];if(i)return yu=i.nextPos,i.result;if(mu++,t=yu,96===e.charCodeAt(yu)?(r=fn,yu++):(r=ee,0===mu&&d(dn)),r!==ee){for(n=yu,u=[],e.substr(yu,2)===hn?(o=hn,yu+=2):(o=ee,0===mu&&d(pn)),o===ee&&(yn.test(e.charAt(yu))?(o=e.charAt(yu),yu++):(o=ee,0===mu&&d(vn)));o!==ee;)u.push(o),e.substr(yu,2)===hn?(o=hn,yu+=2):(o=ee,0===mu&&d(pn)),o===ee&&(yn.test(e.charAt(yu))?(o=e.charAt(yu),yu++):(o=ee,0===mu&&d(vn)));n=u!==ee?e.substring(n,yu):u,n!==ee?(96===e.charCodeAt(yu)?(u=fn,yu++):(u=ee,0===mu&&d(dn)),u!==ee?(vu=t,r=bn(n),t=r):(yu=t,t=ee)):(yu=t,t=ee)}else yu=t,t=ee;return mu--,t===ee&&(r=ee,0===mu&&d(ln)),Au[a]={nextPos:yu,result:t},t}function Y(){var t,r,n,u,o,a,i,s,c,l,f,h,p=38*yu+32,y=Au[p];if(y)return yu=y.nextPos,y.result;if(mu++,t=yu,r=yu,xn.test(e.charAt(yu))?(n=e.charAt(yu),yu++):(n=ee,0===mu&&d(mn)),n===ee&&(n=null),r=n!==ee?e.substring(r,yu):n,r!==ee)if(e.substr(yu,2)===An?(n=An,yu+=2):(n=ee,0===mu&&d(En)),n!==ee){if(u=yu,o=[],wn.test(e.charAt(yu))?(a=e.charAt(yu),yu++):(a=ee,0===mu&&d(Pn)),a!==ee)for(;a!==ee;)o.push(a),wn.test(e.charAt(yu))?(a=e.charAt(yu),yu++):(a=ee,0===mu&&d(Pn));else o=ee;u=o!==ee?e.substring(u,yu):o,u!==ee?(vu=t,r=kn(r,u),t=r):(yu=t,t=ee)}else yu=t,t=ee;else yu=t,t=ee;if(t===ee){if(t=yu,r=yu,xn.test(e.charAt(yu))?(n=e.charAt(yu),yu++):(n=ee,0===mu&&d(mn)),n===ee&&(n=null),r=n!==ee?e.substring(r,yu):n,r!==ee)if(e.substr(yu,2)===Nn?(n=Nn,yu+=2):(n=ee,0===mu&&d(Cn)),n!==ee){if(u=yu,o=[],Sn.test(e.charAt(yu))?(a=e.charAt(yu),yu++):(a=ee,0===mu&&d(jn)),a!==ee)for(;a!==ee;)o.push(a),Sn.test(e.charAt(yu))?(a=e.charAt(yu),yu++):(a=ee,0===mu&&d(jn));else o=ee;u=o!==ee?e.substring(u,yu):o,u!==ee?(vu=t,r=_n(r,u),t=r):(yu=t,t=ee)}else yu=t,t=ee;else yu=t,t=ee;if(t===ee){if(t=yu,r=yu,xn.test(e.charAt(yu))?(n=e.charAt(yu),yu++):(n=ee,0===mu&&d(mn)),n===ee&&(n=null),r=n!==ee?e.substring(r,yu):n,r!==ee)if(e.substr(yu,2)===Tn?(n=Tn,yu+=2):(n=ee,0===mu&&d(qn)),n!==ee){if(u=yu,o=[],en.test(e.charAt(yu))?(a=e.charAt(yu),yu++):(a=ee,0===mu&&d(tn)),a!==ee)for(;a!==ee;)o.push(a),en.test(e.charAt(yu))?(a=e.charAt(yu),yu++):(a=ee,0===mu&&d(tn));else o=ee;u=o!==ee?e.substring(u,yu):o,u!==ee?(vu=t,r=On(r,u),t=r):(yu=t,t=ee)}else yu=t,t=ee;else yu=t,t=ee;if(t===ee){if(t=yu,r=yu,n=yu,xn.test(e.charAt(yu))?(u=e.charAt(yu),yu++):(u=ee,0===mu&&d(mn)),u===ee&&(u=null),u!==ee){for(o=[],Ln.test(e.charAt(yu))?(a=e.charAt(yu),yu++):(a=ee,0===mu&&d(Bn));a!==ee;)o.push(a),Ln.test(e.charAt(yu))?(a=e.charAt(yu),yu++):(a=ee,0===mu&&d(Bn));if(o!==ee)if(46===e.charCodeAt(yu)?(a=Mn,yu++):(a=ee,0===mu&&d(Qn)),a!==ee){if(i=[],Ln.test(e.charAt(yu))?(s=e.charAt(yu),yu++):(s=ee,0===mu&&d(Bn)),s!==ee)for(;s!==ee;)i.push(s),Ln.test(e.charAt(yu))?(s=e.charAt(yu),yu++):(s=ee,0===mu&&d(Bn));else i=ee;if(i!==ee){if(s=yu,Rn.test(e.charAt(yu))?(c=e.charAt(yu),yu++):(c=ee,0===mu&&d(Fn)),c!==ee)if(xn.test(e.charAt(yu))?(l=e.charAt(yu),yu++):(l=ee,0===mu&&d(mn)),l===ee&&(l=null),l!==ee){if(f=[],Ln.test(e.charAt(yu))?(h=e.charAt(yu),yu++):(h=ee,0===mu&&d(Bn)),h!==ee)for(;h!==ee;)f.push(h),Ln.test(e.charAt(yu))?(h=e.charAt(yu),yu++):(h=ee,0===mu&&d(Bn));else f=ee;f!==ee?(c=[c,l,f],s=c):(yu=s,s=ee)}else yu=s,s=ee;else yu=s,s=ee;s===ee&&(s=null),s!==ee?(u=[u,o,a,i,s],n=u):(yu=n,n=ee)}else yu=n,n=ee}else yu=n,n=ee;else yu=n,n=ee}else yu=n,n=ee;if(r=n!==ee?e.substring(r,yu):n,r!==ee&&(vu=t,r=Vn(r)),t=r,t===ee){if(t=yu,r=yu,n=yu,xn.test(e.charAt(yu))?(u=e.charAt(yu),yu++):(u=ee,0===mu&&d(mn)),u===ee&&(u=null),u!==ee){if(o=[],Ln.test(e.charAt(yu))?(a=e.charAt(yu),yu++):(a=ee,0===mu&&d(Bn)),a!==ee)for(;a!==ee;)o.push(a),Ln.test(e.charAt(yu))?(a=e.charAt(yu),yu++):(a=ee,0===mu&&d(Bn));else o=ee;o!==ee?(u=[u,o],n=u):(yu=n,n=ee)}else yu=n,n=ee;r=n!==ee?e.substring(r,yu):n,r!==ee&&(vu=t,r=Un(r)),t=r}}}}return mu--,t===ee&&(r=ee,0===mu&&d(gn)),Au[p]={nextPos:yu,result:t},t}function G(){var t,r,n=38*yu+33,u=Au[n];return u?(yu=u.nextPos,u.result):(mu++,t=yu,e.substr(yu,4)===In?(r=In,yu+=4):(r=ee,0===mu&&d(Zn)),r!==ee&&(vu=t,r=Dn()),t=r,t===ee&&(t=yu,e.substr(yu,5)===$n?(r=$n,yu+=5):(r=ee,0===mu&&d(Yn)),r!==ee&&(vu=t,r=Gn()),t=r,t===ee&&(t=yu,e.substr(yu,4)===Hn?(r=Hn,yu+=4):(r=ee,0===mu&&d(Jn)),r!==ee&&(vu=t,r=Kn()),t=r,t===ee&&(t=yu,e.substr(yu,3)===Wn?(r=Wn,yu+=3):(r=ee,0===mu&&d(Xn)),r!==ee&&(vu=t,r=eu()),t=r,t===ee&&(t=yu,e.substr(yu,9)===tu?(r=tu,yu+=9):(r=ee,0===mu&&d(ru)),r!==ee&&(vu=t,r=nu()),t=r)))),mu--,t===ee&&(r=ee,0===mu&&d(zn)),Au[n]={nextPos:yu,result:t},t)}function H(){var e,t,r=38*yu+34,n=Au[r];if(n)return yu=n.nextPos,n.result;for(mu++,e=[],t=J(),t===ee&&(t=K());t!==ee;)e.push(t),t=J(),t===ee&&(t=K());return mu--,e===ee&&(t=ee,0===mu&&d(uu)),Au[r]={nextPos:yu,result:e},e}function J(){var t,r,n,u,o,a,i=38*yu+35,s=Au[i];if(s)return yu=s.nextPos,s.result;if(mu++,t=yu,e.substr(yu,2)===au?(r=au,yu+=2):(r=ee,0===mu&&d(iu)),r!==ee){for(n=[],u=yu,o=yu,mu++,e.substr(yu,2)===su?(a=su,yu+=2):(a=ee,0===mu&&d(cu)),mu--,a===ee?o=void 0:(yu=o,o=ee),o!==ee?(e.length>yu?(a=e.charAt(yu),yu++):(a=ee,0===mu&&d(lu)),a!==ee?(o=[o,a],u=o):(yu=u,u=ee)):(yu=u,u=ee);u!==ee;)n.push(u),u=yu,o=yu,mu++,e.substr(yu,2)===su?(a=su,yu+=2):(a=ee,0===mu&&d(cu)),mu--,a===ee?o=void 0:(yu=o,o=ee),o!==ee?(e.length>yu?(a=e.charAt(yu),yu++):(a=ee,0===mu&&d(lu)),a!==ee?(o=[o,a],u=o):(yu=u,u=ee)):(yu=u,u=ee);n!==ee?(e.substr(yu,2)===su?(u=su,yu+=2):(u=ee,0===mu&&d(cu)),u!==ee?(r=[r,n,u],t=r):(yu=t,t=ee)):(yu=t,t=ee)}else yu=t,t=ee;return mu--,t===ee&&(r=ee,0===mu&&d(ou)),Au[i]={nextPos:yu,result:t},t}function K(){var t,r,n=38*yu+36,u=Au[n];if(u)return yu=u.nextPos,u.result;if(mu++,t=[],du.test(e.charAt(yu))?(r=e.charAt(yu),yu++):(r=ee,0===mu&&d(hu)),r!==ee)for(;r!==ee;)t.push(r),du.test(e.charAt(yu))?(r=e.charAt(yu),yu++):(r=ee,0===mu&&d(hu));else t=ee;return mu--,t===ee&&(r=ee,0===mu&&d(fu)),Au[n]={nextPos:yu,result:t},t}function W(){var t,r,n=38*yu+37,u=Au[n];return u?(yu=u.nextPos,u.result):(mu++,t=yu,mu++,e.length>yu?(r=e.charAt(yu),yu++):(r=ee,0===mu&&d(lu)),mu--,r===ee?t=void 0:(yu=t,t=ee),mu--,t===ee&&(r=ee,0===mu&&d(pu)),Au[n]={nextPos:yu,result:t},t)}r=void 0!==r?r:{};var X,ee={},te={query:y},re=y,ne=function(e){return e},ue=",",oe=o(",",!1),ae=function(e,t){return wu("Query").add(Eu(e,t,3))},ie=function(e,t){return wu("Path").add(Eu(e,t,1))},se="!",ce=o("!",!1),le=function(e,t,r,n){return wu("Step").add(e,t,n).set(null!==r?{isResult:!0}:{})},fe=c("axis"),de="//",he=o("//",!1),pe="/",ye=o("/",!1),ve="-//",be=o("-//",!1),ge="-/",xe=o("-/",!1),me="+//",Ae=o("+//",!1),Ee="+/",we=o("+/",!1),Pe="..//",ke=o("..//",!1),Ne="../",Ce=o("../",!1),Se="<//",je=o("<//",!1),_e=">//",Te=o(">//",!1),qe=function(e,t){return wu("Axis").set({op:e,type:null!==t?t:"*"})},Oe=":",Le=o(":",!1),Be=function(e){return e.get("id")},Me=function(e){return e.get("value")},Qe=function(e){return wu("Match").merge(e)},Re=function(e){return wu("Match").set({id:e.get("value")})},Fe="*",Ve=o("*",!1),Ue=function(){return wu("Match").set({id:"*"})},ze="[",Ie=o("[",!1),Ze="]",De=o("]",!1),$e=function(e){return wu("Filter").add(e)},Ye="?:",Ge=o("?:",!1),He=function(e,t){return wu("ConditionalBinary").add(e,t)},Je="?",Ke=o("?",!1),We=function(e,t,r){return wu("ConditionalTernary").add(e,t,r)},Xe="||",et=o("||",!1),tt=function(e,t,r){return wu("Logical").set({op:t}).add(e,r)},rt="&&",nt=o("&&",!1),ut="|",ot=o("|",!1),at=function(e,t,r){return wu("Bitwise").set({op:t}).add(e,r)},it="^",st=o("^",!1),ct="&",lt=o("&",!1),ft="==",dt=o("==",!1),ht="!=",pt=o("!=",!1),yt="<=",vt=o("<=",!1),bt=">=",gt=o(">=",!1),xt="<",mt=o("<",!1),At=">",Et=o(">",!1),wt="=~",Pt=o("=~",!1),kt="!~",Nt=o("!~",!1),Ct=function(e,t,r){return wu("Relational").set({op:t}).add(e,r)},St="<<",jt=o("<<",!1),_t=">>",Tt=o(">>",!1),qt="+",Ot=o("+",!1),Lt="-",Bt=o("-",!1),Mt=function(e,t,r){return wu("Arithmetical").set({op:t}).add(e,r)},Qt="**",Rt=o("**",!1),Ft="%",Vt=o("%",!1),Ut="~",zt=o("~",!1),It=function(e,t){return wu("Unary").set({op:e}).add(t)},Zt="(",Dt=o("(",!1),$t=")",Yt=o(")",!1),Gt=function(e,t){return wu("FuncCall").merge(e).add(t)},Ht=function(e,t){return Eu(e,t,3)},Jt=c("node attribute"),Kt="@",Wt=o("@",!1),Xt=function(e){return wu("Attribute").merge(e)},er=function(e){return wu("Attribute").set({id:e.get("value")})},tr=c("query parameter reference"),rr="{",nr=o("{",!1),ur="}",or=o("}",!1),ar=function(e){return wu("Param").merge(e)},ir=function(e){return e},sr=c("identifier"),cr=/^[a-zA-Z_]/,lr=a([["a","z"],["A","Z"],"_"],!1,!1),fr=/^[a-zA-Z0-9_\-]/,dr=a([["a","z"],["A","Z"],["0","9"],"_","-"],!1,!1),hr=function(e){return wu("Identifier").set({id:e})},pr=c("quoted string literal"),yr='"',vr=o('"',!1),br=/^[^"]/,gr=a(['"'],!0,!1),xr=function(e){return wu("LiteralString").set({value:e.join("")})},mr="'",Ar=o("'",!1),Er=/^[^']/,wr=a(["'"],!0,!1),Pr=c("escaped double-quoted-string character"),kr="\\\\",Nr=o("\\\\",!1),Cr=function(){return"\\"},Sr='\\"',jr=o('\\"',!1),_r=function(){return'"'},Tr="\\b",qr=o("\\b",!1),Or=function(){return"\b"},Lr="\\v",Br=o("\\v",!1),Mr=function(){return"\v"},Qr="\\f",Rr=o("\\f",!1),Fr=function(){return"\f"},Vr="\\t",Ur=o("\\t",!1),zr=function(){return"\t"},Ir="\\r",Zr=o("\\r",!1),Dr=function(){return"\r"},$r="\\n",Yr=o("\\n",!1),Gr=function(){return"\n"},Hr="\\e",Jr=o("\\e",!1),Kr=function(){return""},Wr="\\x",Xr=o("\\x",!1),en=/^[0-9a-fA-F]/,tn=a([["0","9"],["a","f"],["A","F"]],!1,!1),rn=function(e){return String.fromCharCode(parseInt(e,16))},nn="\\u",un=o("\\u",!1),on=c("escaped single-quoted-string character"),an="\\'",sn=o("\\'",!1),cn=function(){return"'"},ln=c("regular expression literal"),fn="`",dn=o("`",!1),hn="\\`",pn=o("\\`",!1),yn=/^[^`]/,vn=a(["`"],!0,!1),bn=function(e){var t;try{t=new RegExp(e.replace(/\\`/g,"`"))}catch(e){u(e.message)}return wu("LiteralRegExp").set({value:t})},gn=c("numeric literal"),xn=/^[+\-]/,mn=a(["+","-"],!1,!1),An="0b",En=o("0b",!1),wn=/^[01]/,Pn=a(["0","1"],!1,!1),kn=function(e,t){return wu("LiteralNumber").set({value:parseInt(e+t,2)})},Nn="0o",Cn=o("0o",!1),Sn=/^[0-7]/,jn=a([["0","7"]],!1,!1),_n=function(e,t){return wu("LiteralNumber").set({value:parseInt(e+t,8)})},Tn="0x",qn=o("0x",!1),On=function(e,t){return wu("LiteralNumber").set({value:parseInt(e+t,16)})},Ln=/^[0-9]/,Bn=a([["0","9"]],!1,!1),Mn=".",Qn=o(".",!1),Rn=/^[eE]/,Fn=a(["e","E"],!1,!1),Vn=function(e){return wu("LiteralNumber").set({value:parseFloat(e)})},Un=function(e){return wu("LiteralNumber").set({value:parseInt(e,10)})},zn=c("global value"),In="true",Zn=o("true",!1),Dn=function(){return wu("LiteralValue").set({value:!0})},$n="false",Yn=o("false",!1),Gn=function(){return wu("LiteralValue").set({value:!1})},Hn="null",Jn=o("null",!1),Kn=function(){return wu("LiteralValue").set({value:null})},Wn="NaN",Xn=o("NaN",!1),eu=function(){return wu("LiteralValue").set({value:NaN})},tu="undefined",ru=o("undefined",!1),nu=function(){return wu("LiteralValue").set({value:void 0})},uu=c("optional blank"),ou=c("multi-line comment"),au="/*",iu=o("/*",!1),su="*/",cu=o("*/",!1),lu=i(),fu=c("any whitespaces"),du=/^[ \t\r\n]/,hu=a([" ","\t","\r","\n"],!1,!1),pu=c("end of file"),yu=0,vu=0,bu=[{line:1,column:1}],gu=0,xu=[],mu=0,Au={};if("startRule"in r){if(!(r.startRule in te))throw new Error("Can't start parsing from rule \""+r.startRule+'".');re=te[r.startRule]}var Eu=r.util.makeUnroll(n,r),wu=r.util.makeAST(n,r);if(X=re(),X!==ee&&yu===e.length)return X;throw X!==ee&&yu<e.length&&d(s()),p(xu,gu<e.length?e.charAt(gu):null,gu<e.length?f(gu,gu+1):f(gu,gu))}return e(t,Error),t.buildMessage=function(e,t){function r(e){return e.charCodeAt(0).toString(16).toUpperCase()}function n(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+r(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+r(e)})}function u(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+r(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+r(e)})}function o(e){return s[e.type](e)}function a(e){var t,r,n=new Array(e.length);for(t=0;t<e.length;t++)n[t]=o(e[t]);if(n.sort(),n.length>0){for(t=1,r=1;t<n.length;t++)n[t-1]!==n[t]&&(n[r]=n[t],r++);n.length=r}switch(n.length){case 1:return n[0];case 2:return n[0]+" or "+n[1];default:return n.slice(0,-1).join(", ")+", or "+n[n.length-1]}}function i(e){return e?'"'+n(e)+'"':"end of input"}var s={literal:function(e){return'"'+n(e.text)+'"'},class:function(e){var t,r="";for(t=0;t<e.parts.length;t++)r+=e.parts[t]instanceof Array?u(e.parts[t][0])+"-"+u(e.parts[t][1]):u(e.parts[t]);return"["+(e.inverted?"^":"")+r+"]"},any:function(e){return"any character"},end:function(e){return"end of input"},other:function(e){return e.description}};return"Expected "+a(e)+" but "+i(t)+" found."},{SyntaxError:t,parse:r}}(),f=function(){function e(t){u(this,e),this.asty=new s,this.ast=null,t&&this.compile(t)}return o(e,[{key:"compile",value:function(e,t){var r=this;t&&console.log("ASTQ: compile: +-------------------------------------------------------------------------------------------------------\nASTQ: compile: | "+e);var n=c.parse(l,e,{startRule:"query",makeAST:function(e,t,n,u){return r.asty.create.apply(r.asty,u).pos(e,t,n)}});if(null!==n.error)throw new Error("ASTQ: compile: query parsing failed:\n"+c.errorMessage(n.error,!0).replace(/^/gm,"ERROR: "));return this.ast=n.ast,t&&console.log("ASTQ: compile: +-------------------------------------------------------------------------------------------------------\n"+this.dump().replace(/\n$/,"").replace(/^/gm,"ASTQ: compile: | ")),this}},{key:"dump",value:function(){return this.ast.dump()}},{key:"execute",value:function(e,t,r,n,u){u&&console.log("ASTQ: execute: +--------------------------------------------------------------+----------------------------------------");var o=new i.default(t,r,n,u);return o.execQuery(this.ast,e)}}]),e}();r.default=f},{"./astq-query-exec.js":8,asty:"asty","pegjs-util":"pegjs-util"}],11:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(){function e(){n(this,e)}return o(e,null,[{key:"pad",value:function e(t,r){var n=r<0?-r:r;if(t.length>n)t=t.substr(0,n);else{var e=Array(n+1-t.length).join(" ");t=r<0?t+e:e+t}return t}},{key:"truthy",value:function(e){var t=void 0;switch("undefined"==typeof e?"undefined":u(e)){case"boolean":t=e;break;case"number":t=0!==e&&!isNaN(e);break;case"string":t=""!==e;break;case"object":t=!1,null!==e&&(t=!0,e instanceof Array&&(t=e.length>0));break;default:t=!1}return t}},{key:"coerce",value:function(e,t){if(("undefined"==typeof e?"undefined":u(e))!==t)try{switch(t){case"boolean":"boolean"!=typeof e&&(e=Boolean(e));break;case"number":"number"!=typeof e&&(e=Number(e));break;case"string":"string"!=typeof e&&(e=String(e));break;case"regexp":"object"===("undefined"==typeof e?"undefined":u(e))&&e instanceof RegExp||(e=new RegExp(e))}}catch(e){throw new Error("cannot coerce value into type "+t)}return e}}]),e}();r.default=a},{}],12:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={major:2,minor:0,micro:0,date:20161120};r.default=n},{}],13:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=e("./astq-adapter.js"),s=n(i),c=e("./astq-adapter-xmldom.js"),l=n(c),f=e("./astq-adapter-parse5.js"),d=n(f),h=e("./astq-adapter-mozast.js"),p=n(h),y=e("./astq-adapter-asty.js"),v=n(y),b=e("./astq-funcs.js"),g=n(b),x=e("./astq-funcs-std.js"),m=n(x),A=e("./astq-query.js"),E=n(A),w=e("./astq-version.js"),P=n(w),k=e("cache-lru"),N=function(){function e(){u(this,e),this._adapter=(new s.default).register(l.default,!1).register(d.default,!1).register(p.default,!1).register(v.default,!1),this._funcs=new g.default;for(var t in m.default)this.func(t,m.default[t]);this._cache=new k}return a(e,[{key:"version",value:function(){return P.default}},{key:"adapter",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(arguments.length<1||arguments.length>2)throw new Error("ASTQ#adapter: invalid number of arguments");if(this._adapter.unregister(),"object"===("undefined"==typeof e?"undefined":o(e))&&e instanceof Array||(e=[e]),e.length>1&&r)throw new Error("ASTQ#adapter: you can force just a single adapter to not taste the AST node");return e.forEach(function(e){if("string"==typeof e)if("mozast"===e)e=p.default;else if("xmldom"===e)e=l.default;else if("parse5"===e)e=d.default;else{if("asty"!==e)throw new Error("ASTQ#adapter: unknown built-in adapter");e=v.default}t._adapter.register(e,r)}),this}},{key:"func",value:function(e,t){if(2!==arguments.length)throw new Error("ASTQ#func: invalid number of arguments");return this._funcs.register(e,t),this}},{key:"cache",value:function(e){if(1!==arguments.length)throw new Error("ASTQ#cache: invalid number of arguments");return this._cache.limit(e),this}},{key:"compile",value:function(e,t){if(arguments.length<1)throw new Error("ASTQ#compile: too less arguments");if(arguments.length>2)throw new Error("ASTQ#compile: too many arguments");void 0===t&&(t=!1);var r=this._cache.get(e);return void 0===r&&(r=new E.default,r.compile(e,t),this._cache.set(e,r)),r}},{key:"execute",value:function(e,t,r,n){if(arguments.length<2)throw new Error("ASTQ#execute: too less arguments");if(arguments.length>4)throw new Error("ASTQ#execute: too many arguments");void 0===r&&(r={}),void 0===n&&(n=!1);var u=this._adapter.select(e);if(void 0===u)throw new Error("ASTQ#execute: no suitable adapter found for node");return t.execute(e,u,r,this._funcs,n)}},{key:"query",value:function(e,t,r,n){if(arguments.length<2)throw new Error("ASTQ#query: too less arguments");if(arguments.length>4)throw new Error("ASTQ#query: too many arguments");return void 0===r&&(r={}),void 0===n&&(n=!1),this.execute(e,this.compile(t,n),r,n)}}]),e}();t.exports=N},{"./astq-adapter-asty.js":1,"./astq-adapter-mozast.js":2,"./astq-adapter-parse5.js":3,"./astq-adapter-xmldom.js":4,"./astq-adapter.js":5,"./astq-funcs-std.js":6,"./astq-funcs.js":7,"./astq-query.js":10,"./astq-version.js":12,"cache-lru":"cache-lru"}]},{},[1,2,3,4,5,6,7,8,9,10,11,12,13])(13)});
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],2:[function(_dereq_,module,exports){
(function (global){
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n;n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,n.ASTY=e()}}(function(){return function e(n,t,r){function o(u,a){if(!t[u]){if(!n[u]){var f="function"==typeof _dereq_&&_dereq_;if(!a&&f)return f(u,!0);if(i)return i(u,!0);var s=new Error("Cannot find module '"+u+"'");throw s.code="MODULE_NOT_FOUND",s}var c=t[u]={exports:{}};n[u][0].call(c.exports,function(e){var t=n[u][1][e];return o(t?t:e)},c,c.exports,e,n,t,r)}return t[u].exports}for(var i="function"==typeof _dereq_&&_dereq_,u=0;u<r.length;u++)o(r[u]);return o}({1:[function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),u=function(){function e(){r(this,e)}return i(e,[{key:"init",value:function(e,n,t,r){if(arguments.length<2)throw new Error("init: invalid number of arguments");if(this.ctx=e,this.ASTy=!0,this.T=n,this.L={L:0,C:0,O:0},this.A={},this.C=[],this.P=null,"object"===("undefined"==typeof t?"undefined":o(t)))for(var i in t)t.hasOwnProperty(i)&&this.set(i,t[i]);return"object"===("undefined"==typeof r?"undefined":o(r))&&r instanceof Array&&this.add(r),this}},{key:"type",value:function(e){if(0===arguments.length)return this.T;if(1===arguments.length)return this.T=e,this;throw new Error("type: invalid number of arguments")}},{key:"pos",value:function(e,n,t){if(0===arguments.length)return{line:this.L.L,column:this.L.C,offset:this.L.O};if(arguments.length<=3)return this.L.L=e||0,this.L.C=n||0,this.L.O=t||0,this;throw new Error("pos: invalid number of arguments")}},{key:"set",value:function(){for(var e=this,n=arguments.length,t=Array(n),r=0;r<n;r++)t[r]=arguments[r];if(1===t.length&&"object"===o(t[0]))Object.keys(t[0]).forEach(function(n){e.A[n]=t[0][n]});else{if(2!==t.length)throw new Error("set: invalid number of arguments");this.A[t[0]]=t[1]}return this}},{key:"unset",value:function(){for(var e=this,n=arguments.length,t=Array(n),r=0;r<n;r++)t[r]=arguments[r];if(1===t.length&&"object"===o(t[0])&&t[0]instanceof Array)t[0].forEach(function(n){delete e.A[n]});else{if(1!==t.length)throw new Error("unset: invalid number of arguments");delete this.A[t[0]]}return this}},{key:"get",value:function(e){if(1!==arguments.length)throw new Error("get: invalid number of arguments");if("string"!=typeof e)throw new Error("get: invalid key argument");return this.A[e]}},{key:"attrs",value:function(){return Object.keys(this.A)}},{key:"nth",value:function(){if(null===this.P)return 1;var e=this.P.C.indexOf(this);if(e<0)throw new Error("nth: internal error -- node not in childs of its parent");return e}},{key:"ins",value:function(e){for(var n=this,t=arguments.length,r=Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];if(0===r.length)throw new Error("ins: invalid number of arguments");if(e<0&&(e=this.C.length+1-e),!(0<=e&&e<=this.C.length))throw new Error("ins: invalid position");var u=function(t){if(!n.ctx.isA(t))throw new Error("ins: invalid AST node argument");n.C.splice(e++,0,t),t.P=n};return r.forEach(function(e){"object"===("undefined"==typeof e?"undefined":o(e))&&e instanceof Array?e.forEach(function(e){u(e)}):null!==e&&u(e)}),this}},{key:"add",value:function(){for(var e=this,n=arguments.length,t=Array(n),r=0;r<n;r++)t[r]=arguments[r];if(0===t.length)throw new Error("add: invalid number of arguments");var i=function(n){if(!e.ctx.isA(n))throw new Error("add: invalid AST node argument");e.C.push(n),n.P=e};return t.forEach(function(e){"object"===("undefined"==typeof e?"undefined":o(e))&&e instanceof Array?e.forEach(function(e){i(e)}):null!==e&&i(e)}),this}},{key:"del",value:function(){for(var e=this,n=arguments.length,t=Array(n),r=0;r<n;r++)t[r]=arguments[r];if(0===t.length)throw new Error("del: invalid number of argument");return t.forEach(function(n){if(!e.ctx.isA(n))throw new Error("del: invalid AST node argument");for(var t=!1,r=0;r<e.C.length;r++)if(e.C[r]===n){e.C.splice(r,1),n.P=null,t=!0;break}if(!t)throw new Error("del: AST node not found in childs")}),this}},{key:"childs",value:function(){return this.C}},{key:"parent",value:function(){return this.P}},{key:"serialize",value:function(){return this.ctx.serialize(this.ctx,this)}}]),e}();t.default=u},{}],2:[function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),u=function(){function e(){r(this,e)}return i(e,[{key:"dump",value:function(e){void 0===e&&(e=1/0);var n="";return this.walk(function(t,r){if(!(r>e)){for(var i=0;i<r;i++)n+="    ";n+=t.T+" ";var u=Object.keys(t.A);u.length>0&&!function(){n+="(";var e=!0;u.forEach(function(r){e?e=!1:n+=", ",n+=r+": ";var i=t.A[r];!function(){switch("undefined"==typeof i?"undefined":o(i)){case"boolean":case"number":n+=i.toString();break;case"string":var e=function(e){return e.charCodeAt(0).toString(16).toUpperCase()};n+='"'+i.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(n){return"\\x0"+e(n)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(n){return"\\x"+e(n)}).replace(/[\u0100-\u0FFF]/g,function(n){return"\\u0"+e(n)}).replace(/[\u1000-\uFFFF]/g,function(n){return"\\u"+e(n)})+'"';break;case"object":n+=i instanceof RegExp?i.source:JSON.stringify(i);break;default:n+=JSON.stringify(i)}}()}),n+=") "}(),n+="["+t.L.L+"/"+t.L.C+"]\n"}},"downward"),n}}]),e}();t.default=u},{}],3:[function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),i=function(){function e(){r(this,e)}return o(e,[{key:"merge",value:function(e){var n=this,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!this.ctx.isA(e))throw new Error("merge: invalid AST node argument");if(t){var o=e.pos();this.pos(o.L,o.C,o.O)}return e.attrs().forEach(function(t){var o="undefined"!=typeof r[t]?r[t]:t;null!==o&&n.set(o,e.get(t))}),e.childs().forEach(function(e){n.add(e)}),this}}]),e}();t.default=i},{}],4:[function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),u=function(){function e(){r(this,e)}return i(e,null,[{key:"serialize",value:function(e,n){var t=function e(n){var t={T:n.T,L:{L:n.L.L,C:n.L.C,O:n.L.O}},r=Object.keys(n.A);return r.length>0&&(t.A={},r.forEach(function(e){var r=n.A[e];switch("undefined"==typeof r?"undefined":o(r)){case"boolean":case"number":case"string":t.A[e]=r;break;default:t.A[e]=JSON.parse(JSON.stringify(r))}})),n.C.length>0&&(t.C=n.C.map(function(n){return e(n)})),t};if(!e.isA(n))throw new Error("serialize: not an ASTy node");return JSON.stringify({ASTy:t(n)})}},{key:"unserialize",value:function(e,n){var t=function n(t){var r=e.create(t.T);return r.pos(t.L.L,t.L.C,t.L.O),"object"===o(t.A)&&Object.keys(t.A).forEach(function(e){var n=t.A[e];switch("undefined"==typeof n?"undefined":o(n)){case"boolean":case"number":case"string":r.set(e,n);break;default:r.set(e,JSON.parse(JSON.stringify(n)))}}),"object"===o(t.C)&&t.C instanceof Array&&r.add(t.C.map(function(e){return n(e)})),r},r=JSON.parse(n);if("object"!==("undefined"==typeof r?"undefined":o(r))||"object"!==o(r.ASTy))throw new Error("unserialize: not an ASTy JSON export");return t(r.ASTy)}}]),e}();t.default=u},{}],5:[function(e,n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={major:1,minor:4,micro:8,date:20161120};t.default=r},{}],6:[function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),i=function(){function e(){r(this,e)}return o(e,[{key:"walk",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"downward",t=function t(r,o,i){"downward"!==n&&"both"!==n||e.call(null,r,o,i,"downward"),r.C.forEach(function(e){t(e,o+1,r)}),"upward"!==n&&"both"!==n||e.call(null,r,o,i,"upward")};return t(this,0,null),this}}]),e}();t.default=i},{}],7:[function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),a=e("./asty-base.js"),f=r(a),s=e("./asty-merge.js"),c=r(s),l=e("./asty-walk.js"),y=r(l),d=e("./asty-dump.js"),h=r(d),p=e("./asty-serialize.js"),v=r(p),b=e("./asty-version.js"),g=r(b),m=function(){function e(){var n=this;o(this,e),this.ASTYNode=function(){};var t=[[f.default,"init","type","pos","set","unset","get","attrs","nth","ins","add","del","childs","parent","serialize"],[c.default,"merge"],[y.default,"walk"],[h.default,"dump"]];return t.forEach(function(e){var t=e[0].prototype;e.slice(1).forEach(function(e){n.ASTYNode.prototype[e]=t[e]})}),this}return u(e,[{key:"version",value:function(){return g.default}},{key:"extend",value:function(e){for(var n in e)e.hasOwnProperty(n)&&(this.ASTYNode.prototype[n]=e[n]);return this}},{key:"create",value:function(e){return(new this.ASTYNode).init(this,e)}},{key:"isA",value:function(e){return"object"===("undefined"==typeof e?"undefined":i(e))&&e instanceof this.ASTYNode&&"boolean"==typeof e.ASTy&&e.ASTy===!0}},{key:"serialize",value:function(e){return v.default.serialize(this,e)}},{key:"unserialize",value:function(e){return v.default.unserialize(this,e)}}]),e}();n.exports=m},{"./asty-base.js":1,"./asty-dump.js":2,"./asty-merge.js":3,"./asty-serialize.js":4,"./asty-version.js":5,"./asty-walk.js":6}]},{},[1,2,3,4,5,6,7])(7)});
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],3:[function(_dereq_,module,exports){
"use strict";function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),ASTY=_dereq_("asty"),ASTQ=_dereq_("astq"),ASTQAdapter=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"taste",value:function(){return!0}},{key:"getParentNode",value:function(e){return e.parent()}},{key:"getChildNodes",value:function(e){return e.childs()}},{key:"getNodeType",value:function(e){return e.type()}},{key:"getNodeAttrNames",value:function(e){return e.attrs()}},{key:"getNodeAttrValue",value:function(e,t){return e.get(t)}}]),e}(),ASTYASTQ=function(e){function t(){var e,r;_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));if(!(n instanceof t))return e=new t,_possibleConstructorReturn(n,e);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),o=new ASTQ;return o.adapter(new ASTQAdapter),n.extend({query:function(e,t,r){return o.query(this,e,t,r)}}),r=n,_possibleConstructorReturn(n,r)}return _inherits(t,e),t}(ASTY);module.exports=ASTYASTQ;
},{"astq":1,"asty":2}]},{},[3])(3)
});


//# sourceMappingURL=asty-astq.browser.map