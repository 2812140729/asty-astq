/*
**  ASTy-ASTq -- Abstract Syntax Tree With Integrated Query Engine
**  Copyright (c) 2014-2018 Ralf S. Engelschall <rse@engelschall.com>
**
**  Permission is hereby granted, free of charge, to any person obtaining
**  a copy of this software and associated documentation files (the
**  "Software"), to deal in the Software without restriction, including
**  without limitation the rights to use, copy, modify, merge, publish,
**  distribute, sublicense, and/or sell copies of the Software, and to
**  permit persons to whom the Software is furnished to do so, subject to
**  the following conditions:
**
**  The above copyright notice and this permission notice shall be included
**  in all copies or substantial portions of the Software.
**
**  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
**  EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
**  MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
**  IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY
**  CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,
**  TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE
**  SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
*/

(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.ASTYASTQ = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(_dereq_,module,exports){
(function (global){
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.ASTQ=e()}}(function(){return function e(t,r,n){function u(a,i){if(!r[a]){if(!t[a]){var s="function"==typeof _dereq_&&_dereq_;if(!i&&s)return s(a,!0);if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=r[a]={exports:{}};t[a][0].call(l.exports,function(e){var r=t[a][1][e];return u(r||e)},l,l.exports,e,t,r,n)}return r[a].exports}for(var o="function"==typeof _dereq_&&_dereq_,a=0;a<n.length;a++)u(n[a]);return u}({1:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(){function e(){n(this,e)}return o(e,null,[{key:"taste",value:function(e){return"object"===(void 0===e?"undefined":u(e))&&null!==e&&"boolean"==typeof e.ASTy}},{key:"getParentNode",value:function(e){return e.parent()}},{key:"getChildNodes",value:function(e){return e.childs()}},{key:"getNodeType",value:function(e){return e.type()}},{key:"getNodeAttrNames",value:function(e){return e.attrs()}},{key:"getNodeAttrValue",value:function(e,t){return e.get(t)}}]),e}();r.default=a},{}],2:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(){function e(){n(this,e)}return o(e,null,[{key:"taste",value:function(e){return"object"===(void 0===e?"undefined":u(e))&&null!==e&&"string"==typeof e.type&&""!==e.type}},{key:"getParentNode",value:function(e,t){if("*"!==t&&"parent"!==t)throw new Error('no such axis named "'+t+'" for walking to parent nodes');if(void 0!==e.parent)return e.parent;throw new Error("Your Mozilla SpiderMonkey AST does not support parent node traversal")}},{key:"getChildNodes",value:function(e,t){var r=this,n=[],o=function(e,t){e.hasOwnProperty(t)&&r.taste(e[t])?n.push(e[t]):e.hasOwnProperty(t)&&"object"===u(e[t])&&e[t]instanceof Array&&e[t].forEach(function(e){r.taste(e)&&n.push(e)})};if("*"===t)for(var a in e)o(e,a);else{if(void 0===e[t])throw new Error('no such axis named "'+t+'" for walking to child nodes');o(e,t)}return n}},{key:"getNodeType",value:function(e){return e.type}},{key:"getNodeAttrNames",value:function(e){var t=[];for(var r in e)e.hasOwnProperty(r)&&"object"!==u(e[r])&&"type"!==r&&"loc"!==r&&t.push(r);return t}},{key:"getNodeAttrValue",value:function(e,t){return e.hasOwnProperty(t)&&"object"!==u(e[t])&&"type"!==t&&"loc"!==t?e[t]:void 0}}]),e}();r.default=a},{}],3:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(){function e(){n(this,e)}return o(e,null,[{key:"taste",value:function(e){return"object"===(void 0===e?"undefined":u(e))&&null!==e&&!("object"===("undefined"==typeof Node?"undefined":u(Node))&&e instanceof Node)&&"string"==typeof e.nodeName&&""!==e.nodeName}},{key:"getParentNode",value:function(e){return e.parentNode}},{key:"getChildNodes",value:function(e){return"object"===u(e.childNodes)&&e.childNodes instanceof Array?e.childNodes:[]}},{key:"getNodeType",value:function(e){return e.nodeName}},{key:"getNodeAttrNames",value:function(e){var t=["value"];return"object"===u(e.attrs)&&e.attrs instanceof Array&&(t=t.concat(e.attrs.map(function(e){return e.name}))),t}},{key:"getNodeAttrValue",value:function(e,t){var r=void 0;if("value"===t)r=e.value;else if("object"===u(e.attrs)&&e.attrs instanceof Array){var n=e.attrs.filter(function(e){return e.name===t}).map(function(e){return e.value});1===n.length&&(r=n[0])}return r}}]),e}();r.default=a},{}],4:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(){function e(){n(this,e)}return o(e,null,[{key:"taste",value:function(e){return"object"===("undefined"==typeof Node?"undefined":u(Node))&&null!==e&&e instanceof Node&&"object"===(void 0===e?"undefined":u(e))&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName}},{key:"getParentNode",value:function(e){return e.parentNode}},{key:"getChildNodes",value:function(e){return"object"===u(e.childNodes)&&null!==e.childNodes&&e.hasChildNodes()?Array.prototype.slice.call(e.childNodes,0):[]}},{key:"getNodeType",value:function(e){return"string"==typeof e.nodeName?e.nodeName:"unknown"}},{key:"getNodeAttrNames",value:function(e){return"object"===u(e.attributes)&&null!==e.attributes&&e.hasAttributes()?Array.prototype.slice.call(e.attributes,0).map(function(e){return e.nodeName}):[]}},{key:"getNodeAttrValue",value:function(e,t){return"object"===u(e.attributes)&&null!==e.attributes&&e.hasAttributes()?e.getAttribute(t):void 0}}]),e}();r.default=a},{}],5:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(){function e(){return n(this,e),this._adapters=[],this}return u(e,[{key:"register",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._adapters.unshift({adapter:e,force:t}),this}},{key:"unregister",value:function(e){if(void 0===e)this._adapters=[];else{for(var t=[],r=0;r<this._adapters.length;r++)this._adapters[r].adapter!==e&&t.push(this._adapters[r]);this._adapters=t}return this}},{key:"select",value:function(e){for(var t=0;t<this._adapters.length;t++)if(this._adapters[t].force||this._adapters[t].adapter.taste(e))return this._adapters[t].adapter}}]),e}();r.default=o},{}],6:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=function(e,t){var r=e.getParentNode(t,"*");if(null===r)return 1;for(var n=e.getChildNodes(r,"*"),u=0;u<n.length;u++)if(n[u]===t)return u+1;throw new Error("cannot find myself")},o=function(e,t){for(var r=[];null!==(t=e.getParentNode(t,"*"));)r.push(t);return r},a={type:function(e,t){return e.getNodeType(t)},attrs:function(e,t,r){return void 0===r&&(r=" "),r+e.getNodeAttrNames(t).join(r)+r},depth:function(e,t){for(var r=1,n=t;null!==(n=e.getParentNode(n,"*"));)r++;return r},pos:function(e,t){return u(e,t)},nth:function(e,t,r){r=parseInt(r,10);var n=e.getParentNode(t,"*");if(null!==n){var u=e.getChildNodes(n,"*");r<0&&(r=u.length-(r+1));for(var o=0;o<u.length;o++)if(u[o]===t)return o+1===r;return!1}return 1===r},first:function(e,t){return a.nth(e,t,1)},last:function(e,t){return a.nth(e,t,-1)},count:function(e,t,r){return"object"===(void 0===r?"undefined":n(r))&&r instanceof Array?r.length:"object"===(void 0===r?"undefined":n(r))?Object.keys(r).length:"string"==typeof r?r.length:String(r).length},below:function(e,t,r){if(!e.taste(r))throw new Error('invalid argument to function "below" (node expected)');for(var n=t;null!==(n=e.getParentNode(n,"*"));)if(n===r)return!0;return!1},follows:function(e,t,r){if(!e.taste(r))throw new Error('invalid argument to function "follows" (node expected)');if(t===r)return!1;var n=[t].concat(o(e,t)).reverse(),a=[r].concat(o(e,r)).reverse(),i=Math.min(n.length,a.length),s=void 0;for(s=0;s<i&&n[s]===a[s];s++);if(0===s)throw new Error("internal error: root nodes have to be same same");return s===i?a.length<n.length:u(e,n[s])>u(e,a[s])},in:function(e,t,r){if(!("object"===(void 0===r?"undefined":n(r))&&r instanceof Array))throw new Error('invalid argument to function "in" (array expected)');for(var u=0;u<r.length;u++)if(r[u]===t)return!0;return!1},substr:function(e,t,r,n,u){return String(r).substr(n,u)},index:function(e,t,r,n,u){return String(r).indexOf(n,u)},trim:function(e,t,r){return String(r).trim()},lc:function(e,t,r){return String(r).toLowerCase()},uc:function(e,t,r){return String(r).toUpperCase()}};r.default=a},{}],7:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(){function e(){return n(this,e),this._funcs={},this}return u(e,[{key:"register",value:function(e,t){this._funcs[e]=t}},{key:"run",value:function(e,t){var r=this._funcs[e];if("function"!=typeof r)throw new Error('invalid function "'+e+'"');return r.apply(null,t)}}]),e}();r.default=o},{}],8:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=e("./astq-util.js"),c=n(s),l=e("./astq-query-trace.js"),f=n(l),d=function(e){function t(e,r,n,a){u(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.adapter=e,i.params=r,i.funcs=n,i.trace=a,i}return a(t,e),i(t,[{key:"execQuery",value:function(e,t){var r=this;this.traceBegin(e,t);var n=[];return e.childs().forEach(function(e){n=n.concat(r.execPath(e,t))}),this.traceEnd(e,t,n),n}},{key:"execPath",value:function(e,t){var r=this;this.traceBegin(e,t);var n=[t],u=[],o=!1;return e.childs().forEach(function(e){var t=[];n.forEach(function(n){t=t.concat(r.execStep(e,n))}),n=t,e.get("isResult")&&(o=!0,u=u.concat(n))}),this.traceEnd(e,t,n),o?u:n}},{key:"execStep",value:function(e,t){var r=this;this.traceBegin(e,t);var n=e.childs(),u=null,o=null,a=null,i=0;if(i<n.length&&"Axis"===n[i].type()&&(u=n[i++]),i<n.length&&"Match"===n[i].type()&&(o=n[i++]),i<n.length&&"Filter"===n[i].type()&&(a=n[i++]),null===o)throw new Error("no matching part in query step");var s=[],c=o.get("id"),l=function(e){var t=r.adapter.getNodeType(e);if("*"===c||c===t){var n=!0;null!==a&&(r.execFilter(a,e)||(n=!1)),n&&s.push(e)}};if(null!==u){var f=u.get("op"),d=u.get("type");if("/"===f)this.adapter.getChildNodes(t,d).forEach(function(e){return l(e)});else if("//"===f){var h=function e(t){l(t),r.adapter.getChildNodes(t,d).forEach(function(t){return e(t)})};this.adapter.getChildNodes(t,d).forEach(function(e){return h(e)})}else if("./"===f)l(t),this.adapter.getChildNodes(t,d).forEach(function(e){return l(e)});else if(".//"===f){l(t);var p=function e(t){l(t),r.adapter.getChildNodes(t,d).forEach(function(t){return e(t)})};this.adapter.getChildNodes(t,d).forEach(function(e){return p(e)})}else if("-/"===f){var y=this.adapter.getParentNode(t,"*");if(null!==y){for(var v=this.adapter.getChildNodes(y,d),b=null,g=0;g<v.length&&v[g]!==t;g++)b=v[g];null!==b&&l(b)}}else if("-//"===f){var x=this.adapter.getParentNode(t,"*");if(null!==x){for(var m=this.adapter.getChildNodes(x,d),A=0;A<m.length&&m[A]!==t;A++);for(A--;A>=0;A--)l(m[A])}}else if("+/"===f){var E=this.adapter.getParentNode(t,"*");if(null!==E){var w=this.adapter.getChildNodes(E,d),P=void 0;for(P=0;P<w.length&&w[P]!==t;P++);P<w.length&&l(w[++P])}}else if("+//"===f){var k=this.adapter.getParentNode(t,"*");if(null!==k){var N=this.adapter.getChildNodes(k,d),C=void 0;for(C=0;C<N.length&&N[C]!==t;C++);if(C<N.length)for(C++;C<N.length;C++)l(N[C])}}else if("~/"===f){var S=this.adapter.getParentNode(t,"*");if(null!==S){var j=this.adapter.getChildNodes(S,d),_=void 0;for(_=0;_<j.length&&j[_]!==t;_++);_>0&&l(j[_-1]),_<j.length-1&&l(j[_+1])}}else if("~//"===f){var T=this.adapter.getParentNode(t,"*");if(null!==T)for(var q=this.adapter.getChildNodes(T,d),O=0;O<q.length;O++)q[O]!==t&&l(q[O])}else if("../"===f){var L=this.adapter.getParentNode(t,d);null!==L&&l(L)}else if("..//"===f)for(var B=t;;){var M=this.adapter.getParentNode(B,d);if(null===M)break;l(M),B=M}else if("<//"===f){for(var Q={sentinel:t,take:!0};;){var R=this.adapter.getParentNode(t,"*");if(null===R)break;t=R}var F=function e(t){t===Q.sentinel&&(Q.take=!1),Q.take&&l(t),Q.take&&r.adapter.getChildNodes(t,d).forEach(function(t){return e(t)})};t!==Q.sentinel&&(l(t),this.adapter.getChildNodes(t,d).forEach(function(e){return F(e)})),s=s.reverse()}else if(">//"===f){for(var V={sentinel:t,take:!1};;){var U=this.adapter.getParentNode(t,"*");if(null===U)break;t=U}var z=function e(t){V.take&&l(t),t===V.sentinel&&(V.take=!0),r.adapter.getChildNodes(t,d).forEach(function(t){return e(t)})};this.adapter.getChildNodes(t,d).forEach(function(e){return z(e)})}}else l(t);return this.traceEnd(e,t,s),s}},{key:"execFilter",value:function(e,t){this.traceBegin(e,t);var r=e.childs()[0],n=this.execExpr(r,t);return n=c.default.truthy(n),this.traceEnd(e,t,n),n}},{key:"execExpr",value:function(e,t){switch(e.type()){case"ConditionalBinary":return this.execExprConditionalBinary(e,t);case"ConditionalTernary":return this.execExprConditionalTernary(e,t);case"Logical":return this.execExprLogical(e,t);case"Bitwise":return this.execExprBitwise(e,t);case"Relational":return this.execExprRelational(e,t);case"Arithmetical":return this.execExprArithmetical(e,t);case"Unary":return this.execExprUnary(e,t);case"FuncCall":return this.execExprFuncCall(e,t);case"Attribute":return this.execExprAttribute(e,t);case"Param":return this.execExprParam(e,t);case"LiteralString":return this.execExprLiteralString(e,t);case"LiteralRegExp":return this.execExprLiteralRegExp(e,t);case"LiteralNumber":return this.execExprLiteralNumber(e,t);case"LiteralValue":return this.execExprLiteralValue(e,t);case"Path":return this.execExprPath(e,t)}}},{key:"execExprConditionalBinary",value:function(e,t){this.traceBegin(e,t);var r=this.execExpr(e.childs()[0],t);return c.default.truthy(r)||(r=this.execExpr(e.childs()[1],t)),this.traceEnd(e,t,r),r}},{key:"execExprConditionalTernary",value:function(e,t){this.traceBegin(e,t);var r=this.execExpr(e.childs()[0],t);return r=c.default.truthy(r)?this.execExpr(e.childs()[1],t):this.execExpr(e.childs()[2],t),this.traceEnd(e,t,r),r}},{key:"execExprLogical",value:function(e,t){this.traceBegin(e,t);var r=!1;switch(e.get("op")){case"&&":r=c.default.truthy(this.execExpr(e.childs()[0],t)),r&&(r=r&&c.default.truthy(this.execExpr(e.childs()[1],t)));break;case"||":r=c.default.truthy(this.execExpr(e.childs()[0],t)),r||(r=r||c.default.truthy(this.execExpr(e.childs()[1],t)))}return this.traceEnd(e,t,r),r}},{key:"execExprBitwise",value:function(e,t){this.traceBegin(e,t);var r=c.default.coerce(this.execExpr(e.childs()[0],t),"number"),n=c.default.coerce(this.execExpr(e.childs()[1],t),"number"),u=void 0;switch(e.get("op")){case"&":u=r&n;break;case"|":u=r|n;break;case"<<":u=r<<n;break;case">>":u=r>>n}return this.traceEnd(e,t,u),u}},{key:"execExprRelational",value:function(e,t){this.traceBegin(e,t);var r=this.execExpr(e.childs()[0],t),n=this.execExpr(e.childs()[1],t),u=void 0;switch(e.get("op")){case"==":u=r===n;break;case"!=":u=r!==n;break;case"<=":u=c.default.coerce(r,"number")<=c.default.coerce(n,"number");break;case">=":u=c.default.coerce(r,"number")>=c.default.coerce(n,"number");break;case"<":u=c.default.coerce(r,"number")<c.default.coerce(n,"number");break;case">":u=c.default.coerce(r,"number")>c.default.coerce(n,"number");break;case"=~":u=null!==c.default.coerce(r,"string").match(c.default.coerce(n,"regexp"));break;case"!~":u=null===c.default.coerce(r,"string").match(c.default.coerce(n,"regexp"))}return this.traceEnd(e,t,u),u}},{key:"execExprArithmetical",value:function(e,t){this.traceBegin(e,t);var r=this.execExpr(e.childs()[0],t),n=this.execExpr(e.childs()[1],t),u=void 0;switch(e.get("op")){case"+":u="string"==typeof r?r+c.default.coerce(n,"string"):c.default.coerce(r,"number")+c.default.coerce(n,"number");break;case"-":u=c.default.coerce(r,"number")+c.default.coerce(n,"number");break;case"*":u=c.default.coerce(r,"number")*c.default.coerce(n,"number");break;case"/":u=c.default.coerce(r,"number")/c.default.coerce(n,"number");break;case"%":u=c.default.coerce(r,"number")%c.default.coerce(n,"number");break;case"**":u=Math.pow(c.default.coerce(r,"number"),c.default.coerce(n,"number"))}return this.traceEnd(e,t,u),u}},{key:"execExprUnary",value:function(e,t){this.traceBegin(e,t);var r=this.execExpr(e.childs()[0],t),n=void 0;switch(e.get("op")){case"!":n=!c.default.coerce(r,"boolean");break;case"~":n=~c.default.coerce(r,"number")}return this.traceEnd(e,t,n),n}},{key:"execExprFuncCall",value:function(e,t){var r=this;this.traceBegin(e,t);var n=e.get("id"),u=[this.adapter,t];e.childs().forEach(function(e){u.push(r.execExpr(e,t))});var o=this.funcs.run(n,u);return this.traceEnd(e,t,o),o}},{key:"execExprAttribute",value:function(e,t){this.traceBegin(e,t);var r=e.get("id"),n=this.adapter.getNodeAttrValue(t,r);return this.traceEnd(e,t,n),n}},{key:"execExprParam",value:function(e,t){this.traceBegin(e,t);var r=e.get("id");if(void 0===this.params[r])throw new Error('invalid parameter "'+r+'"');var n=this.params[r];return this.traceEnd(e,t,n),n}},{key:"execExprLiteralString",value:function(e,t){this.traceBegin(e,t);var r=e.get("value");return this.traceEnd(e,t,r),r}},{key:"execExprLiteralRegExp",value:function(e,t){this.traceBegin(e,t);var r=e.get("value");return this.traceEnd(e,t,r),r}},{key:"execExprLiteralNumber",value:function(e,t){this.traceBegin(e,t);var r=e.get("value");return this.traceEnd(e,t,r),r}},{key:"execExprLiteralValue",value:function(e,t){this.traceBegin(e,t);var r=e.get("value");return this.traceEnd(e,t,r),r}},{key:"execExprPath",value:function(e,t){this.traceBegin(e,t);var r=this.execPath(e,t);return this.traceEnd(e,t,r),r}}]),t}(f.default);r.default=d},{"./astq-query-trace.js":9,"./astq-util.js":11}],9:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=e("./astq-util.js"),i=function(e){return e&&e.__esModule?e:{default:e}}(a),s=function(){function e(){n(this,e)}return o(e,[{key:"prefixOf",value:function(e,t){for(var r=0,n=e;null!==(n=n.parent());)r++;var u=i.default.pad("",4*r);for(r=0,n=t;null!==(n=this.adapter.getParentNode(n,"*"));)r++;return{prefix1:u,prefix2:i.default.pad("",4*r)}}},{key:"traceBegin",value:function(e,t){if(this.trace){var r=this.prefixOf(e,t),n=r.prefix1,u=r.prefix2;console.log("ASTQ: execute: | "+i.default.pad(n+e.type()+" (",-60)+" | "+u+this.adapter.getNodeType(t))}}},{key:"traceEnd",value:function(e,t,r){var n=this;if(this.trace){var o=this.prefixOf(e,t),a=o.prefix1,s=o.prefix2,c=void 0;void 0===r?c="undefined":"object"===(void 0===r?"undefined":u(r))&&r instanceof Array?(c="[",r.forEach(function(e){c+="node("+n.adapter.getNodeType(e)+"),"}),c=c.replace(/,$/,"")+"]"):c=(void 0===r?"undefined":u(r))+"("+r+")",c.length>60&&(c=c.substr(0,60)+"..."),console.log("ASTQ: execute: | "+i.default.pad(a+"): "+c,-60)+" | "+s+this.adapter.getNodeType(t))}}}]),e}();r.default=s},{"./astq-util.js":11}],10:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=e("./astq-query-exec.js"),a=function(e){return e&&e.__esModule?e:{default:e}}(o),i=e("asty"),s=e("pegjs-util"),c=function(){function e(t,r,n,u){this.message=t,this.expected=r,this.found=n,this.location=u,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,e)}function t(t,r){function n(){return c(Eu,Au)}function u(e,t){throw t=void 0!==t?t:c(Eu,Au),f(e,t)}function o(e,t){return{type:"literal",text:e,ignoreCase:t}}function a(e,t,r){return{type:"class",parts:e,inverted:t,ignoreCase:r}}function i(e){return{type:"other",description:e}}function s(e){var r,n=wu[e];if(n)return n;for(r=e-1;!wu[r];)r--;for(n=wu[r],n={line:n.line,column:n.column};r<e;)10===t.charCodeAt(r)?(n.line++,n.column=1):n.column++,r++;return wu[e]=n,n}function c(e,t){var r=s(e),n=s(t);return{start:{offset:e,line:r.line,column:r.column},end:{offset:t,line:n.line,column:n.column}}}function l(e){Au<Pu||(Au>Pu&&(Pu=Au,ku=[]),ku.push(e))}function f(t,r){return new e(t,null,null,r)}function d(t,r,n){return new e(e.buildMessage(t,r),t,r,n)}function h(){var e,t,r,n,u,o=38*Au+0,a=Cu[o];return a?(Au=a.nextPos,a.result):(e=Au,t=Y(),t!==W?(r=p(),r!==W?(n=Y(),n!==W?(u=J(),u!==W?(Eu=e,t=te(r),e=t):(Au=e,e=W)):(Au=e,e=W)):(Au=e,e=W)):(Au=e,e=W),Cu[o]={nextPos:Au,result:e},e)}function p(){var e,r,n,u,o,a,i,s,c=38*Au+1,f=Cu[c];if(f)return Au=f.nextPos,f.result;if(e=Au,(r=y())!==W){for(n=[],u=Au,o=Y(),o!==W?(44===t.charCodeAt(Au)?(a=re,Au++):(a=W,0===Nu&&l(ne)),a!==W?(i=Y(),i!==W?(s=y(),s!==W?(o=[o,a,i,s],u=o):(Au=u,u=W)):(Au=u,u=W)):(Au=u,u=W)):(Au=u,u=W);u!==W;)n.push(u),u=Au,o=Y(),o!==W?(44===t.charCodeAt(Au)?(a=re,Au++):(a=W,0===Nu&&l(ne)),a!==W?(i=Y(),i!==W?(s=y(),s!==W?(o=[o,a,i,s],u=o):(Au=u,u=W)):(Au=u,u=W)):(Au=u,u=W)):(Au=u,u=W);n!==W?(Eu=e,r=ue(r,n),e=r):(Au=e,e=W)}else Au=e,e=W;return Cu[c]={nextPos:Au,result:e},e}function y(){var e,t,r,n,u,o,a=38*Au+2,i=Cu[a];if(i)return Au=i.nextPos,i.result;if(e=Au,(t=v())!==W){for(r=[],n=Au,u=Y(),u!==W?(o=b(),o!==W?(u=[u,o],n=u):(Au=n,n=W)):(Au=n,n=W);n!==W;)r.push(n),n=Au,u=Y(),u!==W?(o=b(),o!==W?(u=[u,o],n=u):(Au=n,n=W)):(Au=n,n=W);r!==W?(Eu=e,t=oe(t,r),e=t):(Au=e,e=W)}else Au=e,e=W;return Cu[a]={nextPos:Au,result:e},e}function v(){var e,r,n,u,o,a,i,s,c=38*Au+3,f=Cu[c];return f?(Au=f.nextPos,f.result):(e=Au,r=g(),r===W&&(r=null),r!==W?(n=Y(),n!==W?(u=m(),u!==W?(o=Y(),o!==W?(33===t.charCodeAt(Au)?(a=ae,Au++):(a=W,0===Nu&&l(ie)),a===W&&(a=null),a!==W?(i=Y(),i!==W?(s=A(),s===W&&(s=null),s!==W?(Eu=e,r=se(r,u,a,s),e=r):(Au=e,e=W)):(Au=e,e=W)):(Au=e,e=W)):(Au=e,e=W)):(Au=e,e=W)):(Au=e,e=W)):(Au=e,e=W),Cu[c]={nextPos:Au,result:e},e)}function b(){var e,r,n,u,o,a,i,s,c=38*Au+4,f=Cu[c];return f?(Au=f.nextPos,f.result):(e=Au,r=g(),r!==W?(n=Y(),n!==W?(u=m(),u!==W?(o=Y(),o!==W?(33===t.charCodeAt(Au)?(a=ae,Au++):(a=W,0===Nu&&l(ie)),a===W&&(a=null),a!==W?(i=Y(),i!==W?(s=A(),s===W&&(s=null),s!==W?(Eu=e,r=se(r,u,a,s),e=r):(Au=e,e=W)):(Au=e,e=W)):(Au=e,e=W)):(Au=e,e=W)):(Au=e,e=W)):(Au=e,e=W)):(Au=e,e=W),Cu[c]={nextPos:Au,result:e},e)}function g(){var e,r,n,u=38*Au+5,o=Cu[u];return o?(Au=o.nextPos,o.result):(Nu++,e=Au,r=Au,t.substr(Au,2)===le?(n=le,Au+=2):(n=W,0===Nu&&l(fe)),n===W&&(47===t.charCodeAt(Au)?(n=de,Au++):(n=W,0===Nu&&l(he)),n===W&&(t.substr(Au,3)===pe?(n=pe,Au+=3):(n=W,0===Nu&&l(ye)),n===W&&(t.substr(Au,2)===ve?(n=ve,Au+=2):(n=W,0===Nu&&l(be)),n===W&&(t.substr(Au,3)===ge?(n=ge,Au+=3):(n=W,0===Nu&&l(xe)),n===W&&(t.substr(Au,2)===me?(n=me,Au+=2):(n=W,0===Nu&&l(Ae)),n===W&&(t.substr(Au,3)===Ee?(n=Ee,Au+=3):(n=W,0===Nu&&l(we)),n===W&&(t.substr(Au,2)===Pe?(n=Pe,Au+=2):(n=W,0===Nu&&l(ke)),n===W&&(t.substr(Au,4)===Ne?(n=Ne,Au+=4):(n=W,0===Nu&&l(Ce)),n===W&&(t.substr(Au,3)===Se?(n=Se,Au+=3):(n=W,0===Nu&&l(je)),n===W&&(t.substr(Au,3)===_e?(n=_e,Au+=3):(n=W,0===Nu&&l(Te)),n===W&&(t.substr(Au,2)===qe?(n=qe,Au+=2):(n=W,0===Nu&&l(Oe)),n===W&&(t.substr(Au,3)===Le?(n=Le,Au+=3):(n=W,0===Nu&&l(Be)),n===W&&(t.substr(Au,3)===Me?(n=Me,Au+=3):(n=W,0===Nu&&l(Qe))))))))))))))),r=n!==W?t.substring(r,Au):n,r!==W?(n=x(),n===W&&(n=null),n!==W?(Eu=e,r=Re(r,n),e=r):(Au=e,e=W)):(Au=e,e=W),Nu--,e===W&&(r=W,0===Nu&&l(ce)),Cu[u]={nextPos:Au,result:e},e)}function x(){var e,r,n,u=38*Au+6,o=Cu[u];return o?(Au=o.nextPos,o.result):(e=Au,58===t.charCodeAt(Au)?(r=Fe,Au++):(r=W,0===Nu&&l(Ve)),r!==W?(n=V(),n!==W?(Eu=e,r=Ue(n),e=r):(Au=e,e=W)):(Au=e,e=W),e===W&&(e=Au,58===t.charCodeAt(Au)?(r=Fe,Au++):(r=W,0===Nu&&l(Ve)),r!==W?(n=U(),n!==W?(Eu=e,r=ze(n),e=r):(Au=e,e=W)):(Au=e,e=W)),Cu[u]={nextPos:Au,result:e},e)}function m(){var e,r,n=38*Au+7,u=Cu[n];return u?(Au=u.nextPos,u.result):(e=Au,r=V(),r!==W&&(Eu=e,r=Ie(r)),e=r,e===W&&(e=Au,r=U(),r!==W&&(Eu=e,r=Ze(r)),(e=r)===W&&(e=Au,42===t.charCodeAt(Au)?(r=De,Au++):(r=W,0===Nu&&l($e)),r!==W&&(Eu=e,r=Ye()),e=r)),Cu[n]={nextPos:Au,result:e},e)}function A(){var e,r,n,u,o,a,i=38*Au+8,s=Cu[i];return s?(Au=s.nextPos,s.result):(e=Au,91===t.charCodeAt(Au)?(r=Ge,Au++):(r=W,0===Nu&&l(He)),r!==W?(n=Y(),n!==W?(u=E(),u!==W?(o=Y(),o!==W?(93===t.charCodeAt(Au)?(a=Je,Au++):(a=W,0===Nu&&l(Ke)),a!==W?(Eu=e,r=We(u),e=r):(Au=e,e=W)):(Au=e,e=W)):(Au=e,e=W)):(Au=e,e=W)):(Au=e,e=W),Cu[i]={nextPos:Au,result:e},e)}function E(){var e,r,n,u,o,a,i,s,c,f,d=38*Au+9,h=Cu[d];return h?(Au=h.nextPos,h.result):(e=Au,r=w(),r!==W?(n=Y(),n!==W?(t.substr(Au,2)===Xe?(u=Xe,Au+=2):(u=W,0===Nu&&l(et)),u!==W?(o=Y(),o!==W?(a=w(),a!==W?(Eu=e,r=tt(r,a),e=r):(Au=e,e=W)):(Au=e,e=W)):(Au=e,e=W)):(Au=e,e=W)):(Au=e,e=W),e===W&&(e=Au,r=w(),r!==W?(n=Y(),n!==W?(63===t.charCodeAt(Au)?(u=rt,Au++):(u=W,0===Nu&&l(nt)),u!==W?(o=Y(),o!==W?(a=w(),a!==W?(i=Y(),i!==W?(58===t.charCodeAt(Au)?(s=Fe,Au++):(s=W,0===Nu&&l(Ve)),s!==W?(c=Y(),c!==W?(f=w(),f!==W?(Eu=e,r=ut(r,a,f),e=r):(Au=e,e=W)):(Au=e,e=W)):(Au=e,e=W)):(Au=e,e=W)):(Au=e,e=W)):(Au=e,e=W)):(Au=e,e=W)):(Au=e,e=W)):(Au=e,e=W),e===W&&(e=w())),Cu[d]={nextPos:Au,result:e},e)}function w(){var e,r,n,u,o,a,i=38*Au+10,s=Cu[i];return s?(Au=s.nextPos,s.result):(e=Au,r=P(),r!==W?(n=Y(),n!==W?(u=Au,t.substr(Au,2)===ot?(o=ot,Au+=2):(o=W,0===Nu&&l(at)),u=o!==W?t.substring(u,Au):o,u!==W?(o=Y(),o!==W?(a=w(),a!==W?(Eu=e,r=it(r,u,a),e=r):(Au=e,e=W)):(Au=e,e=W)):(Au=e,e=W)):(Au=e,e=W)):(Au=e,e=W),e===W&&(e=P()),Cu[i]={nextPos:Au,result:e},e)}function P(){var e,r,n,u,o,a,i=38*Au+11,s=Cu[i];return s?(Au=s.nextPos,s.result):(e=Au,r=k(),r!==W?(n=Y(),n!==W?(u=Au,t.substr(Au,2)===st?(o=st,Au+=2):(o=W,0===Nu&&l(ct)),u=o!==W?t.substring(u,Au):o,u!==W?(o=Y(),o!==W?(a=P(),a!==W?(Eu=e,r=it(r,u,a),e=r):(Au=e,e=W)):(Au=e,e=W)):(Au=e,e=W)):(Au=e,e=W)):(Au=e,e=W),e===W&&(e=k()),Cu[i]={nextPos:Au,result:e},e)}function k(){var e,r,n,u,o,a,i=38*Au+12,s=Cu[i];return s?(Au=s.nextPos,s.result):(e=Au,r=N(),r!==W?(n=Y(),n!==W?(u=Au,124===t.charCodeAt(Au)?(o=lt,Au++):(o=W,0===Nu&&l(ft)),u=o!==W?t.substring(u,Au):o,u!==W?(o=Y(),o!==W?(a=k(),a!==W?(Eu=e,r=dt(r,u,a),e=r):(Au=e,e=W)):(Au=e,e=W)):(Au=e,e=W)):(Au=e,e=W)):(Au=e,e=W),e===W&&(e=N()),Cu[i]={nextPos:Au,result:e},e)}function N(){var e,r,n,u,o,a,i=38*Au+13,s=Cu[i];return s?(Au=s.nextPos,s.result):(e=Au,r=C(),r!==W?(n=Y(),n!==W?(u=Au,94===t.charCodeAt(Au)?(o=ht,Au++):(o=W,0===Nu&&l(pt)),u=o!==W?t.substring(u,Au):o,u!==W?(o=Y(),o!==W?(a=N(),a!==W?(Eu=e,r=dt(r,u,a),e=r):(Au=e,e=W)):(Au=e,e=W)):(Au=e,e=W)):(Au=e,e=W)):(Au=e,e=W),e===W&&(e=C()),Cu[i]={nextPos:Au,result:e},e)}function C(){var e,r,n,u,o,a,i=38*Au+14,s=Cu[i];return s?(Au=s.nextPos,s.result):(e=Au,r=S(),r!==W?(n=Y(),n!==W?(u=Au,38===t.charCodeAt(Au)?(o=yt,Au++):(o=W,0===Nu&&l(vt)),u=o!==W?t.substring(u,Au):o,u!==W?(o=Y(),o!==W?(a=C(),a!==W?(Eu=e,r=dt(r,u,a),e=r):(Au=e,e=W)):(Au=e,e=W)):(Au=e,e=W)):(Au=e,e=W)):(Au=e,e=W),e===W&&(e=S()),Cu[i]={nextPos:Au,result:e},e)}function S(){var e,r,n,u,o,a,i=38*Au+15,s=Cu[i];return s?(Au=s.nextPos,s.result):(e=Au,r=j(),r!==W?(n=Y(),n!==W?(u=Au,t.substr(Au,2)===bt?(o=bt,Au+=2):(o=W,0===Nu&&l(gt)),o===W&&(t.substr(Au,2)===xt?(o=xt,Au+=2):(o=W,0===Nu&&l(mt)),o===W&&(t.substr(Au,2)===At?(o=At,Au+=2):(o=W,0===Nu&&l(Et)),o===W&&(t.substr(Au,2)===wt?(o=wt,Au+=2):(o=W,0===Nu&&l(Pt)),o===W&&(60===t.charCodeAt(Au)?(o=kt,Au++):(o=W,0===Nu&&l(Nt)),o===W&&(62===t.charCodeAt(Au)?(o=Ct,Au++):(o=W,0===Nu&&l(St)),o===W&&(t.substr(Au,2)===jt?(o=jt,Au+=2):(o=W,0===Nu&&l(_t)),o===W&&(t.substr(Au,2)===Tt?(o=Tt,Au+=2):(o=W,0===Nu&&l(qt))))))))),u=o!==W?t.substring(u,Au):o,u!==W?(o=Y(),o!==W?(a=S(),a!==W?(Eu=e,r=Ot(r,u,a),e=r):(Au=e,e=W)):(Au=e,e=W)):(Au=e,e=W)):(Au=e,e=W)):(Au=e,e=W),e===W&&(e=j()),Cu[i]={nextPos:Au,result:e},e)}function j(){var e,r,n,u,o,a,i=38*Au+16,s=Cu[i];return s?(Au=s.nextPos,s.result):(e=Au,r=_(),r!==W?(n=Y(),n!==W?(u=Au,t.substr(Au,2)===Lt?(o=Lt,Au+=2):(o=W,0===Nu&&l(Bt)),o===W&&(t.substr(Au,2)===Mt?(o=Mt,Au+=2):(o=W,0===Nu&&l(Qt))),u=o!==W?t.substring(u,Au):o,u!==W?(o=Y(),o!==W?(a=j(),a!==W?(Eu=e,r=dt(r,u,a),e=r):(Au=e,e=W)):(Au=e,e=W)):(Au=e,e=W)):(Au=e,e=W)):(Au=e,e=W),e===W&&(e=_()),Cu[i]={nextPos:Au,result:e},e)}function _(){var e,r,n,u,o,a,i=38*Au+17,s=Cu[i];return s?(Au=s.nextPos,s.result):(e=Au,r=T(),r!==W?(n=Y(),n!==W?(u=Au,43===t.charCodeAt(Au)?(o=Rt,Au++):(o=W,0===Nu&&l(Ft)),o===W&&(45===t.charCodeAt(Au)?(o=Vt,Au++):(o=W,0===Nu&&l(Ut))),u=o!==W?t.substring(u,Au):o,u!==W?(o=Y(),o!==W?(a=_(),a!==W?(Eu=e,r=zt(r,u,a),e=r):(Au=e,e=W)):(Au=e,e=W)):(Au=e,e=W)):(Au=e,e=W)):(Au=e,e=W),e===W&&(e=T()),
Cu[i]={nextPos:Au,result:e},e)}function T(){var e,r,n,u,o,a,i=38*Au+18,s=Cu[i];return s?(Au=s.nextPos,s.result):(e=Au,r=q(),r!==W?(n=Y(),n!==W?(u=Au,t.substr(Au,2)===It?(o=It,Au+=2):(o=W,0===Nu&&l(Zt)),o===W&&(42===t.charCodeAt(Au)?(o=De,Au++):(o=W,0===Nu&&l($e)),o===W&&(47===t.charCodeAt(Au)?(o=de,Au++):(o=W,0===Nu&&l(he)),o===W&&(37===t.charCodeAt(Au)?(o=Dt,Au++):(o=W,0===Nu&&l($t))))),u=o!==W?t.substring(u,Au):o,u!==W?(o=Y(),o!==W?(a=T(),a!==W?(Eu=e,r=zt(r,u,a),e=r):(Au=e,e=W)):(Au=e,e=W)):(Au=e,e=W)):(Au=e,e=W)):(Au=e,e=W),e===W&&(e=q()),Cu[i]={nextPos:Au,result:e},e)}function q(){var e,r,n,u=38*Au+19,o=Cu[u];return o?(Au=o.nextPos,o.result):(e=Au,r=Au,33===t.charCodeAt(Au)?(n=ae,Au++):(n=W,0===Nu&&l(ie)),n===W&&(126===t.charCodeAt(Au)?(n=Yt,Au++):(n=W,0===Nu&&l(Gt))),r=n!==W?t.substring(r,Au):n,r!==W?(n=O(),n!==W?(Eu=e,r=Ht(r,n),e=r):(Au=e,e=W)):(Au=e,e=W),e===W&&(e=O()),Cu[u]={nextPos:Au,result:e},e)}function O(){var e,t=38*Au+20,r=Cu[t];return r?(Au=r.nextPos,r.result):(e=L(),e===W&&(e=M())===W&&(e=Q())===W&&(e=R())===W&&(e=F())===W&&(e=y()),Cu[t]={nextPos:Au,result:e},e)}function L(){var e,r,n,u,o,a,i,s,c=38*Au+21,f=Cu[c];return f?(Au=f.nextPos,f.result):(e=Au,r=V(),r!==W?(n=Y(),n!==W?(40===t.charCodeAt(Au)?(u=Jt,Au++):(u=W,0===Nu&&l(Kt)),u!==W?(o=Y(),o!==W?(a=B(),a===W&&(a=null),a!==W?(i=Y(),i!==W?(41===t.charCodeAt(Au)?(s=Wt,Au++):(s=W,0===Nu&&l(Xt)),s!==W?(Eu=e,r=er(r,a),e=r):(Au=e,e=W)):(Au=e,e=W)):(Au=e,e=W)):(Au=e,e=W)):(Au=e,e=W)):(Au=e,e=W)):(Au=e,e=W),Cu[c]={nextPos:Au,result:e},e)}function B(){var e,r,n,u,o,a,i,s,c=38*Au+22,f=Cu[c];if(f)return Au=f.nextPos,f.result;if(e=Au,(r=E())!==W){for(n=[],u=Au,o=Y(),o!==W?(44===t.charCodeAt(Au)?(a=re,Au++):(a=W,0===Nu&&l(ne)),a!==W?(i=Y(),i!==W?(s=E(),s!==W?(o=[o,a,i,s],u=o):(Au=u,u=W)):(Au=u,u=W)):(Au=u,u=W)):(Au=u,u=W);u!==W;)n.push(u),u=Au,o=Y(),o!==W?(44===t.charCodeAt(Au)?(a=re,Au++):(a=W,0===Nu&&l(ne)),a!==W?(i=Y(),i!==W?(s=E(),s!==W?(o=[o,a,i,s],u=o):(Au=u,u=W)):(Au=u,u=W)):(Au=u,u=W)):(Au=u,u=W);n!==W?(Eu=e,r=tr(r,n),e=r):(Au=e,e=W)}else Au=e,e=W;return Cu[c]={nextPos:Au,result:e},e}function M(){var e,r,n,u=38*Au+23,o=Cu[u];return o?(Au=o.nextPos,o.result):(Nu++,e=Au,64===t.charCodeAt(Au)?(r=nr,Au++):(r=W,0===Nu&&l(ur)),r!==W?(n=V(),n!==W?(Eu=e,r=or(n),e=r):(Au=e,e=W)):(Au=e,e=W),e===W&&(e=Au,64===t.charCodeAt(Au)?(r=nr,Au++):(r=W,0===Nu&&l(ur)),r!==W?(n=U(),n!==W?(Eu=e,r=ar(n),e=r):(Au=e,e=W)):(Au=e,e=W)),Nu--,e===W&&(r=W,0===Nu&&l(rr)),Cu[u]={nextPos:Au,result:e},e)}function Q(){var e,r,n,u,o,a,i=38*Au+24,s=Cu[i];return s?(Au=s.nextPos,s.result):(Nu++,e=Au,123===t.charCodeAt(Au)?(r=sr,Au++):(r=W,0===Nu&&l(cr)),r!==W?(n=Y(),n!==W?(u=V(),u!==W?(o=Y(),o!==W?(125===t.charCodeAt(Au)?(a=lr,Au++):(a=W,0===Nu&&l(fr)),a!==W?(Eu=e,r=dr(u),e=r):(Au=e,e=W)):(Au=e,e=W)):(Au=e,e=W)):(Au=e,e=W)):(Au=e,e=W),Nu--,e===W&&(r=W,0===Nu&&l(ir)),Cu[i]={nextPos:Au,result:e},e)}function R(){var e,t=38*Au+25,r=Cu[t];return r?(Au=r.nextPos,r.result):(e=U(),e===W&&(e=Z())===W&&(e=D())===W&&(e=$()),Cu[t]={nextPos:Au,result:e},e)}function F(){var e,r,n,u,o,a,i=38*Au+26,s=Cu[i];return s?(Au=s.nextPos,s.result):(e=Au,40===t.charCodeAt(Au)?(r=Jt,Au++):(r=W,0===Nu&&l(Kt)),r!==W?(n=Y(),n!==W?(u=E(),u!==W?(o=Y(),o!==W?(41===t.charCodeAt(Au)?(a=Wt,Au++):(a=W,0===Nu&&l(Xt)),a!==W?(Eu=e,r=hr(u),e=r):(Au=e,e=W)):(Au=e,e=W)):(Au=e,e=W)):(Au=e,e=W)):(Au=e,e=W),Cu[i]={nextPos:Au,result:e},e)}function V(){var e,r,n,u,o,a,i,s=38*Au+27,c=Cu[s];if(c)return Au=c.nextPos,c.result;if(Nu++,e=Au,r=Au,n=Au,u=Au,Nu++,o=$(),Nu--,o===W?u=void 0:(Au=u,u=W),u!==W)if(yr.test(t.charAt(Au))?(o=t.charAt(Au),Au++):(o=W,0===Nu&&l(vr)),o!==W){for(a=[],br.test(t.charAt(Au))?(i=t.charAt(Au),Au++):(i=W,0===Nu&&l(gr));i!==W;)a.push(i),br.test(t.charAt(Au))?(i=t.charAt(Au),Au++):(i=W,0===Nu&&l(gr));a!==W?(u=[u,o,a],n=u):(Au=n,n=W)}else Au=n,n=W;else Au=n,n=W;return r=n!==W?t.substring(r,Au):n,r!==W&&(Eu=e,r=xr(r)),e=r,Nu--,e===W&&(r=W,0===Nu&&l(pr)),Cu[s]={nextPos:Au,result:e},e}function U(){var e,r,n,u,o=38*Au+28,a=Cu[o];if(a)return Au=a.nextPos,a.result;if(Nu++,e=Au,34===t.charCodeAt(Au)?(r=Ar,Au++):(r=W,0===Nu&&l(Er)),r!==W){for(n=[],u=z(),u===W&&(wr.test(t.charAt(Au))?(u=t.charAt(Au),Au++):(u=W,0===Nu&&l(Pr)));u!==W;)n.push(u),(u=z())===W&&(wr.test(t.charAt(Au))?(u=t.charAt(Au),Au++):(u=W,0===Nu&&l(Pr)));n!==W?(34===t.charCodeAt(Au)?(u=Ar,Au++):(u=W,0===Nu&&l(Er)),u!==W?(Eu=e,r=kr(n),e=r):(Au=e,e=W)):(Au=e,e=W)}else Au=e,e=W;if(e===W)if(e=Au,39===t.charCodeAt(Au)?(r=Nr,Au++):(r=W,0===Nu&&l(Cr)),r!==W){for(n=[],u=I(),u===W&&(Sr.test(t.charAt(Au))?(u=t.charAt(Au),Au++):(u=W,0===Nu&&l(jr)));u!==W;)n.push(u),(u=I())===W&&(Sr.test(t.charAt(Au))?(u=t.charAt(Au),Au++):(u=W,0===Nu&&l(jr)));n!==W?(39===t.charCodeAt(Au)?(u=Nr,Au++):(u=W,0===Nu&&l(Cr)),u!==W?(Eu=e,r=kr(n),e=r):(Au=e,e=W)):(Au=e,e=W)}else Au=e,e=W;return Nu--,e===W&&(r=W,0===Nu&&l(mr)),Cu[o]={nextPos:Au,result:e},e}function z(){var e,r,n,u,o,a,i,s,c=38*Au+29,f=Cu[c];return f?(Au=f.nextPos,f.result):(Nu++,e=Au,t.substr(Au,2)===Tr?(r=Tr,Au+=2):(r=W,0===Nu&&l(qr)),r!==W&&(Eu=e,r=Or()),e=r,e===W&&(e=Au,t.substr(Au,2)===Lr?(r=Lr,Au+=2):(r=W,0===Nu&&l(Br)),r!==W&&(Eu=e,r=Mr()),(e=r)===W&&(e=Au,t.substr(Au,2)===Qr?(r=Qr,Au+=2):(r=W,0===Nu&&l(Rr)),r!==W&&(Eu=e,r=Fr()),(e=r)===W&&(e=Au,t.substr(Au,2)===Vr?(r=Vr,Au+=2):(r=W,0===Nu&&l(Ur)),r!==W&&(Eu=e,r=zr()),(e=r)===W&&(e=Au,t.substr(Au,2)===Ir?(r=Ir,Au+=2):(r=W,0===Nu&&l(Zr)),r!==W&&(Eu=e,r=Dr()),(e=r)===W&&(e=Au,t.substr(Au,2)===$r?(r=$r,Au+=2):(r=W,0===Nu&&l(Yr)),r!==W&&(Eu=e,r=Gr()),(e=r)===W&&(e=Au,t.substr(Au,2)===Hr?(r=Hr,Au+=2):(r=W,0===Nu&&l(Jr)),r!==W&&(Eu=e,r=Kr()),(e=r)===W&&(e=Au,t.substr(Au,2)===Wr?(r=Wr,Au+=2):(r=W,0===Nu&&l(Xr)),r!==W&&(Eu=e,r=en()),(e=r)===W&&(e=Au,t.substr(Au,2)===tn?(r=tn,Au+=2):(r=W,0===Nu&&l(rn)),r!==W&&(Eu=e,r=nn()),(e=r)===W&&(e=Au,t.substr(Au,2)===un?(r=un,Au+=2):(r=W,0===Nu&&l(on)),r!==W?(n=Au,u=Au,an.test(t.charAt(Au))?(o=t.charAt(Au),Au++):(o=W,0===Nu&&l(sn)),o!==W?(an.test(t.charAt(Au))?(a=t.charAt(Au),Au++):(a=W,0===Nu&&l(sn)),a!==W?(o=[o,a],u=o):(Au=u,u=W)):(Au=u,u=W),n=u!==W?t.substring(n,Au):u,n!==W?(Eu=e,r=cn(n),e=r):(Au=e,e=W)):(Au=e,e=W),e===W&&(e=Au,t.substr(Au,2)===ln?(r=ln,Au+=2):(r=W,0===Nu&&l(fn)),r!==W?(n=Au,u=Au,an.test(t.charAt(Au))?(o=t.charAt(Au),Au++):(o=W,0===Nu&&l(sn)),o!==W?(an.test(t.charAt(Au))?(a=t.charAt(Au),Au++):(a=W,0===Nu&&l(sn)),a!==W?(an.test(t.charAt(Au))?(i=t.charAt(Au),Au++):(i=W,0===Nu&&l(sn)),i!==W?(an.test(t.charAt(Au))?(s=t.charAt(Au),Au++):(s=W,0===Nu&&l(sn)),s!==W?(o=[o,a,i,s],u=o):(Au=u,u=W)):(Au=u,u=W)):(Au=u,u=W)):(Au=u,u=W),n=u!==W?t.substring(n,Au):u,n!==W?(Eu=e,r=cn(n),e=r):(Au=e,e=W)):(Au=e,e=W))))))))))),Nu--,e===W&&(r=W,0===Nu&&l(_r)),Cu[c]={nextPos:Au,result:e},e)}function I(){var e,r,n=38*Au+30,u=Cu[n];return u?(Au=u.nextPos,u.result):(Nu++,e=Au,t.substr(Au,2)===hn?(r=hn,Au+=2):(r=W,0===Nu&&l(pn)),r!==W&&(Eu=e,r=yn()),e=r,Nu--,e===W&&(r=W,0===Nu&&l(dn)),Cu[n]={nextPos:Au,result:e},e)}function Z(){var e,r,n,u,o,a=38*Au+31,i=Cu[a];if(i)return Au=i.nextPos,i.result;if(Nu++,e=Au,96===t.charCodeAt(Au)?(r=bn,Au++):(r=W,0===Nu&&l(gn)),r!==W){for(n=Au,u=[],t.substr(Au,2)===xn?(o=xn,Au+=2):(o=W,0===Nu&&l(mn)),o===W&&(An.test(t.charAt(Au))?(o=t.charAt(Au),Au++):(o=W,0===Nu&&l(En)));o!==W;)u.push(o),t.substr(Au,2)===xn?(o=xn,Au+=2):(o=W,0===Nu&&l(mn)),o===W&&(An.test(t.charAt(Au))?(o=t.charAt(Au),Au++):(o=W,0===Nu&&l(En)));n=u!==W?t.substring(n,Au):u,n!==W?(96===t.charCodeAt(Au)?(u=bn,Au++):(u=W,0===Nu&&l(gn)),u!==W?(Eu=e,r=wn(n),e=r):(Au=e,e=W)):(Au=e,e=W)}else Au=e,e=W;return Nu--,e===W&&(r=W,0===Nu&&l(vn)),Cu[a]={nextPos:Au,result:e},e}function D(){var e,r,n,u,o,a,i,s,c,f,d,h,p=38*Au+32,y=Cu[p];if(y)return Au=y.nextPos,y.result;if(Nu++,e=Au,r=Au,kn.test(t.charAt(Au))?(n=t.charAt(Au),Au++):(n=W,0===Nu&&l(Nn)),n===W&&(n=null),(r=n!==W?t.substring(r,Au):n)!==W)if(t.substr(Au,2)===Cn?(n=Cn,Au+=2):(n=W,0===Nu&&l(Sn)),n!==W){if(u=Au,o=[],jn.test(t.charAt(Au))?(a=t.charAt(Au),Au++):(a=W,0===Nu&&l(_n)),a!==W)for(;a!==W;)o.push(a),jn.test(t.charAt(Au))?(a=t.charAt(Au),Au++):(a=W,0===Nu&&l(_n));else o=W;u=o!==W?t.substring(u,Au):o,u!==W?(Eu=e,r=Tn(r,u),e=r):(Au=e,e=W)}else Au=e,e=W;else Au=e,e=W;if(e===W){if(e=Au,r=Au,kn.test(t.charAt(Au))?(n=t.charAt(Au),Au++):(n=W,0===Nu&&l(Nn)),n===W&&(n=null),(r=n!==W?t.substring(r,Au):n)!==W)if(t.substr(Au,2)===qn?(n=qn,Au+=2):(n=W,0===Nu&&l(On)),n!==W){if(u=Au,o=[],Ln.test(t.charAt(Au))?(a=t.charAt(Au),Au++):(a=W,0===Nu&&l(Bn)),a!==W)for(;a!==W;)o.push(a),Ln.test(t.charAt(Au))?(a=t.charAt(Au),Au++):(a=W,0===Nu&&l(Bn));else o=W;u=o!==W?t.substring(u,Au):o,u!==W?(Eu=e,r=Mn(r,u),e=r):(Au=e,e=W)}else Au=e,e=W;else Au=e,e=W;if(e===W){if(e=Au,r=Au,kn.test(t.charAt(Au))?(n=t.charAt(Au),Au++):(n=W,0===Nu&&l(Nn)),n===W&&(n=null),(r=n!==W?t.substring(r,Au):n)!==W)if(t.substr(Au,2)===Qn?(n=Qn,Au+=2):(n=W,0===Nu&&l(Rn)),n!==W){if(u=Au,o=[],an.test(t.charAt(Au))?(a=t.charAt(Au),Au++):(a=W,0===Nu&&l(sn)),a!==W)for(;a!==W;)o.push(a),an.test(t.charAt(Au))?(a=t.charAt(Au),Au++):(a=W,0===Nu&&l(sn));else o=W;u=o!==W?t.substring(u,Au):o,u!==W?(Eu=e,r=Fn(r,u),e=r):(Au=e,e=W)}else Au=e,e=W;else Au=e,e=W;if(e===W){if(e=Au,r=Au,n=Au,kn.test(t.charAt(Au))?(u=t.charAt(Au),Au++):(u=W,0===Nu&&l(Nn)),u===W&&(u=null),u!==W){for(o=[],Vn.test(t.charAt(Au))?(a=t.charAt(Au),Au++):(a=W,0===Nu&&l(Un));a!==W;)o.push(a),Vn.test(t.charAt(Au))?(a=t.charAt(Au),Au++):(a=W,0===Nu&&l(Un));if(o!==W)if(46===t.charCodeAt(Au)?(a=zn,Au++):(a=W,0===Nu&&l(In)),a!==W){if(i=[],Vn.test(t.charAt(Au))?(s=t.charAt(Au),Au++):(s=W,0===Nu&&l(Un)),s!==W)for(;s!==W;)i.push(s),Vn.test(t.charAt(Au))?(s=t.charAt(Au),Au++):(s=W,0===Nu&&l(Un));else i=W;if(i!==W){if(s=Au,Zn.test(t.charAt(Au))?(c=t.charAt(Au),Au++):(c=W,0===Nu&&l(Dn)),c!==W)if(kn.test(t.charAt(Au))?(f=t.charAt(Au),Au++):(f=W,0===Nu&&l(Nn)),f===W&&(f=null),f!==W){if(d=[],Vn.test(t.charAt(Au))?(h=t.charAt(Au),Au++):(h=W,0===Nu&&l(Un)),h!==W)for(;h!==W;)d.push(h),Vn.test(t.charAt(Au))?(h=t.charAt(Au),Au++):(h=W,0===Nu&&l(Un));else d=W;d!==W?(c=[c,f,d],s=c):(Au=s,s=W)}else Au=s,s=W;else Au=s,s=W;s===W&&(s=null),s!==W?(u=[u,o,a,i,s],n=u):(Au=n,n=W)}else Au=n,n=W}else Au=n,n=W;else Au=n,n=W}else Au=n,n=W;if(r=n!==W?t.substring(r,Au):n,r!==W&&(Eu=e,r=$n(r)),(e=r)===W){if(e=Au,r=Au,n=Au,kn.test(t.charAt(Au))?(u=t.charAt(Au),Au++):(u=W,0===Nu&&l(Nn)),u===W&&(u=null),u!==W){if(o=[],Vn.test(t.charAt(Au))?(a=t.charAt(Au),Au++):(a=W,0===Nu&&l(Un)),a!==W)for(;a!==W;)o.push(a),Vn.test(t.charAt(Au))?(a=t.charAt(Au),Au++):(a=W,0===Nu&&l(Un));else o=W;o!==W?(u=[u,o],n=u):(Au=n,n=W)}else Au=n,n=W;r=n!==W?t.substring(r,Au):n,r!==W&&(Eu=e,r=Yn(r)),e=r}}}}return Nu--,e===W&&(r=W,0===Nu&&l(Pn)),Cu[p]={nextPos:Au,result:e},e}function $(){var e,r,n=38*Au+33,u=Cu[n];return u?(Au=u.nextPos,u.result):(Nu++,e=Au,t.substr(Au,4)===Hn?(r=Hn,Au+=4):(r=W,0===Nu&&l(Jn)),r!==W&&(Eu=e,r=Kn()),e=r,e===W&&(e=Au,t.substr(Au,5)===Wn?(r=Wn,Au+=5):(r=W,0===Nu&&l(Xn)),r!==W&&(Eu=e,r=eu()),(e=r)===W&&(e=Au,t.substr(Au,4)===tu?(r=tu,Au+=4):(r=W,0===Nu&&l(ru)),r!==W&&(Eu=e,r=nu()),(e=r)===W&&(e=Au,t.substr(Au,3)===uu?(r=uu,Au+=3):(r=W,0===Nu&&l(ou)),r!==W&&(Eu=e,r=au()),(e=r)===W&&(e=Au,t.substr(Au,9)===iu?(r=iu,Au+=9):(r=W,0===Nu&&l(su)),r!==W&&(Eu=e,r=cu()),e=r)))),Nu--,e===W&&(r=W,0===Nu&&l(Gn)),Cu[n]={nextPos:Au,result:e},e)}function Y(){var e,t,r=38*Au+34,n=Cu[r];if(n)return Au=n.nextPos,n.result;for(Nu++,e=[],t=G(),t===W&&(t=H());t!==W;)e.push(t),(t=G())===W&&(t=H());return Nu--,e===W&&(t=W,0===Nu&&l(lu)),Cu[r]={nextPos:Au,result:e},e}function G(){var e,r,n,u,o,a,i=38*Au+35,s=Cu[i];if(s)return Au=s.nextPos,s.result;if(Nu++,e=Au,t.substr(Au,2)===du?(r=du,Au+=2):(r=W,0===Nu&&l(hu)),r!==W){for(n=[],u=Au,o=Au,Nu++,t.substr(Au,2)===pu?(a=pu,Au+=2):(a=W,0===Nu&&l(yu)),Nu--,a===W?o=void 0:(Au=o,o=W),o!==W?(t.length>Au?(a=t.charAt(Au),Au++):(a=W,0===Nu&&l(vu)),a!==W?(o=[o,a],u=o):(Au=u,u=W)):(Au=u,u=W);u!==W;)n.push(u),u=Au,o=Au,Nu++,t.substr(Au,2)===pu?(a=pu,Au+=2):(a=W,0===Nu&&l(yu)),Nu--,a===W?o=void 0:(Au=o,o=W),o!==W?(t.length>Au?(a=t.charAt(Au),Au++):(a=W,0===Nu&&l(vu)),a!==W?(o=[o,a],u=o):(Au=u,u=W)):(Au=u,u=W);n!==W?(t.substr(Au,2)===pu?(u=pu,Au+=2):(u=W,0===Nu&&l(yu)),u!==W?(r=[r,n,u],e=r):(Au=e,e=W)):(Au=e,e=W)}else Au=e,e=W;return Nu--,e===W&&(r=W,0===Nu&&l(fu)),Cu[i]={nextPos:Au,result:e},e}function H(){var e,r,n=38*Au+36,u=Cu[n];if(u)return Au=u.nextPos,u.result;if(Nu++,e=[],gu.test(t.charAt(Au))?(r=t.charAt(Au),Au++):(r=W,0===Nu&&l(xu)),r!==W)for(;r!==W;)e.push(r),gu.test(t.charAt(Au))?(r=t.charAt(Au),Au++):(r=W,0===Nu&&l(xu));else e=W;return Nu--,e===W&&(r=W,0===Nu&&l(bu)),Cu[n]={nextPos:Au,result:e},e}function J(){var e,r,n=38*Au+37,u=Cu[n];return u?(Au=u.nextPos,u.result):(Nu++,e=Au,Nu++,t.length>Au?(r=t.charAt(Au),Au++):(r=W,0===Nu&&l(vu)),Nu--,r===W?e=void 0:(Au=e,e=W),Nu--,e===W&&(r=W,0===Nu&&l(mu)),Cu[n]={nextPos:Au,result:e},e)}r=void 0!==r?r:{};var K,W={},X={query:h},ee=h,te=function(e){return e},re=",",ne=o(",",!1),ue=function(e,t){return ju("Query").add(Su(e,t,3))},oe=function(e,t){return ju("Path").add(Su(e,t,1))},ae="!",ie=o("!",!1),se=function(e,t,r,n){return ju("Step").add(e,t,n).set(null!==r?{isResult:!0}:{})},ce=i("axis"),le="//",fe=o("//",!1),de="/",he=o("/",!1),pe="-//",ye=o("-//",!1),ve="-/",be=o("-/",!1),ge="+//",xe=o("+//",!1),me="+/",Ae=o("+/",!1),Ee="~//",we=o("~//",!1),Pe="~/",ke=o("~/",!1),Ne="..//",Ce=o("..//",!1),Se="../",je=o("../",!1),_e=".//",Te=o(".//",!1),qe="./",Oe=o("./",!1),Le="<//",Be=o("<//",!1),Me=">//",Qe=o(">//",!1),Re=function(e,t){return ju("Axis").set({op:e,type:null!==t?t:"*"})},Fe=":",Ve=o(":",!1),Ue=function(e){return e.get("id")},ze=function(e){return e.get("value")},Ie=function(e){return ju("Match").merge(e)},Ze=function(e){return ju("Match").set({id:e.get("value")})},De="*",$e=o("*",!1),Ye=function(){return ju("Match").set({id:"*"})},Ge="[",He=o("[",!1),Je="]",Ke=o("]",!1),We=function(e){return ju("Filter").add(e)},Xe="?:",et=o("?:",!1),tt=function(e,t){return ju("ConditionalBinary").add(e,t)},rt="?",nt=o("?",!1),ut=function(e,t,r){return ju("ConditionalTernary").add(e,t,r)},ot="||",at=o("||",!1),it=function(e,t,r){return ju("Logical").set({op:t}).add(e,r)},st="&&",ct=o("&&",!1),lt="|",ft=o("|",!1),dt=function(e,t,r){return ju("Bitwise").set({op:t}).add(e,r)},ht="^",pt=o("^",!1),yt="&",vt=o("&",!1),bt="==",gt=o("==",!1),xt="!=",mt=o("!=",!1),At="<=",Et=o("<=",!1),wt=">=",Pt=o(">=",!1),kt="<",Nt=o("<",!1),Ct=">",St=o(">",!1),jt="=~",_t=o("=~",!1),Tt="!~",qt=o("!~",!1),Ot=function(e,t,r){return ju("Relational").set({op:t}).add(e,r)},Lt="<<",Bt=o("<<",!1),Mt=">>",Qt=o(">>",!1),Rt="+",Ft=o("+",!1),Vt="-",Ut=o("-",!1),zt=function(e,t,r){return ju("Arithmetical").set({op:t}).add(e,r)},It="**",Zt=o("**",!1),Dt="%",$t=o("%",!1),Yt="~",Gt=o("~",!1),Ht=function(e,t){return ju("Unary").set({op:e}).add(t)},Jt="(",Kt=o("(",!1),Wt=")",Xt=o(")",!1),er=function(e,t){return ju("FuncCall").merge(e).add(t)},tr=function(e,t){return Su(e,t,3)},rr=i("node attribute"),nr="@",ur=o("@",!1),or=function(e){return ju("Attribute").merge(e)},ar=function(e){return ju("Attribute").set({id:e.get("value")})},ir=i("query parameter reference"),sr="{",cr=o("{",!1),lr="}",fr=o("}",!1),dr=function(e){return ju("Param").merge(e)},hr=function(e){return e},pr=i("identifier"),yr=/^[a-zA-Z_]/,vr=a([["a","z"],["A","Z"],"_"],!1,!1),br=/^[a-zA-Z0-9_\-]/,gr=a([["a","z"],["A","Z"],["0","9"],"_","-"],!1,!1),xr=function(e){return ju("Identifier").set({id:e})},mr=i("quoted string literal"),Ar='"',Er=o('"',!1),wr=/^[^"]/,Pr=a(['"'],!0,!1),kr=function(e){return ju("LiteralString").set({value:e.join("")})},Nr="'",Cr=o("'",!1),Sr=/^[^']/,jr=a(["'"],!0,!1),_r=i("escaped double-quoted-string character"),Tr="\\\\",qr=o("\\\\",!1),Or=function(){return"\\"},Lr='\\"',Br=o('\\"',!1),Mr=function(){return'"'},Qr="\\b",Rr=o("\\b",!1),Fr=function(){return"\b"},Vr="\\v",Ur=o("\\v",!1),zr=function(){return"\v"},Ir="\\f",Zr=o("\\f",!1),Dr=function(){return"\f"},$r="\\t",Yr=o("\\t",!1),Gr=function(){return"\t"},Hr="\\r",Jr=o("\\r",!1),Kr=function(){return"\r"},Wr="\\n",Xr=o("\\n",!1),en=function(){return"\n"},tn="\\e",rn=o("\\e",!1),nn=function(){return""},un="\\x",on=o("\\x",!1),an=/^[0-9a-fA-F]/,sn=a([["0","9"],["a","f"],["A","F"]],!1,!1),cn=function(e){return String.fromCharCode(parseInt(e,16))},ln="\\u",fn=o("\\u",!1),dn=i("escaped single-quoted-string character"),hn="\\'",pn=o("\\'",!1),yn=function(){return"'"},vn=i("regular expression literal"),bn="`",gn=o("`",!1),xn="\\`",mn=o("\\`",!1),An=/^[^`]/,En=a(["`"],!0,!1),wn=function(e){var t;try{t=new RegExp(e.replace(/\\`/g,"`"))}catch(e){u(e.message)}return ju("LiteralRegExp").set({value:t})},Pn=i("numeric literal"),kn=/^[+\-]/,Nn=a(["+","-"],!1,!1),Cn="0b",Sn=o("0b",!1),jn=/^[01]/,_n=a(["0","1"],!1,!1),Tn=function(e,t){return ju("LiteralNumber").set({value:parseInt(e+t,2)})},qn="0o",On=o("0o",!1),Ln=/^[0-7]/,Bn=a([["0","7"]],!1,!1),Mn=function(e,t){return ju("LiteralNumber").set({value:parseInt(e+t,8)})},Qn="0x",Rn=o("0x",!1),Fn=function(e,t){return ju("LiteralNumber").set({value:parseInt(e+t,16)})},Vn=/^[0-9]/,Un=a([["0","9"]],!1,!1),zn=".",In=o(".",!1),Zn=/^[eE]/,Dn=a(["e","E"],!1,!1),$n=function(e){return ju("LiteralNumber").set({value:parseFloat(e)})},Yn=function(e){return ju("LiteralNumber").set({value:parseInt(e,10)})},Gn=i("global value"),Hn="true",Jn=o("true",!1),Kn=function(){return ju("LiteralValue").set({value:!0})},Wn="false",Xn=o("false",!1),eu=function(){return ju("LiteralValue").set({value:!1})},tu="null",ru=o("null",!1),nu=function(){return ju("LiteralValue").set({value:null})},uu="NaN",ou=o("NaN",!1),au=function(){return ju("LiteralValue").set({value:NaN})},iu="undefined",su=o("undefined",!1),cu=function(){return ju("LiteralValue").set({value:void 0})},lu=i("optional blank"),fu=i("multi-line comment"),du="/*",hu=o("/*",!1),pu="*/",yu=o("*/",!1),vu=function(){return{type:"any"}}(),bu=i("any whitespaces"),gu=/^[ \t\r\n]/,xu=a([" ","\t","\r","\n"],!1,!1),mu=i("end of file"),Au=0,Eu=0,wu=[{line:1,column:1}],Pu=0,ku=[],Nu=0,Cu={};if("startRule"in r){if(!(r.startRule in X))throw new Error("Can't start parsing from rule \""+r.startRule+'".');ee=X[r.startRule]}var Su=r.util.makeUnroll(n,r),ju=r.util.makeAST(n,r);if((K=ee())!==W&&Au===t.length)return K;throw K!==W&&Au<t.length&&l(function(){return{type:"end"}}()),d(ku,Pu<t.length?t.charAt(Pu):null,Pu<t.length?c(Pu,Pu+1):c(Pu,Pu))}return function(e,t){function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r}(e,Error),e.buildMessage=function(e,t){function r(e){return e.charCodeAt(0).toString(16).toUpperCase()}function n(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+r(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+r(e)})}function u(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+r(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+r(e)})}function o(e){return a[e.type](e)}var a={literal:function(e){return'"'+n(e.text)+'"'},class:function(e){var t,r="";for(t=0;t<e.parts.length;t++)r+=e.parts[t]instanceof Array?u(e.parts[t][0])+"-"+u(e.parts[t][1]):u(e.parts[t]);return"["+(e.inverted?"^":"")+r+"]"},any:function(e){return"any character"},end:function(e){return"end of input"},other:function(e){return e.description}};return"Expected "+function(e){var t,r,n=new Array(e.length);for(t=0;t<e.length;t++)n[t]=o(e[t]);if(n.sort(),n.length>0){for(t=1,r=1;t<n.length;t++)n[t-1]!==n[t]&&(n[r]=n[t],r++);n.length=r}switch(n.length){case 1:return n[0];case 2:return n[0]+" or "+n[1];default:return n.slice(0,-1).join(", ")+", or "+n[n.length-1]}}(e)+" but "+function(e){return e?'"'+n(e)+'"':"end of input"}(t)+" found."},{SyntaxError:e,parse:t}}(),l=function(){function e(t){n(this,e),this.asty=new i,this.ast=null,t&&this.compile(t)}return u(e,[{key:"compile",value:function(e,t){var r=this;t&&console.log("ASTQ: compile: +-------------------------------------------------------------------------------------------------------\nASTQ: compile: | "+e);var n=s.parse(c,e,{startRule:"query",makeAST:function(e,t,n,u){return r.asty.create.apply(r.asty,u).pos(e,t,n)}});if(null!==n.error)throw new Error("ASTQ: compile: query parsing failed:\n"+s.errorMessage(n.error,!0).replace(/^/gm,"ERROR: "));return this.ast=n.ast,t&&console.log("ASTQ: compile: +-------------------------------------------------------------------------------------------------------\n"+this.dump().replace(/\n$/,"").replace(/^/gm,"ASTQ: compile: | ")),this}},{key:"dump",value:function(){return this.ast.dump()}},{key:"execute",value:function(e,t,r,n,u){return u&&console.log("ASTQ: execute: +--------------------------------------------------------------+----------------------------------------"),new a.default(t,r,n,u).execQuery(this.ast,e)}}]),e}();r.default=l},{"./astq-query-exec.js":8,asty:"asty","pegjs-util":"pegjs-util"}],11:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(){function e(){n(this,e)}return o(e,null,[{key:"pad",value:function(e,t){var r=t<0?-t:t;if(e.length>r)e=e.substr(0,r);else{var n=Array(r+1-e.length).join(" ");e=t<0?e+n:n+e}return e}},{key:"truthy",value:function(e){var t=void 0;switch(void 0===e?"undefined":u(e)){case"boolean":t=e;break;case"number":t=0!==e&&!isNaN(e);break;case"string":t=""!==e;break;case"object":t=!1,null!==e&&(t=!0,e instanceof Array&&(t=e.length>0));break;default:t=!1}return t}},{key:"coerce",value:function(e,t){if((void 0===e?"undefined":u(e))!==t)try{switch(t){case"boolean":"boolean"!=typeof e&&(e=Boolean(e));break;case"number":"number"!=typeof e&&(e=Number(e));break;case"string":"string"!=typeof e&&(e=String(e));break;case"regexp":"object"===(void 0===e?"undefined":u(e))&&e instanceof RegExp||(e=new RegExp(e))}}catch(e){throw new Error("cannot coerce value into type "+t)}return e}}]),e}();r.default=a},{}],12:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={major:2,minor:1,micro:0,date:20180318};r.default=n},{}],13:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=e("./astq-adapter.js"),s=n(i),c=e("./astq-adapter-xmldom.js"),l=n(c),f=e("./astq-adapter-parse5.js"),d=n(f),h=e("./astq-adapter-mozast.js"),p=n(h),y=e("./astq-adapter-asty.js"),v=n(y),b=e("./astq-funcs.js"),g=n(b),x=e("./astq-funcs-std.js"),m=n(x),A=e("./astq-query.js"),E=n(A),w=e("./astq-version.js"),P=n(w),k=e("cache-lru"),N=function(){function e(){u(this,e),this._adapter=(new s.default).register(l.default,!1).register(d.default,!1).register(p.default,!1).register(v.default,!1),this._funcs=new g.default;for(var t in m.default)this.func(t,m.default[t]);this._cache=new k}return a(e,[{key:"version",value:function(){return P.default}},{key:"adapter",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(arguments.length<1||arguments.length>2)throw new Error("ASTQ#adapter: invalid number of arguments");if(this._adapter.unregister(),"object"===(void 0===e?"undefined":o(e))&&e instanceof Array||(e=[e]),e.length>1&&r)throw new Error("ASTQ#adapter: you can force just a single adapter to not taste the AST node");return e.forEach(function(e){if("string"==typeof e)if("mozast"===e)e=p.default;else if("xmldom"===e)e=l.default;else if("parse5"===e)e=d.default;else{if("asty"!==e)throw new Error("ASTQ#adapter: unknown built-in adapter");e=v.default}t._adapter.register(e,r)}),this}},{key:"func",value:function(e,t){if(2!==arguments.length)throw new Error("ASTQ#func: invalid number of arguments");return this._funcs.register(e,t),this}},{key:"cache",value:function(e){if(1!==arguments.length)throw new Error("ASTQ#cache: invalid number of arguments");return this._cache.limit(e),this}},{key:"compile",value:function(e,t){if(arguments.length<1)throw new Error("ASTQ#compile: too less arguments");if(arguments.length>2)throw new Error("ASTQ#compile: too many arguments");void 0===t&&(t=!1);var r=this._cache.get(e);return void 0===r&&(r=new E.default,r.compile(e,t),this._cache.set(e,r)),r}},{key:"execute",value:function(e,t,r,n){if(arguments.length<2)throw new Error("ASTQ#execute: too less arguments");if(arguments.length>4)throw new Error("ASTQ#execute: too many arguments");void 0===r&&(r={}),void 0===n&&(n=!1);var u=this._adapter.select(e);if(void 0===u)throw new Error("ASTQ#execute: no suitable adapter found for node");return t.execute(e,u,r,this._funcs,n)}},{key:"query",value:function(e,t,r,n){if(arguments.length<2)throw new Error("ASTQ#query: too less arguments");if(arguments.length>4)throw new Error("ASTQ#query: too many arguments");return void 0===r&&(r={}),void 0===n&&(n=!1),this.execute(e,this.compile(t,n),r,n)}}]),e}();t.exports=N},{"./astq-adapter-asty.js":1,"./astq-adapter-mozast.js":2,"./astq-adapter-parse5.js":3,"./astq-adapter-xmldom.js":4,"./astq-adapter.js":5,"./astq-funcs-std.js":6,"./astq-funcs.js":7,"./astq-query.js":10,"./astq-version.js":12,"cache-lru":"cache-lru"}]},{},[1,2,3,4,5,6,7,8,9,10,11,12,13])(13)});
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],2:[function(_dereq_,module,exports){
(function (global){
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n;n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,n.ASTY=e()}}(function(){return function e(n,t,r){function i(u,a){if(!t[u]){if(!n[u]){var f="function"==typeof _dereq_&&_dereq_;if(!a&&f)return f(u,!0);if(o)return o(u,!0);var l=new Error("Cannot find module '"+u+"'");throw l.code="MODULE_NOT_FOUND",l}var c=t[u]={exports:{}};n[u][0].call(c.exports,function(e){var t=n[u][1][e];return i(t||e)},c,c.exports,e,n,t,r)}return t[u].exports}for(var o="function"==typeof _dereq_&&_dereq_,u=0;u<r.length;u++)i(r[u]);return i}({1:[function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),u=function(){function e(){r(this,e)}return o(e,[{key:"init",value:function(e,n,t,r){if(arguments.length<2)throw new Error("init: invalid number of arguments");if(this.ctx=e,this.ASTy=!0,this.T=n,this.L={L:0,C:0,O:0},this.A={},this.C=[],this.P=null,"object"===(void 0===t?"undefined":i(t)))for(var o in t)t.hasOwnProperty(o)&&this.set(o,t[o]);return"object"===(void 0===r?"undefined":i(r))&&r instanceof Array&&this.add(r),this}},{key:"create",value:function(e,n,t){return this.ctx.create(e,n,t)}},{key:"type",value:function(e){if(0===arguments.length)return this.T;if(1===arguments.length)return this.T=e,this;throw new Error("type: invalid number of arguments")}},{key:"pos",value:function(e,n,t){if(0===arguments.length)return{line:this.L.L,column:this.L.C,offset:this.L.O};if(arguments.length<=3)return this.L.L=e||0,this.L.C=n||0,this.L.O=t||0,this;throw new Error("pos: invalid number of arguments")}},{key:"set",value:function(){for(var e=this,n=arguments.length,t=Array(n),r=0;r<n;r++)t[r]=arguments[r];if(1===t.length&&"object"===i(t[0]))Object.keys(t[0]).forEach(function(n){e.A[n]=t[0][n]});else{if(2!==t.length)throw new Error("set: invalid number of arguments");this.A[t[0]]=t[1]}return this}},{key:"unset",value:function(){for(var e=this,n=arguments.length,t=Array(n),r=0;r<n;r++)t[r]=arguments[r];if(1===t.length&&"object"===i(t[0])&&t[0]instanceof Array)t[0].forEach(function(n){delete e.A[n]});else{if(1!==t.length)throw new Error("unset: invalid number of arguments");delete this.A[t[0]]}return this}},{key:"get",value:function(e){if(1!==arguments.length)throw new Error("get: invalid number of arguments");if("string"!=typeof e)throw new Error("get: invalid key argument");return this.A[e]}},{key:"attrs",value:function(){return Object.keys(this.A)}},{key:"nth",value:function(){if(null===this.P)return 1;var e=this.P.C.indexOf(this);if(e<0)throw new Error("nth: internal error -- node not in childs of its parent");return e}},{key:"ins",value:function(e){for(var n=this,t=arguments.length,r=Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];if(0===r.length)throw new Error("ins: invalid number of arguments");if(e<0&&(e=this.C.length+1-e),!(0<=e&&e<=this.C.length))throw new Error("ins: invalid position");var u=function(t){if(!n.ctx.isA(t))throw new Error("ins: invalid AST node argument");n.C.splice(e++,0,t),t.P=n};return r.forEach(function(e){"object"===(void 0===e?"undefined":i(e))&&e instanceof Array?e.forEach(function(e){u(e)}):null!==e&&u(e)}),this}},{key:"add",value:function(){for(var e=this,n=arguments.length,t=Array(n),r=0;r<n;r++)t[r]=arguments[r];if(0===t.length)throw new Error("add: invalid number of arguments");var o=function(n){if(!e.ctx.isA(n))throw new Error("add: invalid AST node argument");e.C.push(n),n.P=e};return t.forEach(function(e){"object"===(void 0===e?"undefined":i(e))&&e instanceof Array?e.forEach(function(e){o(e)}):null!==e&&o(e)}),this}},{key:"del",value:function(){for(var e=this,n=arguments.length,t=Array(n),r=0;r<n;r++)t[r]=arguments[r];if(0===t.length)throw new Error("del: invalid number of arguments");return t.forEach(function(n){if(!e.ctx.isA(n))throw new Error("del: invalid AST node argument");for(var t=!1,r=0;r<e.C.length;r++)if(e.C[r]===n){e.C.splice(r,1),n.P=null,t=!0;break}if(!t)throw new Error("del: AST node not found in childs")}),this}},{key:"childs",value:function(){if(arguments.length>2)throw new Error("childs: invalid number of arguments");if(2===arguments.length&&"number"==typeof(arguments.length<=0?void 0:arguments[0])&&"number"==typeof(arguments.length<=1?void 0:arguments[1]))return this.C.slice(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1]);if(1===arguments.length&&"number"==typeof(arguments.length<=0?void 0:arguments[0]))return this.C.slice(arguments.length<=0?void 0:arguments[0]);if(0===arguments.length)return this.C;throw new Error("childs: invalid type of arguments")}},{key:"child",value:function(e){if("number"!=typeof e)throw new Error("child: invalid argument");return e<this.C.length?this.C[e]:null}},{key:"parent",value:function(){return this.P}},{key:"serialize",value:function(){return this.ctx.serialize(this.ctx,this)}}]),e}();t.default=u},{}],2:[function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),u={mid:{unicode:String.fromCharCode(9500),ascii:"+"},last:{unicode:String.fromCharCode(9492),ascii:"+"},down:{unicode:String.fromCharCode(9474),ascii:"|"},left:{unicode:String.fromCharCode(9472),ascii:"-"}},a=function(){function e(){r(this,e)}return o(e,[{key:"dump",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1/0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e,n){return n},t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r="",o=this;return this.walk(function(a,f){if(!(f>e)){if(f>0){var l=function(e){var n=0,t=0;return null!==e.P&&(n=e.P.C.indexOf(e),t=e.P.C.length-1),{nth:n,max:t}},c=l(a),s=c.nth,h=c.max,d=" ";d=t?""+u.left.unicode+u.left.unicode+d:""+u.left.ascii+u.left.ascii+d,d=s<h?""+(t?u.mid.unicode:u.mid.ascii)+d:""+(t?u.last.unicode:u.last.ascii)+d;for(var y=a.P;null!==y&&y!==o;y=y.P)if(null!==y.P){var v=l(y),p=v.nth,b=v.max;d=p<b?(t?u.down.unicode:u.down.ascii)+"   "+d:"    "+d}r+=n("tree",d)}r+=n("type",a.T)+" ";var g=Object.keys(a.A);if(g.length>0){r+=n("parenthesis","(");var m=!0;g.forEach(function(e){m?m=!1:r+=n("comma",",")+" ",r+=n("key",e)+n("colon",":")+" ";var t=a.A[e];switch(void 0===t?"undefined":i(t)){case"boolean":case"number":r+=n("value",t.toString());break;case"string":var o=function(e){return e.charCodeAt(0).toString(16).toUpperCase()};r+=n("value",'"'+t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(e){return"\\x0"+o(e)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(e){return"\\x"+o(e)}).replace(/[\u0100-\u0FFF]/g,function(e){return"\\u0"+o(e)}).replace(/[\u1000-\uFFFF]/g,function(e){return"\\u"+o(e)})+'"');break;case"object":t instanceof RegExp?r+=n("value","/"+t.source+"/"):r+=n("value",JSON.stringify(t));break;default:r+=n("value",JSON.stringify(t))}}),r+=n("parenthesis",")")+" "}r+=n("position",n("bracket","[")+n("line",a.L.L)+n("slash",",")+n("column",a.L.C)+n("bracket","]")),r+="\n"}},"downward"),r}}]),e}();t.default=a},{}],3:[function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),o=function(){function e(){r(this,e)}return i(e,[{key:"merge",value:function(e){var n=this,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null===e)return this;if(!this.ctx.isA(e))throw new Error("merge: invalid AST node argument");if(t){var i=e.pos();this.pos(i.L,i.C,i.O)}return e.attrs().forEach(function(t){var i=void 0!==r[t]?r[t]:t;null!==i&&n.set(i,e.get(t))}),e.childs().forEach(function(e){n.add(e)}),this}}]),e}();t.default=o},{}],4:[function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),u=function(){function e(){r(this,e)}return o(e,null,[{key:"serialize",value:function(e,n){if(!e.isA(n))throw new Error("serialize: not an ASTy node");return JSON.stringify({ASTy:function e(n){var t={T:n.T,L:{L:n.L.L,C:n.L.C,O:n.L.O}},r=Object.keys(n.A);return r.length>0&&(t.A={},r.forEach(function(e){var r=n.A[e];switch(void 0===r?"undefined":i(r)){case"boolean":case"number":case"string":t.A[e]=r;break;default:t.A[e]=JSON.parse(JSON.stringify(r))}})),n.C.length>0&&(t.C=n.C.map(function(n){return e(n)})),t}(n)})}},{key:"unserialize",value:function(e,n){var t=JSON.parse(n);if("object"!==(void 0===t?"undefined":i(t))||"object"!==i(t.ASTy))throw new Error("unserialize: not an ASTy JSON export");return function n(t){var r=e.create(t.T);return r.pos(t.L.L,t.L.C,t.L.O),"object"===i(t.A)&&Object.keys(t.A).forEach(function(e){var n=t.A[e];switch(void 0===n?"undefined":i(n)){case"boolean":case"number":case"string":r.set(e,n);break;default:r.set(e,JSON.parse(JSON.stringify(n)))}}),"object"===i(t.C)&&t.C instanceof Array&&r.add(t.C.map(function(e){return n(e)})),r}(t.ASTy)}}]),e}();t.default=u},{}],5:[function(e,n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={major:1,minor:6,micro:0,date:20180317};t.default=r},{}],6:[function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),o=function(){function e(){r(this,e)}return i(e,[{key:"walk",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"downward";return function t(r,i,o){"downward"!==n&&"both"!==n||e.call(null,r,i,o,"downward"),r.C.forEach(function(e){t(e,i+1,r)}),"upward"!==n&&"both"!==n||e.call(null,r,i,o,"upward")}(this,0,null),this}}]),e}();t.default=o},{}],7:[function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),a=e("./asty-base.js"),f=r(a),l=e("./asty-merge.js"),c=r(l),s=e("./asty-walk.js"),h=r(s),d=e("./asty-dump.js"),y=r(d),v=e("./asty-serialize.js"),p=r(v),b=e("./asty-version.js"),g=r(b),m=function(){function e(){var n=this;return i(this,e),this.ASTYNode=function(){},[[f.default,"init","create","type","pos","set","unset","get","attrs","nth","ins","add","del","childs","child","parent","serialize"],[c.default,"merge"],[h.default,"walk"],[y.default,"dump"]].forEach(function(e){var t=e[0].prototype;e.slice(1).forEach(function(e){n.ASTYNode.prototype[e]=t[e]})}),this}return u(e,[{key:"version",value:function(){return g.default}},{key:"extend",value:function(e){for(var n in e)e.hasOwnProperty(n)&&(this.ASTYNode.prototype[n]=e[n]);return this}},{key:"create",value:function(e,n,t){return(new this.ASTYNode).init(this,e,n,t)}},{key:"isA",value:function(e){return"object"===(void 0===e?"undefined":o(e))&&e instanceof this.ASTYNode&&"boolean"==typeof e.ASTy&&!0===e.ASTy}},{key:"serialize",value:function(e){return p.default.serialize(this,e)}},{key:"unserialize",value:function(e){return p.default.unserialize(this,e)}}]),e}();n.exports=m},{"./asty-base.js":1,"./asty-dump.js":2,"./asty-merge.js":3,"./asty-serialize.js":4,"./asty-version.js":5,"./asty-walk.js":6}]},{},[1,2,3,4,5,6,7])(7)});
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],3:[function(_dereq_,module,exports){
"use strict";function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),ASTY=_dereq_("asty"),ASTQ=_dereq_("astq"),ASTQAdapter=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"taste",value:function(){return!0}},{key:"getParentNode",value:function(e){return e.parent()}},{key:"getChildNodes",value:function(e){return e.childs()}},{key:"getNodeType",value:function(e){return e.type()}},{key:"getNodeAttrNames",value:function(e){return e.attrs()}},{key:"getNodeAttrValue",value:function(e,t){return e.get(t)}}]),e}(),ASTYASTQ=function(e){function t(){var e,r;_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));if(!(n instanceof t))return e=new t,_possibleConstructorReturn(n,e);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),o=new ASTQ;return o.adapter(new ASTQAdapter),n.extend({query:function(e,t,r){return o.query(this,e,t,r)}}),r=n,_possibleConstructorReturn(n,r)}return _inherits(t,e),t}(ASTY);module.exports=ASTYASTQ;
},{"astq":1,"asty":2}]},{},[3])(3)
});


//# sourceMappingURL=asty-astq.browser.map