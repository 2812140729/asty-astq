/*
**  ASTy-ASTq -- Abstract Syntax Tree With Integrated Query Engine
**  Copyright (c) 2014-2018 Ralf S. Engelschall <rse@engelschall.com>
**
**  Permission is hereby granted, free of charge, to any person obtaining
**  a copy of this software and associated documentation files (the
**  "Software"), to deal in the Software without restriction, including
**  without limitation the rights to use, copy, modify, merge, publish,
**  distribute, sublicense, and/or sell copies of the Software, and to
**  permit persons to whom the Software is furnished to do so, subject to
**  the following conditions:
**
**  The above copyright notice and this permission notice shall be included
**  in all copies or substantial portions of the Software.
**
**  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
**  EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
**  MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
**  IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY
**  CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,
**  TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE
**  SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
*/

(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.ASTYASTQ = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(_dereq_,module,exports){
(function (global){
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.ASTQ=e()}}(function(){return function e(t,r,n){function u(a,i){if(!r[a]){if(!t[a]){var s="function"==typeof _dereq_&&_dereq_;if(!i&&s)return s(a,!0);if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=r[a]={exports:{}};t[a][0].call(l.exports,function(e){var r=t[a][1][e];return u(r||e)},l,l.exports,e,t,r,n)}return r[a].exports}for(var o="function"==typeof _dereq_&&_dereq_,a=0;a<n.length;a++)u(n[a]);return u}({1:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(){function e(){n(this,e)}return o(e,null,[{key:"taste",value:function(e){return"object"===(void 0===e?"undefined":u(e))&&null!==e&&"boolean"==typeof e.ASTy}},{key:"getParentNode",value:function(e){return e.parent()}},{key:"getChildNodes",value:function(e){return e.childs()}},{key:"getNodeType",value:function(e){return e.type()}},{key:"getNodeAttrNames",value:function(e){return e.attrs()}},{key:"getNodeAttrValue",value:function(e,t){return e.get(t)}}]),e}();r.default=a},{}],2:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(){function e(){n(this,e)}return o(e,null,[{key:"taste",value:function(e){return"object"===(void 0===e?"undefined":u(e))&&null!==e&&"string"==typeof e.type&&""!==e.type}},{key:"getParentNode",value:function(e,t){if("*"!==t&&"parent"!==t)throw new Error('no such axis named "'+t+'" for walking to parent nodes');if(void 0!==e.parent)return e.parent;throw new Error("Your Mozilla SpiderMonkey AST does not support parent node traversal")}},{key:"getChildNodes",value:function(e,t){var r=this,n=[],o=function(e,t){e.hasOwnProperty(t)&&r.taste(e[t])?n.push(e[t]):e.hasOwnProperty(t)&&"object"===u(e[t])&&e[t]instanceof Array&&e[t].forEach(function(e){r.taste(e)&&n.push(e)})};if("*"===t)for(var a in e)o(e,a);else{if(void 0===e[t])throw new Error('no such axis named "'+t+'" for walking to child nodes');o(e,t)}return n}},{key:"getNodeType",value:function(e){return e.type}},{key:"getNodeAttrNames",value:function(e){var t=[];for(var r in e)e.hasOwnProperty(r)&&"object"!==u(e[r])&&"type"!==r&&"loc"!==r&&t.push(r);return t}},{key:"getNodeAttrValue",value:function(e,t){return e.hasOwnProperty(t)&&"object"!==u(e[t])&&"type"!==t&&"loc"!==t?e[t]:void 0}}]),e}();r.default=a},{}],3:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(){function e(){n(this,e)}return o(e,null,[{key:"taste",value:function(e){return"object"===(void 0===e?"undefined":u(e))&&null!==e&&!("object"===("undefined"==typeof Node?"undefined":u(Node))&&e instanceof Node)&&"string"==typeof e.nodeName&&""!==e.nodeName}},{key:"getParentNode",value:function(e){return e.parentNode}},{key:"getChildNodes",value:function(e){return"object"===u(e.childNodes)&&e.childNodes instanceof Array?e.childNodes:[]}},{key:"getNodeType",value:function(e){return e.nodeName}},{key:"getNodeAttrNames",value:function(e){var t=["value"];return"object"===u(e.attrs)&&e.attrs instanceof Array&&(t=t.concat(e.attrs.map(function(e){return e.name}))),t}},{key:"getNodeAttrValue",value:function(e,t){var r=void 0;if("value"===t)r=e.value;else if("object"===u(e.attrs)&&e.attrs instanceof Array){var n=e.attrs.filter(function(e){return e.name===t}).map(function(e){return e.value});1===n.length&&(r=n[0])}return r}}]),e}();r.default=a},{}],4:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(){function e(){n(this,e)}return o(e,null,[{key:"taste",value:function(e){return"object"===("undefined"==typeof Node?"undefined":u(Node))&&null!==e&&e instanceof Node&&"object"===(void 0===e?"undefined":u(e))&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName}},{key:"getParentNode",value:function(e){return e.parentNode}},{key:"getChildNodes",value:function(e){return"object"===u(e.childNodes)&&null!==e.childNodes&&e.hasChildNodes()?Array.prototype.slice.call(e.childNodes,0):[]}},{key:"getNodeType",value:function(e){return"string"==typeof e.nodeName?e.nodeName:"unknown"}},{key:"getNodeAttrNames",value:function(e){return"object"===u(e.attributes)&&null!==e.attributes&&e.hasAttributes()?Array.prototype.slice.call(e.attributes,0).map(function(e){return e.nodeName}):[]}},{key:"getNodeAttrValue",value:function(e,t){return"object"===u(e.attributes)&&null!==e.attributes&&e.hasAttributes()?e.getAttribute(t):void 0}}]),e}();r.default=a},{}],5:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(){function e(){return n(this,e),this._adapters=[],this}return u(e,[{key:"register",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._adapters.unshift({adapter:e,force:t}),this}},{key:"unregister",value:function(e){if(void 0===e)this._adapters=[];else{for(var t=[],r=0;r<this._adapters.length;r++)this._adapters[r].adapter!==e&&t.push(this._adapters[r]);this._adapters=t}return this}},{key:"select",value:function(e){for(var t=0;t<this._adapters.length;t++)if(this._adapters[t].force||this._adapters[t].adapter.taste(e))return this._adapters[t].adapter}}]),e}();r.default=o},{}],6:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=function(e,t){var r=e.getParentNode(t,"*");if(null===r)return 1;for(var n=e.getChildNodes(r,"*"),u=0;u<n.length;u++)if(n[u]===t)return u+1;throw new Error("cannot find myself")},o=function(e,t){for(var r=[];null!==(t=e.getParentNode(t,"*"));)r.push(t);return r},a={type:function(e,t){return e.getNodeType(t)},attrs:function(e,t,r){return void 0===r&&(r=" "),r+e.getNodeAttrNames(t).join(r)+r},depth:function(e,t){for(var r=1,n=t;null!==(n=e.getParentNode(n,"*"));)r++;return r},pos:function(e,t){return u(e,t)},nth:function(e,t,r){r=parseInt(r,10);var n=e.getParentNode(t,"*");if(null!==n){var u=e.getChildNodes(n,"*");r<0&&(r=u.length-(r+1));for(var o=0;o<u.length;o++)if(u[o]===t)return o+1===r;return!1}return 1===r},first:function(e,t){return a.nth(e,t,1)},last:function(e,t){return a.nth(e,t,-1)},count:function(e,t,r){return"object"===(void 0===r?"undefined":n(r))&&r instanceof Array?r.length:"object"===(void 0===r?"undefined":n(r))?Object.keys(r).length:"string"==typeof r?r.length:String(r).length},below:function(e,t,r){if(!e.taste(r))throw new Error('invalid argument to function "below" (node expected)');for(var n=t;null!==(n=e.getParentNode(n,"*"));)if(n===r)return!0;return!1},follows:function(e,t,r){if(!e.taste(r))throw new Error('invalid argument to function "follows" (node expected)');if(t===r)return!1;var n=[t].concat(o(e,t)).reverse(),a=[r].concat(o(e,r)).reverse(),i=Math.min(n.length,a.length),s=void 0;for(s=0;s<i&&n[s]===a[s];s++);if(0===s)throw new Error("internal error: root nodes have to be same same");return s===i?a.length<n.length:u(e,n[s])>u(e,a[s])},in:function(e,t,r){if(!("object"===(void 0===r?"undefined":n(r))&&r instanceof Array))throw new Error('invalid argument to function "in" (array expected)');for(var u=0;u<r.length;u++)if(r[u]===t)return!0;return!1},substr:function(e,t,r,n,u){return String(r).substr(n,u)},index:function(e,t,r,n,u){return String(r).indexOf(n,u)},trim:function(e,t,r){return String(r).trim()},lc:function(e,t,r){return String(r).toLowerCase()},uc:function(e,t,r){return String(r).toUpperCase()}};r.default=a},{}],7:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(){function e(){return n(this,e),this._funcs={},this}return u(e,[{key:"register",value:function(e,t){this._funcs[e]=t}},{key:"run",value:function(e,t){var r=this._funcs[e];if("function"!=typeof r)throw new Error('invalid function "'+e+'"');return r.apply(null,t)}}]),e}();r.default=o},{}],8:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=e("./astq-util.js"),c=n(s),l=e("./astq-query-trace.js"),f=n(l),d=function(e){function t(e,r,n,a){u(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.adapter=e,i.params=r,i.funcs=n,i.trace=a,i}return a(t,e),i(t,[{key:"execQuery",value:function(e,t){var r=this;this.traceBegin(e,t);var n=[];return e.childs().forEach(function(e){n=n.concat(r.execPath(e,t))}),this.traceEnd(e,t,n),n}},{key:"execPath",value:function(e,t){var r=this;this.traceBegin(e,t);var n=[t],u=[],o=!1;return e.childs().forEach(function(e){var t=[];n.forEach(function(n){t=t.concat(r.execStep(e,n))}),n=t,e.get("isResult")&&(o=!0,u=u.concat(n))}),this.traceEnd(e,t,n),o?u:n}},{key:"execStep",value:function(e,t){var r=this;this.traceBegin(e,t);var n=e.childs(),u=null,o=null,a=null,i=0;if(i<n.length&&"Axis"===n[i].type()&&(u=n[i++]),i<n.length&&"Match"===n[i].type()&&(o=n[i++]),i<n.length&&"Filter"===n[i].type()&&(a=n[i++]),null===o)throw new Error("no matching part in query step");var s=[],c=o.get("id"),l=function(e){var t=r.adapter.getNodeType(e);if("*"===c||c===t){var n=!0;null!==a&&(r.execFilter(a,e)||(n=!1)),n&&s.push(e)}};if(null!==u){var f=u.get("op"),d=u.get("type");if("/"===f)this.adapter.getChildNodes(t,d).forEach(function(e){return l(e)});else if("//"===f){var h=function e(t){l(t),r.adapter.getChildNodes(t,d).forEach(function(t){return e(t)})};this.adapter.getChildNodes(t,d).forEach(function(e){return h(e)})}else if("-/"===f){var p=this.adapter.getParentNode(t,"*");if(null!==p){for(var y=this.adapter.getChildNodes(p,d),v=null,b=0;b<y.length&&y[b]!==t;b++)v=y[b];null!==v&&l(v)}}else if("-//"===f){var g=this.adapter.getParentNode(t,"*");if(null!==g){for(var x=this.adapter.getChildNodes(g,d),m=0;m<x.length&&x[m]!==t;m++);for(m--;m>=0;m--)l(x[m])}}else if("+/"===f){var A=this.adapter.getParentNode(t,"*");if(null!==A){var E=this.adapter.getChildNodes(A,d),w=void 0;for(w=0;w<E.length&&E[w]!==t;w++);w<E.length&&l(E[++w])}}else if("+//"===f){var P=this.adapter.getParentNode(t,"*");if(null!==P){var k=this.adapter.getChildNodes(P,d),N=void 0;for(N=0;N<k.length&&k[N]!==t;N++);if(N<k.length)for(N++;N<k.length;N++)l(k[N])}}else if("../"===f){var C=this.adapter.getParentNode(t,d);null!==C&&l(C)}else if("..//"===f)for(var S=t;;){var j=this.adapter.getParentNode(S,d);if(null===j)break;l(j),S=j}else if("<//"===f){for(var _={sentinel:t,take:!0};;){var T=this.adapter.getParentNode(t,"*");if(null===T)break;t=T}var q=function e(t){t===_.sentinel&&(_.take=!1),_.take&&l(t),_.take&&r.adapter.getChildNodes(t,d).forEach(function(t){return e(t)})};t!==_.sentinel&&(l(t),this.adapter.getChildNodes(t,d).forEach(function(e){return q(e)})),s=s.reverse()}else if(">//"===f){for(var O={sentinel:t,take:!1};;){var L=this.adapter.getParentNode(t,"*");if(null===L)break;t=L}var B=function e(t){O.take&&l(t),t===O.sentinel&&(O.take=!0),r.adapter.getChildNodes(t,d).forEach(function(t){return e(t)})};this.adapter.getChildNodes(t,d).forEach(function(e){return B(e)})}}else l(t);return this.traceEnd(e,t,s),s}},{key:"execFilter",value:function(e,t){this.traceBegin(e,t);var r=e.childs()[0],n=this.execExpr(r,t);return n=c.default.truthy(n),this.traceEnd(e,t,n),n}},{key:"execExpr",value:function(e,t){switch(e.type()){case"ConditionalBinary":return this.execExprConditionalBinary(e,t);case"ConditionalTernary":return this.execExprConditionalTernary(e,t);case"Logical":return this.execExprLogical(e,t);case"Bitwise":return this.execExprBitwise(e,t);case"Relational":return this.execExprRelational(e,t);case"Arithmetical":return this.execExprArithmetical(e,t);case"Unary":return this.execExprUnary(e,t);case"FuncCall":return this.execExprFuncCall(e,t);case"Attribute":return this.execExprAttribute(e,t);case"Param":return this.execExprParam(e,t);case"LiteralString":return this.execExprLiteralString(e,t);case"LiteralRegExp":return this.execExprLiteralRegExp(e,t);case"LiteralNumber":return this.execExprLiteralNumber(e,t);case"LiteralValue":return this.execExprLiteralValue(e,t);case"Path":return this.execExprPath(e,t)}}},{key:"execExprConditionalBinary",value:function(e,t){this.traceBegin(e,t);var r=this.execExpr(e.childs()[0],t);return c.default.truthy(r)||(r=this.execExpr(e.childs()[1],t)),this.traceEnd(e,t,r),r}},{key:"execExprConditionalTernary",value:function(e,t){this.traceBegin(e,t);var r=this.execExpr(e.childs()[0],t);return r=c.default.truthy(r)?this.execExpr(e.childs()[1],t):this.execExpr(e.childs()[2],t),this.traceEnd(e,t,r),r}},{key:"execExprLogical",value:function(e,t){this.traceBegin(e,t);var r=!1;switch(e.get("op")){case"&&":r=c.default.truthy(this.execExpr(e.childs()[0],t)),r&&(r=r&&c.default.truthy(this.execExpr(e.childs()[1],t)));break;case"||":r=c.default.truthy(this.execExpr(e.childs()[0],t)),r||(r=r||c.default.truthy(this.execExpr(e.childs()[1],t)))}return this.traceEnd(e,t,r),r}},{key:"execExprBitwise",value:function(e,t){this.traceBegin(e,t);var r=c.default.coerce(this.execExpr(e.childs()[0],t),"number"),n=c.default.coerce(this.execExpr(e.childs()[1],t),"number"),u=void 0;switch(e.get("op")){case"&":u=r&n;break;case"|":u=r|n;break;case"<<":u=r<<n;break;case">>":u=r>>n}return this.traceEnd(e,t,u),u}},{key:"execExprRelational",value:function(e,t){this.traceBegin(e,t);var r=this.execExpr(e.childs()[0],t),n=this.execExpr(e.childs()[1],t),u=void 0;switch(e.get("op")){case"==":u=r===n;break;case"!=":u=r!==n;break;case"<=":u=c.default.coerce(r,"number")<=c.default.coerce(n,"number");break;case">=":u=c.default.coerce(r,"number")>=c.default.coerce(n,"number");break;case"<":u=c.default.coerce(r,"number")<c.default.coerce(n,"number");break;case">":u=c.default.coerce(r,"number")>c.default.coerce(n,"number");break;case"=~":u=null!==c.default.coerce(r,"string").match(c.default.coerce(n,"regexp"));break;case"!~":u=null===c.default.coerce(r,"string").match(c.default.coerce(n,"regexp"))}return this.traceEnd(e,t,u),u}},{key:"execExprArithmetical",value:function(e,t){this.traceBegin(e,t);var r=this.execExpr(e.childs()[0],t),n=this.execExpr(e.childs()[1],t),u=void 0;switch(e.get("op")){case"+":u="string"==typeof r?r+c.default.coerce(n,"string"):c.default.coerce(r,"number")+c.default.coerce(n,"number");break;case"-":u=c.default.coerce(r,"number")+c.default.coerce(n,"number");break;case"*":u=c.default.coerce(r,"number")*c.default.coerce(n,"number");break;case"/":u=c.default.coerce(r,"number")/c.default.coerce(n,"number");break;case"%":u=c.default.coerce(r,"number")%c.default.coerce(n,"number");break;case"**":u=Math.pow(c.default.coerce(r,"number"),c.default.coerce(n,"number"))}return this.traceEnd(e,t,u),u}},{key:"execExprUnary",value:function(e,t){this.traceBegin(e,t);var r=this.execExpr(e.childs()[0],t),n=void 0;switch(e.get("op")){case"!":n=!c.default.coerce(r,"boolean");break;case"~":n=~c.default.coerce(r,"number")}return this.traceEnd(e,t,n),n}},{key:"execExprFuncCall",value:function(e,t){var r=this;this.traceBegin(e,t);var n=e.get("id"),u=[this.adapter,t];e.childs().forEach(function(e){u.push(r.execExpr(e,t))});var o=this.funcs.run(n,u);return this.traceEnd(e,t,o),o}},{key:"execExprAttribute",value:function(e,t){this.traceBegin(e,t);var r=e.get("id"),n=this.adapter.getNodeAttrValue(t,r);return this.traceEnd(e,t,n),n}},{key:"execExprParam",value:function(e,t){this.traceBegin(e,t);var r=e.get("id");if(void 0===this.params[r])throw new Error('invalid parameter "'+r+'"');var n=this.params[r];return this.traceEnd(e,t,n),n}},{key:"execExprLiteralString",value:function(e,t){this.traceBegin(e,t);var r=e.get("value");return this.traceEnd(e,t,r),r}},{key:"execExprLiteralRegExp",value:function(e,t){this.traceBegin(e,t);var r=e.get("value");return this.traceEnd(e,t,r),r}},{key:"execExprLiteralNumber",value:function(e,t){this.traceBegin(e,t);var r=e.get("value");return this.traceEnd(e,t,r),r}},{key:"execExprLiteralValue",value:function(e,t){this.traceBegin(e,t);var r=e.get("value");return this.traceEnd(e,t,r),r}},{key:"execExprPath",value:function(e,t){this.traceBegin(e,t);var r=this.execPath(e,t);return this.traceEnd(e,t,r),r}}]),t}(f.default);r.default=d},{"./astq-query-trace.js":9,"./astq-util.js":11}],9:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=e("./astq-util.js"),i=function(e){return e&&e.__esModule?e:{default:e}}(a),s=function(){function e(){n(this,e)}return o(e,[{key:"prefixOf",value:function(e,t){for(var r=0,n=e;null!==(n=n.parent());)r++;var u=i.default.pad("",4*r);for(r=0,n=t;null!==(n=this.adapter.getParentNode(n,"*"));)r++;return{prefix1:u,prefix2:i.default.pad("",4*r)}}},{key:"traceBegin",value:function(e,t){if(this.trace){var r=this.prefixOf(e,t),n=r.prefix1,u=r.prefix2;console.log("ASTQ: execute: | "+i.default.pad(n+e.type()+" (",-60)+" | "+u+this.adapter.getNodeType(t))}}},{key:"traceEnd",value:function(e,t,r){var n=this;if(this.trace){var o=this.prefixOf(e,t),a=o.prefix1,s=o.prefix2,c=void 0;void 0===r?c="undefined":"object"===(void 0===r?"undefined":u(r))&&r instanceof Array?(c="[",r.forEach(function(e){c+="node("+n.adapter.getNodeType(e)+"),"}),c=c.replace(/,$/,"")+"]"):c=(void 0===r?"undefined":u(r))+"("+r+")",c.length>60&&(c=c.substr(0,60)+"..."),console.log("ASTQ: execute: | "+i.default.pad(a+"): "+c,-60)+" | "+s+this.adapter.getNodeType(t))}}}]),e}();r.default=s},{"./astq-util.js":11}],10:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=e("./astq-query-exec.js"),a=function(e){return e&&e.__esModule?e:{default:e}}(o),i=e("asty"),s=e("pegjs-util"),c=function(){function e(t,r,n,u){this.message=t,this.expected=r,this.found=n,this.location=u,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,e)}function t(t,r){function n(){return c(pu,hu)}function u(e,t){throw t=void 0!==t?t:c(pu,hu),f(e,t)}function o(e,t){return{type:"literal",text:e,ignoreCase:t}}function a(e,t,r){return{type:"class",parts:e,inverted:t,ignoreCase:r}}function i(e){return{type:"other",description:e}}function s(e){var r,n=yu[e];if(n)return n;for(r=e-1;!yu[r];)r--;for(n=yu[r],n={line:n.line,column:n.column};r<e;)10===t.charCodeAt(r)?(n.line++,n.column=1):n.column++,r++;return yu[e]=n,n}function c(e,t){var r=s(e),n=s(t);return{start:{offset:e,line:r.line,column:r.column},end:{offset:t,line:n.line,column:n.column}}}function l(e){hu<vu||(hu>vu&&(vu=hu,bu=[]),bu.push(e))}function f(t,r){return new e(t,null,null,r)}function d(t,r,n){return new e(e.buildMessage(t,r),t,r,n)}function h(){var e,t,r,n,u,o=38*hu+0,a=xu[o];return a?(hu=a.nextPos,a.result):(e=hu,t=Y(),t!==W?(r=p(),r!==W?(n=Y(),n!==W?(u=J(),u!==W?(pu=e,t=te(r),e=t):(hu=e,e=W)):(hu=e,e=W)):(hu=e,e=W)):(hu=e,e=W),xu[o]={nextPos:hu,result:e},e)}function p(){var e,r,n,u,o,a,i,s,c=38*hu+1,f=xu[c];if(f)return hu=f.nextPos,f.result;if(e=hu,(r=y())!==W){for(n=[],u=hu,o=Y(),o!==W?(44===t.charCodeAt(hu)?(a=re,hu++):(a=W,0===gu&&l(ne)),a!==W?(i=Y(),i!==W?(s=y(),s!==W?(o=[o,a,i,s],u=o):(hu=u,u=W)):(hu=u,u=W)):(hu=u,u=W)):(hu=u,u=W);u!==W;)n.push(u),u=hu,o=Y(),o!==W?(44===t.charCodeAt(hu)?(a=re,hu++):(a=W,0===gu&&l(ne)),a!==W?(i=Y(),i!==W?(s=y(),s!==W?(o=[o,a,i,s],u=o):(hu=u,u=W)):(hu=u,u=W)):(hu=u,u=W)):(hu=u,u=W);n!==W?(pu=e,r=ue(r,n),e=r):(hu=e,e=W)}else hu=e,e=W;return xu[c]={nextPos:hu,result:e},e}function y(){var e,t,r,n,u,o,a=38*hu+2,i=xu[a];if(i)return hu=i.nextPos,i.result;if(e=hu,(t=v())!==W){for(r=[],n=hu,u=Y(),u!==W?(o=b(),o!==W?(u=[u,o],n=u):(hu=n,n=W)):(hu=n,n=W);n!==W;)r.push(n),n=hu,u=Y(),u!==W?(o=b(),o!==W?(u=[u,o],n=u):(hu=n,n=W)):(hu=n,n=W);r!==W?(pu=e,t=oe(t,r),e=t):(hu=e,e=W)}else hu=e,e=W;return xu[a]={nextPos:hu,result:e},e}function v(){var e,r,n,u,o,a,i,s,c=38*hu+3,f=xu[c];return f?(hu=f.nextPos,f.result):(e=hu,r=g(),r===W&&(r=null),r!==W?(n=Y(),n!==W?(u=m(),u!==W?(o=Y(),o!==W?(33===t.charCodeAt(hu)?(a=ae,hu++):(a=W,0===gu&&l(ie)),a===W&&(a=null),a!==W?(i=Y(),i!==W?(s=A(),s===W&&(s=null),s!==W?(pu=e,r=se(r,u,a,s),e=r):(hu=e,e=W)):(hu=e,e=W)):(hu=e,e=W)):(hu=e,e=W)):(hu=e,e=W)):(hu=e,e=W)):(hu=e,e=W),xu[c]={nextPos:hu,result:e},e)}function b(){var e,r,n,u,o,a,i,s,c=38*hu+4,f=xu[c];return f?(hu=f.nextPos,f.result):(e=hu,r=g(),r!==W?(n=Y(),n!==W?(u=m(),u!==W?(o=Y(),o!==W?(33===t.charCodeAt(hu)?(a=ae,hu++):(a=W,0===gu&&l(ie)),a===W&&(a=null),a!==W?(i=Y(),i!==W?(s=A(),s===W&&(s=null),s!==W?(pu=e,r=se(r,u,a,s),e=r):(hu=e,e=W)):(hu=e,e=W)):(hu=e,e=W)):(hu=e,e=W)):(hu=e,e=W)):(hu=e,e=W)):(hu=e,e=W),xu[c]={nextPos:hu,result:e},e)}function g(){var e,r,n,u=38*hu+5,o=xu[u];return o?(hu=o.nextPos,o.result):(gu++,e=hu,r=hu,t.substr(hu,2)===le?(n=le,hu+=2):(n=W,0===gu&&l(fe)),n===W&&(47===t.charCodeAt(hu)?(n=de,hu++):(n=W,0===gu&&l(he)),n===W&&(t.substr(hu,3)===pe?(n=pe,hu+=3):(n=W,0===gu&&l(ye)),n===W&&(t.substr(hu,2)===ve?(n=ve,hu+=2):(n=W,0===gu&&l(be)),n===W&&(t.substr(hu,3)===ge?(n=ge,hu+=3):(n=W,0===gu&&l(xe)),n===W&&(t.substr(hu,2)===me?(n=me,hu+=2):(n=W,0===gu&&l(Ae)),n===W&&(t.substr(hu,4)===Ee?(n=Ee,hu+=4):(n=W,0===gu&&l(we)),n===W&&(t.substr(hu,3)===Pe?(n=Pe,hu+=3):(n=W,0===gu&&l(ke)),n===W&&(t.substr(hu,3)===Ne?(n=Ne,hu+=3):(n=W,0===gu&&l(Ce)),n===W&&(t.substr(hu,3)===Se?(n=Se,hu+=3):(n=W,0===gu&&l(je))))))))))),r=n!==W?t.substring(r,hu):n,r!==W?(n=x(),n===W&&(n=null),n!==W?(pu=e,r=_e(r,n),e=r):(hu=e,e=W)):(hu=e,e=W),gu--,e===W&&(r=W,0===gu&&l(ce)),xu[u]={nextPos:hu,result:e},e)}function x(){var e,r,n,u=38*hu+6,o=xu[u];return o?(hu=o.nextPos,o.result):(e=hu,58===t.charCodeAt(hu)?(r=Te,hu++):(r=W,0===gu&&l(qe)),r!==W?(n=V(),n!==W?(pu=e,r=Oe(n),e=r):(hu=e,e=W)):(hu=e,e=W),e===W&&(e=hu,58===t.charCodeAt(hu)?(r=Te,hu++):(r=W,0===gu&&l(qe)),r!==W?(n=U(),n!==W?(pu=e,r=Le(n),e=r):(hu=e,e=W)):(hu=e,e=W)),xu[u]={nextPos:hu,result:e},e)}function m(){var e,r,n=38*hu+7,u=xu[n];return u?(hu=u.nextPos,u.result):(e=hu,r=V(),r!==W&&(pu=e,r=Be(r)),e=r,e===W&&(e=hu,r=U(),r!==W&&(pu=e,r=Me(r)),(e=r)===W&&(e=hu,42===t.charCodeAt(hu)?(r=Qe,hu++):(r=W,0===gu&&l(Re)),r!==W&&(pu=e,r=Fe()),e=r)),xu[n]={nextPos:hu,result:e},e)}function A(){var e,r,n,u,o,a,i=38*hu+8,s=xu[i];return s?(hu=s.nextPos,s.result):(e=hu,91===t.charCodeAt(hu)?(r=Ve,hu++):(r=W,0===gu&&l(Ue)),r!==W?(n=Y(),n!==W?(u=E(),u!==W?(o=Y(),o!==W?(93===t.charCodeAt(hu)?(a=ze,hu++):(a=W,0===gu&&l(Ie)),a!==W?(pu=e,r=Ze(u),e=r):(hu=e,e=W)):(hu=e,e=W)):(hu=e,e=W)):(hu=e,e=W)):(hu=e,e=W),xu[i]={nextPos:hu,result:e},e)}function E(){var e,r,n,u,o,a,i,s,c,f,d=38*hu+9,h=xu[d];return h?(hu=h.nextPos,h.result):(e=hu,r=w(),r!==W?(n=Y(),n!==W?(t.substr(hu,2)===De?(u=De,hu+=2):(u=W,0===gu&&l($e)),u!==W?(o=Y(),o!==W?(a=w(),a!==W?(pu=e,r=Ye(r,a),e=r):(hu=e,e=W)):(hu=e,e=W)):(hu=e,e=W)):(hu=e,e=W)):(hu=e,e=W),e===W&&(e=hu,r=w(),r!==W?(n=Y(),n!==W?(63===t.charCodeAt(hu)?(u=Ge,hu++):(u=W,0===gu&&l(He)),u!==W?(o=Y(),o!==W?(a=w(),a!==W?(i=Y(),i!==W?(58===t.charCodeAt(hu)?(s=Te,hu++):(s=W,0===gu&&l(qe)),s!==W?(c=Y(),c!==W?(f=w(),f!==W?(pu=e,r=Je(r,a,f),e=r):(hu=e,e=W)):(hu=e,e=W)):(hu=e,e=W)):(hu=e,e=W)):(hu=e,e=W)):(hu=e,e=W)):(hu=e,e=W)):(hu=e,e=W)):(hu=e,e=W),e===W&&(e=w())),xu[d]={nextPos:hu,result:e},e)}function w(){var e,r,n,u,o,a,i=38*hu+10,s=xu[i];return s?(hu=s.nextPos,s.result):(e=hu,r=P(),r!==W?(n=Y(),n!==W?(u=hu,t.substr(hu,2)===Ke?(o=Ke,hu+=2):(o=W,0===gu&&l(We)),u=o!==W?t.substring(u,hu):o,u!==W?(o=Y(),o!==W?(a=w(),a!==W?(pu=e,r=Xe(r,u,a),e=r):(hu=e,e=W)):(hu=e,e=W)):(hu=e,e=W)):(hu=e,e=W)):(hu=e,e=W),e===W&&(e=P()),xu[i]={nextPos:hu,result:e},e)}function P(){var e,r,n,u,o,a,i=38*hu+11,s=xu[i];return s?(hu=s.nextPos,s.result):(e=hu,r=k(),r!==W?(n=Y(),n!==W?(u=hu,t.substr(hu,2)===et?(o=et,hu+=2):(o=W,0===gu&&l(tt)),u=o!==W?t.substring(u,hu):o,u!==W?(o=Y(),o!==W?(a=P(),a!==W?(pu=e,r=Xe(r,u,a),e=r):(hu=e,e=W)):(hu=e,e=W)):(hu=e,e=W)):(hu=e,e=W)):(hu=e,e=W),e===W&&(e=k()),xu[i]={nextPos:hu,result:e},e)}function k(){var e,r,n,u,o,a,i=38*hu+12,s=xu[i];return s?(hu=s.nextPos,s.result):(e=hu,r=N(),r!==W?(n=Y(),n!==W?(u=hu,124===t.charCodeAt(hu)?(o=rt,hu++):(o=W,0===gu&&l(nt)),u=o!==W?t.substring(u,hu):o,u!==W?(o=Y(),o!==W?(a=k(),a!==W?(pu=e,r=ut(r,u,a),e=r):(hu=e,e=W)):(hu=e,e=W)):(hu=e,e=W)):(hu=e,e=W)):(hu=e,e=W),e===W&&(e=N()),xu[i]={nextPos:hu,result:e},e)}function N(){var e,r,n,u,o,a,i=38*hu+13,s=xu[i];return s?(hu=s.nextPos,s.result):(e=hu,r=C(),r!==W?(n=Y(),n!==W?(u=hu,94===t.charCodeAt(hu)?(o=ot,hu++):(o=W,0===gu&&l(at)),u=o!==W?t.substring(u,hu):o,u!==W?(o=Y(),o!==W?(a=N(),a!==W?(pu=e,r=ut(r,u,a),e=r):(hu=e,e=W)):(hu=e,e=W)):(hu=e,e=W)):(hu=e,e=W)):(hu=e,e=W),e===W&&(e=C()),xu[i]={nextPos:hu,result:e},e)}function C(){var e,r,n,u,o,a,i=38*hu+14,s=xu[i];return s?(hu=s.nextPos,s.result):(e=hu,r=S(),r!==W?(n=Y(),n!==W?(u=hu,38===t.charCodeAt(hu)?(o=it,hu++):(o=W,0===gu&&l(st)),u=o!==W?t.substring(u,hu):o,u!==W?(o=Y(),o!==W?(a=C(),a!==W?(pu=e,r=ut(r,u,a),e=r):(hu=e,e=W)):(hu=e,e=W)):(hu=e,e=W)):(hu=e,e=W)):(hu=e,e=W),e===W&&(e=S()),xu[i]={nextPos:hu,result:e},e)}function S(){var e,r,n,u,o,a,i=38*hu+15,s=xu[i];return s?(hu=s.nextPos,s.result):(e=hu,r=j(),r!==W?(n=Y(),n!==W?(u=hu,t.substr(hu,2)===ct?(o=ct,hu+=2):(o=W,0===gu&&l(lt)),o===W&&(t.substr(hu,2)===ft?(o=ft,hu+=2):(o=W,0===gu&&l(dt)),o===W&&(t.substr(hu,2)===ht?(o=ht,hu+=2):(o=W,0===gu&&l(pt)),o===W&&(t.substr(hu,2)===yt?(o=yt,hu+=2):(o=W,0===gu&&l(vt)),o===W&&(60===t.charCodeAt(hu)?(o=bt,hu++):(o=W,0===gu&&l(gt)),o===W&&(62===t.charCodeAt(hu)?(o=xt,hu++):(o=W,0===gu&&l(mt)),o===W&&(t.substr(hu,2)===At?(o=At,hu+=2):(o=W,0===gu&&l(Et)),o===W&&(t.substr(hu,2)===wt?(o=wt,hu+=2):(o=W,0===gu&&l(Pt))))))))),u=o!==W?t.substring(u,hu):o,u!==W?(o=Y(),o!==W?(a=S(),a!==W?(pu=e,r=kt(r,u,a),e=r):(hu=e,e=W)):(hu=e,e=W)):(hu=e,e=W)):(hu=e,e=W)):(hu=e,e=W),e===W&&(e=j()),xu[i]={nextPos:hu,result:e},e)}function j(){var e,r,n,u,o,a,i=38*hu+16,s=xu[i];return s?(hu=s.nextPos,s.result):(e=hu,r=_(),r!==W?(n=Y(),n!==W?(u=hu,t.substr(hu,2)===Nt?(o=Nt,hu+=2):(o=W,0===gu&&l(Ct)),o===W&&(t.substr(hu,2)===St?(o=St,hu+=2):(o=W,0===gu&&l(jt))),u=o!==W?t.substring(u,hu):o,u!==W?(o=Y(),o!==W?(a=j(),a!==W?(pu=e,r=ut(r,u,a),e=r):(hu=e,e=W)):(hu=e,e=W)):(hu=e,e=W)):(hu=e,e=W)):(hu=e,e=W),e===W&&(e=_()),xu[i]={nextPos:hu,result:e},e)}function _(){var e,r,n,u,o,a,i=38*hu+17,s=xu[i];return s?(hu=s.nextPos,s.result):(e=hu,r=T(),r!==W?(n=Y(),n!==W?(u=hu,43===t.charCodeAt(hu)?(o=_t,hu++):(o=W,0===gu&&l(Tt)),o===W&&(45===t.charCodeAt(hu)?(o=qt,hu++):(o=W,0===gu&&l(Ot))),u=o!==W?t.substring(u,hu):o,u!==W?(o=Y(),o!==W?(a=_(),a!==W?(pu=e,r=Lt(r,u,a),e=r):(hu=e,e=W)):(hu=e,e=W)):(hu=e,e=W)):(hu=e,e=W)):(hu=e,e=W),e===W&&(e=T()),xu[i]={nextPos:hu,result:e},e)}function T(){var e,r,n,u,o,a,i=38*hu+18,s=xu[i];return s?(hu=s.nextPos,s.result):(e=hu,r=q(),r!==W?(n=Y(),n!==W?(u=hu,t.substr(hu,2)===Bt?(o=Bt,hu+=2):(o=W,0===gu&&l(Mt)),o===W&&(42===t.charCodeAt(hu)?(o=Qe,hu++):(o=W,0===gu&&l(Re)),o===W&&(47===t.charCodeAt(hu)?(o=de,hu++):(o=W,0===gu&&l(he)),o===W&&(37===t.charCodeAt(hu)?(o=Qt,hu++):(o=W,0===gu&&l(Rt))))),u=o!==W?t.substring(u,hu):o,u!==W?(o=Y(),o!==W?(a=T(),a!==W?(pu=e,r=Lt(r,u,a),e=r):(hu=e,e=W)):(hu=e,e=W)):(hu=e,e=W)):(hu=e,e=W)):(hu=e,e=W),e===W&&(e=q()),xu[i]={nextPos:hu,result:e},e)}function q(){var e,r,n,u=38*hu+19,o=xu[u];return o?(hu=o.nextPos,o.result):(e=hu,r=hu,33===t.charCodeAt(hu)?(n=ae,hu++):(n=W,0===gu&&l(ie)),n===W&&(126===t.charCodeAt(hu)?(n=Ft,hu++):(n=W,0===gu&&l(Vt))),r=n!==W?t.substring(r,hu):n,r!==W?(n=O(),n!==W?(pu=e,r=Ut(r,n),e=r):(hu=e,
e=W)):(hu=e,e=W),e===W&&(e=O()),xu[u]={nextPos:hu,result:e},e)}function O(){var e,t=38*hu+20,r=xu[t];return r?(hu=r.nextPos,r.result):(e=L(),e===W&&(e=M())===W&&(e=Q())===W&&(e=R())===W&&(e=F())===W&&(e=y()),xu[t]={nextPos:hu,result:e},e)}function L(){var e,r,n,u,o,a,i,s,c=38*hu+21,f=xu[c];return f?(hu=f.nextPos,f.result):(e=hu,r=V(),r!==W?(n=Y(),n!==W?(40===t.charCodeAt(hu)?(u=zt,hu++):(u=W,0===gu&&l(It)),u!==W?(o=Y(),o!==W?(a=B(),a===W&&(a=null),a!==W?(i=Y(),i!==W?(41===t.charCodeAt(hu)?(s=Zt,hu++):(s=W,0===gu&&l(Dt)),s!==W?(pu=e,r=$t(r,a),e=r):(hu=e,e=W)):(hu=e,e=W)):(hu=e,e=W)):(hu=e,e=W)):(hu=e,e=W)):(hu=e,e=W)):(hu=e,e=W),xu[c]={nextPos:hu,result:e},e)}function B(){var e,r,n,u,o,a,i,s,c=38*hu+22,f=xu[c];if(f)return hu=f.nextPos,f.result;if(e=hu,(r=E())!==W){for(n=[],u=hu,o=Y(),o!==W?(44===t.charCodeAt(hu)?(a=re,hu++):(a=W,0===gu&&l(ne)),a!==W?(i=Y(),i!==W?(s=E(),s!==W?(o=[o,a,i,s],u=o):(hu=u,u=W)):(hu=u,u=W)):(hu=u,u=W)):(hu=u,u=W);u!==W;)n.push(u),u=hu,o=Y(),o!==W?(44===t.charCodeAt(hu)?(a=re,hu++):(a=W,0===gu&&l(ne)),a!==W?(i=Y(),i!==W?(s=E(),s!==W?(o=[o,a,i,s],u=o):(hu=u,u=W)):(hu=u,u=W)):(hu=u,u=W)):(hu=u,u=W);n!==W?(pu=e,r=Yt(r,n),e=r):(hu=e,e=W)}else hu=e,e=W;return xu[c]={nextPos:hu,result:e},e}function M(){var e,r,n,u=38*hu+23,o=xu[u];return o?(hu=o.nextPos,o.result):(gu++,e=hu,64===t.charCodeAt(hu)?(r=Ht,hu++):(r=W,0===gu&&l(Jt)),r!==W?(n=V(),n!==W?(pu=e,r=Kt(n),e=r):(hu=e,e=W)):(hu=e,e=W),e===W&&(e=hu,64===t.charCodeAt(hu)?(r=Ht,hu++):(r=W,0===gu&&l(Jt)),r!==W?(n=U(),n!==W?(pu=e,r=Wt(n),e=r):(hu=e,e=W)):(hu=e,e=W)),gu--,e===W&&(r=W,0===gu&&l(Gt)),xu[u]={nextPos:hu,result:e},e)}function Q(){var e,r,n,u,o,a,i=38*hu+24,s=xu[i];return s?(hu=s.nextPos,s.result):(gu++,e=hu,123===t.charCodeAt(hu)?(r=er,hu++):(r=W,0===gu&&l(tr)),r!==W?(n=Y(),n!==W?(u=V(),u!==W?(o=Y(),o!==W?(125===t.charCodeAt(hu)?(a=rr,hu++):(a=W,0===gu&&l(nr)),a!==W?(pu=e,r=ur(u),e=r):(hu=e,e=W)):(hu=e,e=W)):(hu=e,e=W)):(hu=e,e=W)):(hu=e,e=W),gu--,e===W&&(r=W,0===gu&&l(Xt)),xu[i]={nextPos:hu,result:e},e)}function R(){var e,t=38*hu+25,r=xu[t];return r?(hu=r.nextPos,r.result):(e=U(),e===W&&(e=Z())===W&&(e=D())===W&&(e=$()),xu[t]={nextPos:hu,result:e},e)}function F(){var e,r,n,u,o,a,i=38*hu+26,s=xu[i];return s?(hu=s.nextPos,s.result):(e=hu,40===t.charCodeAt(hu)?(r=zt,hu++):(r=W,0===gu&&l(It)),r!==W?(n=Y(),n!==W?(u=E(),u!==W?(o=Y(),o!==W?(41===t.charCodeAt(hu)?(a=Zt,hu++):(a=W,0===gu&&l(Dt)),a!==W?(pu=e,r=or(u),e=r):(hu=e,e=W)):(hu=e,e=W)):(hu=e,e=W)):(hu=e,e=W)):(hu=e,e=W),xu[i]={nextPos:hu,result:e},e)}function V(){var e,r,n,u,o,a,i,s=38*hu+27,c=xu[s];if(c)return hu=c.nextPos,c.result;if(gu++,e=hu,r=hu,n=hu,u=hu,gu++,o=$(),gu--,o===W?u=void 0:(hu=u,u=W),u!==W)if(ir.test(t.charAt(hu))?(o=t.charAt(hu),hu++):(o=W,0===gu&&l(sr)),o!==W){for(a=[],cr.test(t.charAt(hu))?(i=t.charAt(hu),hu++):(i=W,0===gu&&l(lr));i!==W;)a.push(i),cr.test(t.charAt(hu))?(i=t.charAt(hu),hu++):(i=W,0===gu&&l(lr));a!==W?(u=[u,o,a],n=u):(hu=n,n=W)}else hu=n,n=W;else hu=n,n=W;return r=n!==W?t.substring(r,hu):n,r!==W&&(pu=e,r=fr(r)),e=r,gu--,e===W&&(r=W,0===gu&&l(ar)),xu[s]={nextPos:hu,result:e},e}function U(){var e,r,n,u,o=38*hu+28,a=xu[o];if(a)return hu=a.nextPos,a.result;if(gu++,e=hu,34===t.charCodeAt(hu)?(r=hr,hu++):(r=W,0===gu&&l(pr)),r!==W){for(n=[],u=z(),u===W&&(yr.test(t.charAt(hu))?(u=t.charAt(hu),hu++):(u=W,0===gu&&l(vr)));u!==W;)n.push(u),(u=z())===W&&(yr.test(t.charAt(hu))?(u=t.charAt(hu),hu++):(u=W,0===gu&&l(vr)));n!==W?(34===t.charCodeAt(hu)?(u=hr,hu++):(u=W,0===gu&&l(pr)),u!==W?(pu=e,r=br(n),e=r):(hu=e,e=W)):(hu=e,e=W)}else hu=e,e=W;if(e===W)if(e=hu,39===t.charCodeAt(hu)?(r=gr,hu++):(r=W,0===gu&&l(xr)),r!==W){for(n=[],u=I(),u===W&&(mr.test(t.charAt(hu))?(u=t.charAt(hu),hu++):(u=W,0===gu&&l(Ar)));u!==W;)n.push(u),(u=I())===W&&(mr.test(t.charAt(hu))?(u=t.charAt(hu),hu++):(u=W,0===gu&&l(Ar)));n!==W?(39===t.charCodeAt(hu)?(u=gr,hu++):(u=W,0===gu&&l(xr)),u!==W?(pu=e,r=br(n),e=r):(hu=e,e=W)):(hu=e,e=W)}else hu=e,e=W;return gu--,e===W&&(r=W,0===gu&&l(dr)),xu[o]={nextPos:hu,result:e},e}function z(){var e,r,n,u,o,a,i,s,c=38*hu+29,f=xu[c];return f?(hu=f.nextPos,f.result):(gu++,e=hu,t.substr(hu,2)===wr?(r=wr,hu+=2):(r=W,0===gu&&l(Pr)),r!==W&&(pu=e,r=kr()),e=r,e===W&&(e=hu,t.substr(hu,2)===Nr?(r=Nr,hu+=2):(r=W,0===gu&&l(Cr)),r!==W&&(pu=e,r=Sr()),(e=r)===W&&(e=hu,t.substr(hu,2)===jr?(r=jr,hu+=2):(r=W,0===gu&&l(_r)),r!==W&&(pu=e,r=Tr()),(e=r)===W&&(e=hu,t.substr(hu,2)===qr?(r=qr,hu+=2):(r=W,0===gu&&l(Or)),r!==W&&(pu=e,r=Lr()),(e=r)===W&&(e=hu,t.substr(hu,2)===Br?(r=Br,hu+=2):(r=W,0===gu&&l(Mr)),r!==W&&(pu=e,r=Qr()),(e=r)===W&&(e=hu,t.substr(hu,2)===Rr?(r=Rr,hu+=2):(r=W,0===gu&&l(Fr)),r!==W&&(pu=e,r=Vr()),(e=r)===W&&(e=hu,t.substr(hu,2)===Ur?(r=Ur,hu+=2):(r=W,0===gu&&l(zr)),r!==W&&(pu=e,r=Ir()),(e=r)===W&&(e=hu,t.substr(hu,2)===Zr?(r=Zr,hu+=2):(r=W,0===gu&&l(Dr)),r!==W&&(pu=e,r=$r()),(e=r)===W&&(e=hu,t.substr(hu,2)===Yr?(r=Yr,hu+=2):(r=W,0===gu&&l(Gr)),r!==W&&(pu=e,r=Hr()),(e=r)===W&&(e=hu,t.substr(hu,2)===Jr?(r=Jr,hu+=2):(r=W,0===gu&&l(Kr)),r!==W?(n=hu,u=hu,Wr.test(t.charAt(hu))?(o=t.charAt(hu),hu++):(o=W,0===gu&&l(Xr)),o!==W?(Wr.test(t.charAt(hu))?(a=t.charAt(hu),hu++):(a=W,0===gu&&l(Xr)),a!==W?(o=[o,a],u=o):(hu=u,u=W)):(hu=u,u=W),n=u!==W?t.substring(n,hu):u,n!==W?(pu=e,r=en(n),e=r):(hu=e,e=W)):(hu=e,e=W),e===W&&(e=hu,t.substr(hu,2)===tn?(r=tn,hu+=2):(r=W,0===gu&&l(rn)),r!==W?(n=hu,u=hu,Wr.test(t.charAt(hu))?(o=t.charAt(hu),hu++):(o=W,0===gu&&l(Xr)),o!==W?(Wr.test(t.charAt(hu))?(a=t.charAt(hu),hu++):(a=W,0===gu&&l(Xr)),a!==W?(Wr.test(t.charAt(hu))?(i=t.charAt(hu),hu++):(i=W,0===gu&&l(Xr)),i!==W?(Wr.test(t.charAt(hu))?(s=t.charAt(hu),hu++):(s=W,0===gu&&l(Xr)),s!==W?(o=[o,a,i,s],u=o):(hu=u,u=W)):(hu=u,u=W)):(hu=u,u=W)):(hu=u,u=W),n=u!==W?t.substring(n,hu):u,n!==W?(pu=e,r=en(n),e=r):(hu=e,e=W)):(hu=e,e=W))))))))))),gu--,e===W&&(r=W,0===gu&&l(Er)),xu[c]={nextPos:hu,result:e},e)}function I(){var e,r,n=38*hu+30,u=xu[n];return u?(hu=u.nextPos,u.result):(gu++,e=hu,t.substr(hu,2)===un?(r=un,hu+=2):(r=W,0===gu&&l(on)),r!==W&&(pu=e,r=an()),e=r,gu--,e===W&&(r=W,0===gu&&l(nn)),xu[n]={nextPos:hu,result:e},e)}function Z(){var e,r,n,u,o,a=38*hu+31,i=xu[a];if(i)return hu=i.nextPos,i.result;if(gu++,e=hu,96===t.charCodeAt(hu)?(r=cn,hu++):(r=W,0===gu&&l(ln)),r!==W){for(n=hu,u=[],t.substr(hu,2)===fn?(o=fn,hu+=2):(o=W,0===gu&&l(dn)),o===W&&(hn.test(t.charAt(hu))?(o=t.charAt(hu),hu++):(o=W,0===gu&&l(pn)));o!==W;)u.push(o),t.substr(hu,2)===fn?(o=fn,hu+=2):(o=W,0===gu&&l(dn)),o===W&&(hn.test(t.charAt(hu))?(o=t.charAt(hu),hu++):(o=W,0===gu&&l(pn)));n=u!==W?t.substring(n,hu):u,n!==W?(96===t.charCodeAt(hu)?(u=cn,hu++):(u=W,0===gu&&l(ln)),u!==W?(pu=e,r=yn(n),e=r):(hu=e,e=W)):(hu=e,e=W)}else hu=e,e=W;return gu--,e===W&&(r=W,0===gu&&l(sn)),xu[a]={nextPos:hu,result:e},e}function D(){var e,r,n,u,o,a,i,s,c,f,d,h,p=38*hu+32,y=xu[p];if(y)return hu=y.nextPos,y.result;if(gu++,e=hu,r=hu,bn.test(t.charAt(hu))?(n=t.charAt(hu),hu++):(n=W,0===gu&&l(gn)),n===W&&(n=null),(r=n!==W?t.substring(r,hu):n)!==W)if(t.substr(hu,2)===xn?(n=xn,hu+=2):(n=W,0===gu&&l(mn)),n!==W){if(u=hu,o=[],An.test(t.charAt(hu))?(a=t.charAt(hu),hu++):(a=W,0===gu&&l(En)),a!==W)for(;a!==W;)o.push(a),An.test(t.charAt(hu))?(a=t.charAt(hu),hu++):(a=W,0===gu&&l(En));else o=W;u=o!==W?t.substring(u,hu):o,u!==W?(pu=e,r=wn(r,u),e=r):(hu=e,e=W)}else hu=e,e=W;else hu=e,e=W;if(e===W){if(e=hu,r=hu,bn.test(t.charAt(hu))?(n=t.charAt(hu),hu++):(n=W,0===gu&&l(gn)),n===W&&(n=null),(r=n!==W?t.substring(r,hu):n)!==W)if(t.substr(hu,2)===Pn?(n=Pn,hu+=2):(n=W,0===gu&&l(kn)),n!==W){if(u=hu,o=[],Nn.test(t.charAt(hu))?(a=t.charAt(hu),hu++):(a=W,0===gu&&l(Cn)),a!==W)for(;a!==W;)o.push(a),Nn.test(t.charAt(hu))?(a=t.charAt(hu),hu++):(a=W,0===gu&&l(Cn));else o=W;u=o!==W?t.substring(u,hu):o,u!==W?(pu=e,r=Sn(r,u),e=r):(hu=e,e=W)}else hu=e,e=W;else hu=e,e=W;if(e===W){if(e=hu,r=hu,bn.test(t.charAt(hu))?(n=t.charAt(hu),hu++):(n=W,0===gu&&l(gn)),n===W&&(n=null),(r=n!==W?t.substring(r,hu):n)!==W)if(t.substr(hu,2)===jn?(n=jn,hu+=2):(n=W,0===gu&&l(_n)),n!==W){if(u=hu,o=[],Wr.test(t.charAt(hu))?(a=t.charAt(hu),hu++):(a=W,0===gu&&l(Xr)),a!==W)for(;a!==W;)o.push(a),Wr.test(t.charAt(hu))?(a=t.charAt(hu),hu++):(a=W,0===gu&&l(Xr));else o=W;u=o!==W?t.substring(u,hu):o,u!==W?(pu=e,r=Tn(r,u),e=r):(hu=e,e=W)}else hu=e,e=W;else hu=e,e=W;if(e===W){if(e=hu,r=hu,n=hu,bn.test(t.charAt(hu))?(u=t.charAt(hu),hu++):(u=W,0===gu&&l(gn)),u===W&&(u=null),u!==W){for(o=[],qn.test(t.charAt(hu))?(a=t.charAt(hu),hu++):(a=W,0===gu&&l(On));a!==W;)o.push(a),qn.test(t.charAt(hu))?(a=t.charAt(hu),hu++):(a=W,0===gu&&l(On));if(o!==W)if(46===t.charCodeAt(hu)?(a=Ln,hu++):(a=W,0===gu&&l(Bn)),a!==W){if(i=[],qn.test(t.charAt(hu))?(s=t.charAt(hu),hu++):(s=W,0===gu&&l(On)),s!==W)for(;s!==W;)i.push(s),qn.test(t.charAt(hu))?(s=t.charAt(hu),hu++):(s=W,0===gu&&l(On));else i=W;if(i!==W){if(s=hu,Mn.test(t.charAt(hu))?(c=t.charAt(hu),hu++):(c=W,0===gu&&l(Qn)),c!==W)if(bn.test(t.charAt(hu))?(f=t.charAt(hu),hu++):(f=W,0===gu&&l(gn)),f===W&&(f=null),f!==W){if(d=[],qn.test(t.charAt(hu))?(h=t.charAt(hu),hu++):(h=W,0===gu&&l(On)),h!==W)for(;h!==W;)d.push(h),qn.test(t.charAt(hu))?(h=t.charAt(hu),hu++):(h=W,0===gu&&l(On));else d=W;d!==W?(c=[c,f,d],s=c):(hu=s,s=W)}else hu=s,s=W;else hu=s,s=W;s===W&&(s=null),s!==W?(u=[u,o,a,i,s],n=u):(hu=n,n=W)}else hu=n,n=W}else hu=n,n=W;else hu=n,n=W}else hu=n,n=W;if(r=n!==W?t.substring(r,hu):n,r!==W&&(pu=e,r=Rn(r)),(e=r)===W){if(e=hu,r=hu,n=hu,bn.test(t.charAt(hu))?(u=t.charAt(hu),hu++):(u=W,0===gu&&l(gn)),u===W&&(u=null),u!==W){if(o=[],qn.test(t.charAt(hu))?(a=t.charAt(hu),hu++):(a=W,0===gu&&l(On)),a!==W)for(;a!==W;)o.push(a),qn.test(t.charAt(hu))?(a=t.charAt(hu),hu++):(a=W,0===gu&&l(On));else o=W;o!==W?(u=[u,o],n=u):(hu=n,n=W)}else hu=n,n=W;r=n!==W?t.substring(r,hu):n,r!==W&&(pu=e,r=Fn(r)),e=r}}}}return gu--,e===W&&(r=W,0===gu&&l(vn)),xu[p]={nextPos:hu,result:e},e}function $(){var e,r,n=38*hu+33,u=xu[n];return u?(hu=u.nextPos,u.result):(gu++,e=hu,t.substr(hu,4)===Un?(r=Un,hu+=4):(r=W,0===gu&&l(zn)),r!==W&&(pu=e,r=In()),e=r,e===W&&(e=hu,t.substr(hu,5)===Zn?(r=Zn,hu+=5):(r=W,0===gu&&l(Dn)),r!==W&&(pu=e,r=$n()),(e=r)===W&&(e=hu,t.substr(hu,4)===Yn?(r=Yn,hu+=4):(r=W,0===gu&&l(Gn)),r!==W&&(pu=e,r=Hn()),(e=r)===W&&(e=hu,t.substr(hu,3)===Jn?(r=Jn,hu+=3):(r=W,0===gu&&l(Kn)),r!==W&&(pu=e,r=Wn()),(e=r)===W&&(e=hu,t.substr(hu,9)===Xn?(r=Xn,hu+=9):(r=W,0===gu&&l(eu)),r!==W&&(pu=e,r=tu()),e=r)))),gu--,e===W&&(r=W,0===gu&&l(Vn)),xu[n]={nextPos:hu,result:e},e)}function Y(){var e,t,r=38*hu+34,n=xu[r];if(n)return hu=n.nextPos,n.result;for(gu++,e=[],t=G(),t===W&&(t=H());t!==W;)e.push(t),(t=G())===W&&(t=H());return gu--,e===W&&(t=W,0===gu&&l(ru)),xu[r]={nextPos:hu,result:e},e}function G(){var e,r,n,u,o,a,i=38*hu+35,s=xu[i];if(s)return hu=s.nextPos,s.result;if(gu++,e=hu,t.substr(hu,2)===uu?(r=uu,hu+=2):(r=W,0===gu&&l(ou)),r!==W){for(n=[],u=hu,o=hu,gu++,t.substr(hu,2)===au?(a=au,hu+=2):(a=W,0===gu&&l(iu)),gu--,a===W?o=void 0:(hu=o,o=W),o!==W?(t.length>hu?(a=t.charAt(hu),hu++):(a=W,0===gu&&l(su)),a!==W?(o=[o,a],u=o):(hu=u,u=W)):(hu=u,u=W);u!==W;)n.push(u),u=hu,o=hu,gu++,t.substr(hu,2)===au?(a=au,hu+=2):(a=W,0===gu&&l(iu)),gu--,a===W?o=void 0:(hu=o,o=W),o!==W?(t.length>hu?(a=t.charAt(hu),hu++):(a=W,0===gu&&l(su)),a!==W?(o=[o,a],u=o):(hu=u,u=W)):(hu=u,u=W);n!==W?(t.substr(hu,2)===au?(u=au,hu+=2):(u=W,0===gu&&l(iu)),u!==W?(r=[r,n,u],e=r):(hu=e,e=W)):(hu=e,e=W)}else hu=e,e=W;return gu--,e===W&&(r=W,0===gu&&l(nu)),xu[i]={nextPos:hu,result:e},e}function H(){var e,r,n=38*hu+36,u=xu[n];if(u)return hu=u.nextPos,u.result;if(gu++,e=[],lu.test(t.charAt(hu))?(r=t.charAt(hu),hu++):(r=W,0===gu&&l(fu)),r!==W)for(;r!==W;)e.push(r),lu.test(t.charAt(hu))?(r=t.charAt(hu),hu++):(r=W,0===gu&&l(fu));else e=W;return gu--,e===W&&(r=W,0===gu&&l(cu)),xu[n]={nextPos:hu,result:e},e}function J(){var e,r,n=38*hu+37,u=xu[n];return u?(hu=u.nextPos,u.result):(gu++,e=hu,gu++,t.length>hu?(r=t.charAt(hu),hu++):(r=W,0===gu&&l(su)),gu--,r===W?e=void 0:(hu=e,e=W),gu--,e===W&&(r=W,0===gu&&l(du)),xu[n]={nextPos:hu,result:e},e)}r=void 0!==r?r:{};var K,W={},X={query:h},ee=h,te=function(e){return e},re=",",ne=o(",",!1),ue=function(e,t){return Au("Query").add(mu(e,t,3))},oe=function(e,t){return Au("Path").add(mu(e,t,1))},ae="!",ie=o("!",!1),se=function(e,t,r,n){return Au("Step").add(e,t,n).set(null!==r?{isResult:!0}:{})},ce=i("axis"),le="//",fe=o("//",!1),de="/",he=o("/",!1),pe="-//",ye=o("-//",!1),ve="-/",be=o("-/",!1),ge="+//",xe=o("+//",!1),me="+/",Ae=o("+/",!1),Ee="..//",we=o("..//",!1),Pe="../",ke=o("../",!1),Ne="<//",Ce=o("<//",!1),Se=">//",je=o(">//",!1),_e=function(e,t){return Au("Axis").set({op:e,type:null!==t?t:"*"})},Te=":",qe=o(":",!1),Oe=function(e){return e.get("id")},Le=function(e){return e.get("value")},Be=function(e){return Au("Match").merge(e)},Me=function(e){return Au("Match").set({id:e.get("value")})},Qe="*",Re=o("*",!1),Fe=function(){return Au("Match").set({id:"*"})},Ve="[",Ue=o("[",!1),ze="]",Ie=o("]",!1),Ze=function(e){return Au("Filter").add(e)},De="?:",$e=o("?:",!1),Ye=function(e,t){return Au("ConditionalBinary").add(e,t)},Ge="?",He=o("?",!1),Je=function(e,t,r){return Au("ConditionalTernary").add(e,t,r)},Ke="||",We=o("||",!1),Xe=function(e,t,r){return Au("Logical").set({op:t}).add(e,r)},et="&&",tt=o("&&",!1),rt="|",nt=o("|",!1),ut=function(e,t,r){return Au("Bitwise").set({op:t}).add(e,r)},ot="^",at=o("^",!1),it="&",st=o("&",!1),ct="==",lt=o("==",!1),ft="!=",dt=o("!=",!1),ht="<=",pt=o("<=",!1),yt=">=",vt=o(">=",!1),bt="<",gt=o("<",!1),xt=">",mt=o(">",!1),At="=~",Et=o("=~",!1),wt="!~",Pt=o("!~",!1),kt=function(e,t,r){return Au("Relational").set({op:t}).add(e,r)},Nt="<<",Ct=o("<<",!1),St=">>",jt=o(">>",!1),_t="+",Tt=o("+",!1),qt="-",Ot=o("-",!1),Lt=function(e,t,r){return Au("Arithmetical").set({op:t}).add(e,r)},Bt="**",Mt=o("**",!1),Qt="%",Rt=o("%",!1),Ft="~",Vt=o("~",!1),Ut=function(e,t){return Au("Unary").set({op:e}).add(t)},zt="(",It=o("(",!1),Zt=")",Dt=o(")",!1),$t=function(e,t){return Au("FuncCall").merge(e).add(t)},Yt=function(e,t){return mu(e,t,3)},Gt=i("node attribute"),Ht="@",Jt=o("@",!1),Kt=function(e){return Au("Attribute").merge(e)},Wt=function(e){return Au("Attribute").set({id:e.get("value")})},Xt=i("query parameter reference"),er="{",tr=o("{",!1),rr="}",nr=o("}",!1),ur=function(e){return Au("Param").merge(e)},or=function(e){return e},ar=i("identifier"),ir=/^[a-zA-Z_]/,sr=a([["a","z"],["A","Z"],"_"],!1,!1),cr=/^[a-zA-Z0-9_\-]/,lr=a([["a","z"],["A","Z"],["0","9"],"_","-"],!1,!1),fr=function(e){return Au("Identifier").set({id:e})},dr=i("quoted string literal"),hr='"',pr=o('"',!1),yr=/^[^"]/,vr=a(['"'],!0,!1),br=function(e){return Au("LiteralString").set({value:e.join("")})},gr="'",xr=o("'",!1),mr=/^[^']/,Ar=a(["'"],!0,!1),Er=i("escaped double-quoted-string character"),wr="\\\\",Pr=o("\\\\",!1),kr=function(){return"\\"},Nr='\\"',Cr=o('\\"',!1),Sr=function(){return'"'},jr="\\b",_r=o("\\b",!1),Tr=function(){return"\b"},qr="\\v",Or=o("\\v",!1),Lr=function(){return"\v"},Br="\\f",Mr=o("\\f",!1),Qr=function(){return"\f"},Rr="\\t",Fr=o("\\t",!1),Vr=function(){return"\t"},Ur="\\r",zr=o("\\r",!1),Ir=function(){return"\r"},Zr="\\n",Dr=o("\\n",!1),$r=function(){return"\n"},Yr="\\e",Gr=o("\\e",!1),Hr=function(){return""},Jr="\\x",Kr=o("\\x",!1),Wr=/^[0-9a-fA-F]/,Xr=a([["0","9"],["a","f"],["A","F"]],!1,!1),en=function(e){return String.fromCharCode(parseInt(e,16))},tn="\\u",rn=o("\\u",!1),nn=i("escaped single-quoted-string character"),un="\\'",on=o("\\'",!1),an=function(){return"'"},sn=i("regular expression literal"),cn="`",ln=o("`",!1),fn="\\`",dn=o("\\`",!1),hn=/^[^`]/,pn=a(["`"],!0,!1),yn=function(e){var t;try{t=new RegExp(e.replace(/\\`/g,"`"))}catch(e){u(e.message)}return Au("LiteralRegExp").set({value:t})},vn=i("numeric literal"),bn=/^[+\-]/,gn=a(["+","-"],!1,!1),xn="0b",mn=o("0b",!1),An=/^[01]/,En=a(["0","1"],!1,!1),wn=function(e,t){return Au("LiteralNumber").set({value:parseInt(e+t,2)})},Pn="0o",kn=o("0o",!1),Nn=/^[0-7]/,Cn=a([["0","7"]],!1,!1),Sn=function(e,t){return Au("LiteralNumber").set({value:parseInt(e+t,8)})},jn="0x",_n=o("0x",!1),Tn=function(e,t){return Au("LiteralNumber").set({value:parseInt(e+t,16)})},qn=/^[0-9]/,On=a([["0","9"]],!1,!1),Ln=".",Bn=o(".",!1),Mn=/^[eE]/,Qn=a(["e","E"],!1,!1),Rn=function(e){return Au("LiteralNumber").set({value:parseFloat(e)})},Fn=function(e){return Au("LiteralNumber").set({value:parseInt(e,10)})},Vn=i("global value"),Un="true",zn=o("true",!1),In=function(){return Au("LiteralValue").set({value:!0})},Zn="false",Dn=o("false",!1),$n=function(){return Au("LiteralValue").set({value:!1})},Yn="null",Gn=o("null",!1),Hn=function(){return Au("LiteralValue").set({value:null})},Jn="NaN",Kn=o("NaN",!1),Wn=function(){return Au("LiteralValue").set({value:NaN})},Xn="undefined",eu=o("undefined",!1),tu=function(){return Au("LiteralValue").set({value:void 0})},ru=i("optional blank"),nu=i("multi-line comment"),uu="/*",ou=o("/*",!1),au="*/",iu=o("*/",!1),su=function(){return{type:"any"}}(),cu=i("any whitespaces"),lu=/^[ \t\r\n]/,fu=a([" ","\t","\r","\n"],!1,!1),du=i("end of file"),hu=0,pu=0,yu=[{line:1,column:1}],vu=0,bu=[],gu=0,xu={};if("startRule"in r){if(!(r.startRule in X))throw new Error("Can't start parsing from rule \""+r.startRule+'".');ee=X[r.startRule]}var mu=r.util.makeUnroll(n,r),Au=r.util.makeAST(n,r);if((K=ee())!==W&&hu===t.length)return K;throw K!==W&&hu<t.length&&l(function(){return{type:"end"}}()),d(bu,vu<t.length?t.charAt(vu):null,vu<t.length?c(vu,vu+1):c(vu,vu))}return function(e,t){function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r}(e,Error),e.buildMessage=function(e,t){function r(e){return e.charCodeAt(0).toString(16).toUpperCase()}function n(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+r(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+r(e)})}function u(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+r(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+r(e)})}function o(e){return a[e.type](e)}var a={literal:function(e){return'"'+n(e.text)+'"'},class:function(e){var t,r="";for(t=0;t<e.parts.length;t++)r+=e.parts[t]instanceof Array?u(e.parts[t][0])+"-"+u(e.parts[t][1]):u(e.parts[t]);return"["+(e.inverted?"^":"")+r+"]"},any:function(e){return"any character"},end:function(e){return"end of input"},other:function(e){return e.description}};return"Expected "+function(e){var t,r,n=new Array(e.length);for(t=0;t<e.length;t++)n[t]=o(e[t]);if(n.sort(),n.length>0){for(t=1,r=1;t<n.length;t++)n[t-1]!==n[t]&&(n[r]=n[t],r++);n.length=r}switch(n.length){case 1:return n[0];case 2:return n[0]+" or "+n[1];default:return n.slice(0,-1).join(", ")+", or "+n[n.length-1]}}(e)+" but "+function(e){return e?'"'+n(e)+'"':"end of input"}(t)+" found."},{SyntaxError:e,parse:t}}(),l=function(){function e(t){n(this,e),this.asty=new i,this.ast=null,t&&this.compile(t)}return u(e,[{key:"compile",value:function(e,t){var r=this;t&&console.log("ASTQ: compile: +-------------------------------------------------------------------------------------------------------\nASTQ: compile: | "+e);var n=s.parse(c,e,{startRule:"query",makeAST:function(e,t,n,u){return r.asty.create.apply(r.asty,u).pos(e,t,n)}});if(null!==n.error)throw new Error("ASTQ: compile: query parsing failed:\n"+s.errorMessage(n.error,!0).replace(/^/gm,"ERROR: "));return this.ast=n.ast,t&&console.log("ASTQ: compile: +-------------------------------------------------------------------------------------------------------\n"+this.dump().replace(/\n$/,"").replace(/^/gm,"ASTQ: compile: | ")),this}},{key:"dump",value:function(){return this.ast.dump()}},{key:"execute",value:function(e,t,r,n,u){return u&&console.log("ASTQ: execute: +--------------------------------------------------------------+----------------------------------------"),new a.default(t,r,n,u).execQuery(this.ast,e)}}]),e}();r.default=l},{"./astq-query-exec.js":8,asty:"asty","pegjs-util":"pegjs-util"}],11:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(){function e(){n(this,e)}return o(e,null,[{key:"pad",value:function(e,t){var r=t<0?-t:t;if(e.length>r)e=e.substr(0,r);else{var n=Array(r+1-e.length).join(" ");e=t<0?e+n:n+e}return e}},{key:"truthy",value:function(e){var t=void 0;switch(void 0===e?"undefined":u(e)){case"boolean":t=e;break;case"number":t=0!==e&&!isNaN(e);break;case"string":t=""!==e;break;case"object":t=!1,null!==e&&(t=!0,e instanceof Array&&(t=e.length>0));break;default:t=!1}return t}},{key:"coerce",value:function(e,t){if((void 0===e?"undefined":u(e))!==t)try{switch(t){case"boolean":"boolean"!=typeof e&&(e=Boolean(e));break;case"number":"number"!=typeof e&&(e=Number(e));break;case"string":"string"!=typeof e&&(e=String(e));break;case"regexp":"object"===(void 0===e?"undefined":u(e))&&e instanceof RegExp||(e=new RegExp(e))}}catch(e){throw new Error("cannot coerce value into type "+t)}return e}}]),e}();r.default=a},{}],12:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={major:2,minor:0,micro:6,date:20180317};r.default=n},{}],13:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=e("./astq-adapter.js"),s=n(i),c=e("./astq-adapter-xmldom.js"),l=n(c),f=e("./astq-adapter-parse5.js"),d=n(f),h=e("./astq-adapter-mozast.js"),p=n(h),y=e("./astq-adapter-asty.js"),v=n(y),b=e("./astq-funcs.js"),g=n(b),x=e("./astq-funcs-std.js"),m=n(x),A=e("./astq-query.js"),E=n(A),w=e("./astq-version.js"),P=n(w),k=e("cache-lru"),N=function(){function e(){u(this,e),this._adapter=(new s.default).register(l.default,!1).register(d.default,!1).register(p.default,!1).register(v.default,!1),this._funcs=new g.default;for(var t in m.default)this.func(t,m.default[t]);this._cache=new k}return a(e,[{key:"version",value:function(){return P.default}},{key:"adapter",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(arguments.length<1||arguments.length>2)throw new Error("ASTQ#adapter: invalid number of arguments");if(this._adapter.unregister(),"object"===(void 0===e?"undefined":o(e))&&e instanceof Array||(e=[e]),e.length>1&&r)throw new Error("ASTQ#adapter: you can force just a single adapter to not taste the AST node");return e.forEach(function(e){if("string"==typeof e)if("mozast"===e)e=p.default;else if("xmldom"===e)e=l.default;else if("parse5"===e)e=d.default;else{if("asty"!==e)throw new Error("ASTQ#adapter: unknown built-in adapter");e=v.default}t._adapter.register(e,r)}),this}},{key:"func",value:function(e,t){if(2!==arguments.length)throw new Error("ASTQ#func: invalid number of arguments");return this._funcs.register(e,t),this}},{key:"cache",value:function(e){if(1!==arguments.length)throw new Error("ASTQ#cache: invalid number of arguments");return this._cache.limit(e),this}},{key:"compile",value:function(e,t){if(arguments.length<1)throw new Error("ASTQ#compile: too less arguments");if(arguments.length>2)throw new Error("ASTQ#compile: too many arguments");void 0===t&&(t=!1);var r=this._cache.get(e);return void 0===r&&(r=new E.default,r.compile(e,t),this._cache.set(e,r)),r}},{key:"execute",value:function(e,t,r,n){if(arguments.length<2)throw new Error("ASTQ#execute: too less arguments");if(arguments.length>4)throw new Error("ASTQ#execute: too many arguments");void 0===r&&(r={}),void 0===n&&(n=!1);var u=this._adapter.select(e);if(void 0===u)throw new Error("ASTQ#execute: no suitable adapter found for node");return t.execute(e,u,r,this._funcs,n)}},{key:"query",value:function(e,t,r,n){if(arguments.length<2)throw new Error("ASTQ#query: too less arguments");if(arguments.length>4)throw new Error("ASTQ#query: too many arguments");return void 0===r&&(r={}),void 0===n&&(n=!1),this.execute(e,this.compile(t,n),r,n)}}]),e}();t.exports=N},{"./astq-adapter-asty.js":1,"./astq-adapter-mozast.js":2,"./astq-adapter-parse5.js":3,"./astq-adapter-xmldom.js":4,"./astq-adapter.js":5,"./astq-funcs-std.js":6,"./astq-funcs.js":7,"./astq-query.js":10,"./astq-version.js":12,"cache-lru":"cache-lru"}]},{},[1,2,3,4,5,6,7,8,9,10,11,12,13])(13)});
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],2:[function(_dereq_,module,exports){
(function (global){
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n;n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,n.ASTY=e()}}(function(){return function e(n,t,r){function o(u,a){if(!t[u]){if(!n[u]){var f="function"==typeof _dereq_&&_dereq_;if(!a&&f)return f(u,!0);if(i)return i(u,!0);var l=new Error("Cannot find module '"+u+"'");throw l.code="MODULE_NOT_FOUND",l}var s=t[u]={exports:{}};n[u][0].call(s.exports,function(e){var t=n[u][1][e];return o(t||e)},s,s.exports,e,n,t,r)}return t[u].exports}for(var i="function"==typeof _dereq_&&_dereq_,u=0;u<r.length;u++)o(r[u]);return o}({1:[function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),u=function(){function e(){r(this,e)}return i(e,[{key:"init",value:function(e,n,t,r){if(arguments.length<2)throw new Error("init: invalid number of arguments");if(this.ctx=e,this.ASTy=!0,this.T=n,this.L={L:0,C:0,O:0},this.A={},this.C=[],this.P=null,"object"===(void 0===t?"undefined":o(t)))for(var i in t)t.hasOwnProperty(i)&&this.set(i,t[i]);return"object"===(void 0===r?"undefined":o(r))&&r instanceof Array&&this.add(r),this}},{key:"type",value:function(e){if(0===arguments.length)return this.T;if(1===arguments.length)return this.T=e,this;throw new Error("type: invalid number of arguments")}},{key:"pos",value:function(e,n,t){if(0===arguments.length)return{line:this.L.L,column:this.L.C,offset:this.L.O};if(arguments.length<=3)return this.L.L=e||0,this.L.C=n||0,this.L.O=t||0,this;throw new Error("pos: invalid number of arguments")}},{key:"set",value:function(){for(var e=this,n=arguments.length,t=Array(n),r=0;r<n;r++)t[r]=arguments[r];if(1===t.length&&"object"===o(t[0]))Object.keys(t[0]).forEach(function(n){e.A[n]=t[0][n]});else{if(2!==t.length)throw new Error("set: invalid number of arguments");this.A[t[0]]=t[1]}return this}},{key:"unset",value:function(){for(var e=this,n=arguments.length,t=Array(n),r=0;r<n;r++)t[r]=arguments[r];if(1===t.length&&"object"===o(t[0])&&t[0]instanceof Array)t[0].forEach(function(n){delete e.A[n]});else{if(1!==t.length)throw new Error("unset: invalid number of arguments");delete this.A[t[0]]}return this}},{key:"get",value:function(e){if(1!==arguments.length)throw new Error("get: invalid number of arguments");if("string"!=typeof e)throw new Error("get: invalid key argument");return this.A[e]}},{key:"attrs",value:function(){return Object.keys(this.A)}},{key:"nth",value:function(){if(null===this.P)return 1;var e=this.P.C.indexOf(this);if(e<0)throw new Error("nth: internal error -- node not in childs of its parent");return e}},{key:"ins",value:function(e){for(var n=this,t=arguments.length,r=Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];if(0===r.length)throw new Error("ins: invalid number of arguments");if(e<0&&(e=this.C.length+1-e),!(0<=e&&e<=this.C.length))throw new Error("ins: invalid position");var u=function(t){if(!n.ctx.isA(t))throw new Error("ins: invalid AST node argument");n.C.splice(e++,0,t),t.P=n};return r.forEach(function(e){"object"===(void 0===e?"undefined":o(e))&&e instanceof Array?e.forEach(function(e){u(e)}):null!==e&&u(e)}),this}},{key:"add",value:function(){for(var e=this,n=arguments.length,t=Array(n),r=0;r<n;r++)t[r]=arguments[r];if(0===t.length)throw new Error("add: invalid number of arguments");var i=function(n){if(!e.ctx.isA(n))throw new Error("add: invalid AST node argument");e.C.push(n),n.P=e};return t.forEach(function(e){"object"===(void 0===e?"undefined":o(e))&&e instanceof Array?e.forEach(function(e){i(e)}):null!==e&&i(e)}),this}},{key:"del",value:function(){for(var e=this,n=arguments.length,t=Array(n),r=0;r<n;r++)t[r]=arguments[r];if(0===t.length)throw new Error("del: invalid number of arguments");return t.forEach(function(n){if(!e.ctx.isA(n))throw new Error("del: invalid AST node argument");for(var t=!1,r=0;r<e.C.length;r++)if(e.C[r]===n){e.C.splice(r,1),n.P=null,t=!0;break}if(!t)throw new Error("del: AST node not found in childs")}),this}},{key:"childs",value:function(){if(arguments.length>2)throw new Error("childs: invalid number of arguments");if(2===arguments.length&&"number"==typeof(arguments.length<=0?void 0:arguments[0])&&"number"==typeof(arguments.length<=1?void 0:arguments[1]))return this.C.slice(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1]);if(1===arguments.length&&"number"==typeof(arguments.length<=0?void 0:arguments[0]))return this.C.slice(arguments.length<=0?void 0:arguments[0]);if(0===arguments.length)return this.C;throw new Error("childs: invalid type of arguments")}},{key:"child",value:function(e){if("number"!=typeof e)throw new Error("child: invalid argument");return e<this.C.length?this.C[e]:null}},{key:"parent",value:function(){return this.P}},{key:"serialize",value:function(){return this.ctx.serialize(this.ctx,this)}}]),e}();t.default=u},{}],2:[function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),u=function(){function e(){r(this,e)}return i(e,[{key:"dump",value:function(e){void 0===e&&(e=1/0);var n="";return this.walk(function(t,r){if(!(r>e)){for(var i=0;i<r;i++)n+="    ";n+=t.T+" ";var u=Object.keys(t.A);if(u.length>0){n+="(";var a=!0;u.forEach(function(e){a?a=!1:n+=", ",n+=e+": ";var r=t.A[e];switch(void 0===r?"undefined":o(r)){case"boolean":case"number":n+=r.toString();break;case"string":var i=function(e){return e.charCodeAt(0).toString(16).toUpperCase()};n+='"'+r.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(e){return"\\x0"+i(e)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(e){return"\\x"+i(e)}).replace(/[\u0100-\u0FFF]/g,function(e){return"\\u0"+i(e)}).replace(/[\u1000-\uFFFF]/g,function(e){return"\\u"+i(e)})+'"';break;case"object":r instanceof RegExp?n+=r.source:n+=JSON.stringify(r);break;default:n+=JSON.stringify(r)}}),n+=") "}n+="["+t.L.L+"/"+t.L.C+"]\n"}},"downward"),n}}]),e}();t.default=u},{}],3:[function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),i=function(){function e(){r(this,e)}return o(e,[{key:"merge",value:function(e){var n=this,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null===e)return this;if(!this.ctx.isA(e))throw new Error("merge: invalid AST node argument");if(t){var o=e.pos();this.pos(o.L,o.C,o.O)}return e.attrs().forEach(function(t){var o=void 0!==r[t]?r[t]:t;null!==o&&n.set(o,e.get(t))}),e.childs().forEach(function(e){n.add(e)}),this}}]),e}();t.default=i},{}],4:[function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),u=function(){function e(){r(this,e)}return i(e,null,[{key:"serialize",value:function(e,n){if(!e.isA(n))throw new Error("serialize: not an ASTy node");return JSON.stringify({ASTy:function e(n){var t={T:n.T,L:{L:n.L.L,C:n.L.C,O:n.L.O}},r=Object.keys(n.A);return r.length>0&&(t.A={},r.forEach(function(e){var r=n.A[e];switch(void 0===r?"undefined":o(r)){case"boolean":case"number":case"string":t.A[e]=r;break;default:t.A[e]=JSON.parse(JSON.stringify(r))}})),n.C.length>0&&(t.C=n.C.map(function(n){return e(n)})),t}(n)})}},{key:"unserialize",value:function(e,n){var t=JSON.parse(n);if("object"!==(void 0===t?"undefined":o(t))||"object"!==o(t.ASTy))throw new Error("unserialize: not an ASTy JSON export");return function n(t){var r=e.create(t.T);return r.pos(t.L.L,t.L.C,t.L.O),"object"===o(t.A)&&Object.keys(t.A).forEach(function(e){var n=t.A[e];switch(void 0===n?"undefined":o(n)){case"boolean":case"number":case"string":r.set(e,n);break;default:r.set(e,JSON.parse(JSON.stringify(n)))}}),"object"===o(t.C)&&t.C instanceof Array&&r.add(t.C.map(function(e){return n(e)})),r}(t.ASTy)}}]),e}();t.default=u},{}],5:[function(e,n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={major:1,minor:5,micro:6,date:20180317};t.default=r},{}],6:[function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),i=function(){function e(){r(this,e)}return o(e,[{key:"walk",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"downward";return function t(r,o,i){"downward"!==n&&"both"!==n||e.call(null,r,o,i,"downward"),r.C.forEach(function(e){t(e,o+1,r)}),"upward"!==n&&"both"!==n||e.call(null,r,o,i,"upward")}(this,0,null),this}}]),e}();t.default=i},{}],7:[function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),a=e("./asty-base.js"),f=r(a),l=e("./asty-merge.js"),s=r(l),c=e("./asty-walk.js"),h=r(c),d=e("./asty-dump.js"),y=r(d),v=e("./asty-serialize.js"),p=r(v),b=e("./asty-version.js"),g=r(b),m=function(){function e(){var n=this;return o(this,e),this.ASTYNode=function(){},[[f.default,"init","type","pos","set","unset","get","attrs","nth","ins","add","del","childs","parent","serialize"],[s.default,"merge"],[h.default,"walk"],[y.default,"dump"]].forEach(function(e){var t=e[0].prototype;e.slice(1).forEach(function(e){n.ASTYNode.prototype[e]=t[e]})}),this}return u(e,[{key:"version",value:function(){return g.default}},{key:"extend",value:function(e){for(var n in e)e.hasOwnProperty(n)&&(this.ASTYNode.prototype[n]=e[n]);return this}},{key:"create",value:function(e,n,t){return(new this.ASTYNode).init(this,e,n,t)}},{key:"isA",value:function(e){return"object"===(void 0===e?"undefined":i(e))&&e instanceof this.ASTYNode&&"boolean"==typeof e.ASTy&&!0===e.ASTy}},{key:"serialize",value:function(e){return p.default.serialize(this,e)}},{key:"unserialize",value:function(e){return p.default.unserialize(this,e)}}]),e}();n.exports=m},{"./asty-base.js":1,"./asty-dump.js":2,"./asty-merge.js":3,"./asty-serialize.js":4,"./asty-version.js":5,"./asty-walk.js":6}]},{},[1,2,3,4,5,6,7])(7)});
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],3:[function(_dereq_,module,exports){
"use strict";function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),ASTY=_dereq_("asty"),ASTQ=_dereq_("astq"),ASTQAdapter=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"taste",value:function(){return!0}},{key:"getParentNode",value:function(e){return e.parent()}},{key:"getChildNodes",value:function(e){return e.childs()}},{key:"getNodeType",value:function(e){return e.type()}},{key:"getNodeAttrNames",value:function(e){return e.attrs()}},{key:"getNodeAttrValue",value:function(e,t){return e.get(t)}}]),e}(),ASTYASTQ=function(e){function t(){var e,r;_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));if(!(n instanceof t))return e=new t,_possibleConstructorReturn(n,e);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),o=new ASTQ;return o.adapter(new ASTQAdapter),n.extend({query:function(e,t,r){return o.query(this,e,t,r)}}),r=n,_possibleConstructorReturn(n,r)}return _inherits(t,e),t}(ASTY);module.exports=ASTYASTQ;
},{"astq":1,"asty":2}]},{},[3])(3)
});


//# sourceMappingURL=asty-astq.browser.map